(this.webpackJsonptoohak=this.webpackJsonptoohak||[]).push([[0],{128:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var c,i,a,r,o,s,l,u=n(0),j=n.n(u),d=n(18),b=n.n(d),f=(n(128),n(17)),h=n(175),O=n(214),m=n(6),p=n(1),x=j.a.createContext([]),g=function(e){var t=e.children,n=Object(u.useState)([]),c=Object(m.a)(n,2),i=c[0],a=c[1];return Object(p.jsx)(x.Provider,{value:{projects:i,setProjects:a},children:t})},v=n(52),C=n(19),y=n(108),w={main:"#2196f3",light:"#6ec6ff",dark:"#0069c0"},S={main:"#e91e63",light:"#ff6090",dark:"#b0003a"},k="#f44336",I={main:"#2196f3",light:"#ffffff",dark:"#0069c0"},N={main:"#000000",mainContrast:"#ffffff",light:"#000000",dark:"#888888",contrast:"#6ec6ff",errorContrast:"#ffffff"},E="#4caf50",R=Object(y.a)({palette:{primary:{main:w.main,contrastText:N.mainContrast,light:w.light},secondary:{main:S.main,contrastText:N.main,light:S.light},background:{default:I.main,paper:I.light},error:{main:k},text:{primary:N.main,secondary:N.dark}},typography:{fontSize:12}}),T=n(177),P=n(179),F=n(95),z=Object(h.a)((function(e){return{fullHeight:{height:"100%"},noMinHeight:Object(f.a)({},e.breakpoints.down("sm"),{minHeight:"30px"})}})),A=function(){var e=z();return Object(u.useEffect)((function(){F.a.initialize("UA-198673819-1"),F.a.pageview(window.location.pathname)}),[]),Object(p.jsx)(T.a,{position:"static",className:e.fullHeight,children:Object(p.jsx)(P.a,{className:"".concat(e.fullHeight," ").concat(e.noMinHeight),children:Object(p.jsx)(v.b,{to:"/",style:{color:"#ffffff",textDecoration:"none",fontWeight:"bold"},children:"!toohaK"})})})},D=n(181),H="projects",W=function(){var e=Object(u.useContext)(x),t=e.projects,n=e.setProjects;Object(u.useEffect)((function(){if(null==t||0===t.length){var e=localStorage.getItem(H);n(null!=e&&""!==e?JSON.parse(e):[])}}));return{projects:t,setProjects:function(e){localStorage.setItem(H,JSON.stringify(e)),n(e)}}},_=n(2),M=n(180),L=n(182),U=n(183);!function(e){e.SelectAnswer="SA",e.TrueOrFalse="TF",e.FillGaps="FG",e.Match="MT",e.Sort="SO",e.Classify="CL",e.FillTable="FT",e.TheOddOne="OO",e.Crossword="CW"}(c||(c={})),function(e){e[e.Design=0]="Design",e[e.Play=1]="Play"}(i||(i={})),function(e){e.Horizontal="H",e.Vertical="V"}(a||(a={})),function(e){e.Writing="W",e.Dragging="D"}(r||(r={})),function(e){e.Es="ES",e.En="EN"}(o||(o={})),function(e){e[e.Source=0]="Source",e[e.Destination=1]="Destination"}(s||(s={})),function(e){e.None="NONE",e.Url="URL",e.Base64="BASE64"}(l||(l={}));var q=Object(h.a)((function(){return{root:{height:"100%",backgroundColor:"#f0f0f0"},titleContainer:{height:"20%"},centralSmallContainer:{height:"50%"},centralFullContainer:{height:"80%"},bottomContainer:{height:"30%",paddingTop:"10px"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"}}})),B=function(e){var t=e.mode,n=e.challenge,c=e.options,a=e.onChallengeChange,r=e.stopTime,s=e.onTimeUp,l=e.showCheck,j=e.disabledCheck,d=e.onCheckClick,b=e.centralComponent,f=e.bottomComponent,h=Object(u.useState)(!1),O=Object(m.a)(h,2),x=O[0],g=O[1],v=Object(u.useState)(!1),C=Object(m.a)(v,2),y=C[0],w=C[1],S=q();Object(u.useEffect)((function(){r&&w(!0)}),[r]);return Object(p.jsxs)(M.a,{variant:"outlined",className:S.root,children:[Object(p.jsx)("div",{className:S.titleContainer,children:Object(p.jsx)(fe,{mode:t,question:n.question,fontSize:n.config.questionFontSize,onChange:function(e){a&&a(Object(_.a)(Object(_.a)({},n),{},{question:e}))}})}),Object(p.jsx)("div",{className:f?S.centralSmallContainer:S.centralFullContainer,children:Object(p.jsxs)(D.a,{container:!0,justify:"center",style:{height:"100%"},children:[Object(p.jsx)(D.a,{item:!0,xs:2,style:{height:"100%"},children:(t===i.Design||null!=c&&!c.ignoreTimeLimit)&&Object(p.jsx)(me,{mode:t,time:n.config.timeLimit,stopTimer:t===i.Design||y,onTimeUp:function(){s&&s()}})}),Object(p.jsx)(D.a,{item:!0,xs:8,style:{height:"100%"},children:b}),Object(p.jsx)(D.a,{item:!0,xs:2,style:{height:"100%"},className:S.centerAll,children:l&&Object(p.jsxs)(L.a,{variant:"extended",size:"large",color:"primary",disabled:x||j,onClick:function(){g(!0),d&&d()},children:[Object(p.jsx)(U.a,{children:"check"}),"\xa0",(null===c||void 0===c?void 0:c.language)===o.En?"Check":"Corregir"]})})]})}),f&&Object(p.jsx)("div",{className:S.bottomContainer,children:f})]})},G=n(8),V=Object(h.a)({fullHeight:{height:"100%"}}),J=function(e){var t=e.challenge,n=e.onChallengeChange,c=V();return Object(p.jsxs)(D.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:10,className:c.fullHeight,children:Object(p.jsx)(te,{mode:i.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(p.jsx)(D.a,{item:!0,xs:2,className:c.fullHeight,children:Object(p.jsx)(ae,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(G.a)(t.groups);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return{name:"",items:[]}}));n=[].concat(Object(G.a)(n),Object(G.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.groupCount),i=Object(_.a)(Object(_.a)({},t),{},{groups:c,config:e});n(i)}})})]})},K=n(184),Q=n(44),Y=n(20),$=n.p+"static/media/correct.6415db46.wav",X=n.p+"static/media/incorrect.70fff5c7.wav",Z=Object(h.a)((function(){return{fullHeight:{height:"100%"},optionsContainer:{height:"20%",border:"solid 1px gray",backgroundColor:"#ffffff"},groupsContainer:{height:"80%"}}})),ee=function(e,t){var n=e.reduce((function(e,t){return[].concat(Object(G.a)(e),Object(G.a)(t.items))}),[]);return t===i.Play&&(n=n.sort((function(){return Math.random()-.5}))),n},te=function(e){var t=e.mode,n=e.challenge,c=e.options,a=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(u.useState)(function(e){return e.groups.map((function(e){return{groupName:e.name,items:[]}}))}(n)),l=Object(m.a)(s,2),j=l[0],d=l[1],b=Object(u.useState)(!1),f=Object(m.a)(b,2),h=f[0],O=f[1],x=Object(u.useState)(!1),g=Object(m.a)(x,2),v=g[0],C=g[1],y=Object(u.useState)(ee(n.groups,t)),w=Object(m.a)(y,2),S=w[0],k=w[1],I=Object(Y.a)($),N=Object(m.a)(I,1)[0],E=Object(Y.a)(X),R=Object(m.a)(E,1)[0],T=Z();Object(u.useEffect)((function(){k(ee(n.groups,t))}),[n.groups]);var P=function(e){O(!0),C(!0),e?N():R(),setTimeout((function(){e?r&&r():o&&o()}),2e3)},F=function(e){return j.reduce((function(t,n){return t||n.items.indexOf(e)>=0}),!1)};return Object(p.jsx)(B,{mode:t,challenge:n,options:c,onChallengeChange:function(e){a&&a(Object(_.a)(Object(_.a)({},n),e))},stopTime:h,onTimeUp:function(){P(!1)},showCheck:!0,disabledCheck:t===i.Design||!(n.groups.reduce((function(e,t){return e+t.items.length}),0)===j.reduce((function(e,t){return e+t.items.length}),0)),onCheckClick:function(){var e=n.groups.reduce((function(e,t){var n=t.items.reduce((function(e,n){var c=j.find((function(e){return e.groupName===t.name}));return null!=c&&(e&&c.items.indexOf(n)>=0)}),!0);return e&&n}),!0);P(e)},centralComponent:Object(p.jsx)(D.a,{item:!0,xs:12,className:T.fullHeight,children:Object(p.jsx)(K.a,{backend:Q.a,children:Object(p.jsxs)(D.a,{container:!0,spacing:2,className:T.fullHeight,children:[Object(p.jsx)(D.a,{item:!0,xs:12,className:T.optionsContainer,children:Object(p.jsx)(D.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center",children:S.map((function(e,t){return!F(e)&&!F(e)&&Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Ne,{name:e,style:{fontSize:n.config.itemsFontSize}},"dragable_".concat(t))},"gridItem_".concat(t))}))})}),Object(p.jsx)(D.a,{item:!0,xs:12,className:T.groupsContainer,children:Object(p.jsx)(D.a,{container:!0,justify:"space-evenly",spacing:2,style:{height:"100%"},children:n.groups.map((function(e,c){var i;return Object(p.jsx)(D.a,{item:!0,xs:4,children:Object(p.jsx)(le,{mode:t,title:e.name,validItems:e.items,showResults:v,fontSize:n.config.itemsFontSize,onTitleChange:function(e){return function(e,t){var c=n.groups.map((function(n,c){return Object(_.a)(Object(_.a)({},n),{},{name:c!==e?n.name:t})}));a&&a(Object(_.a)(Object(_.a)({},n),{},{groups:c}))}(c,e)},onItemsChange:function(e){return function(e,t){var c=n.groups.map((function(n,c){return c!==e?Object(_.a)({},n):Object(_.a)(Object(_.a)({},n),{},{items:Object(G.a)(t)})}));a&&a(Object(_.a)(Object(_.a)({},n),{},{groups:c}))}(c,e)},droppedItems:null===(i=j.find((function(t){return t.groupName===e.name})))||void 0===i?void 0:i.items,onDrop:function(t){return function(e,t){var n=j.map((function(n){return n.groupName!==e?Object(_.a)(Object(_.a)({},n),{},{items:n.items.filter((function(e){return e!==t.name}))}):n.items.findIndex((function(e){return e===t.name}))>=0?Object(_.a)({},n):Object(_.a)(Object(_.a)({},n),{},{items:[].concat(Object(G.a)(n.items),[t.name])})}));d(n)}(e.name,t)}})},"group_".concat(c))}))})})]})})})})},ne=n(38),ce=n(226),ie=Object(h.a)({fullWidth:{width:"100%"}}),ae=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),a=i[0],r=i[1],o=Object(u.useRef)({}),s=Object(u.useRef)({}),l=ie();Object(u.useEffect)((function(){r(t)}),[t]);var j=function(e,t){var c=Object(_.a)(Object(_.a)({},a),{},Object(f.a)({},e,t));r(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(je,{config:t,onConfigChange:function(e){var t=Object(_.a)(Object(_.a)({},a),e);r(t),n&&n(t)}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:o,type:"number",label:"Tama\xf1o de letra de los elementos",inputProps:{min:1},value:a.itemsFontSize,color:"secondary",className:l.fullWidth,onInput:function(){j("itemsFontSize",parseInt(o.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:s,type:"number",label:"N\xfamero de grupos",inputProps:{min:1},value:a.groupCount,color:"secondary",className:l.fullWidth,onInput:function(){j("groupCount",parseInt(s.current.value))}})})]})},re=n(229),oe=n(216),se=Object(h.a)((function(e){return{root:{height:"100%",width:"100%"},fullWidth:{width:"100%"},fullHeight:{height:"100%"},titleContainer:{width:"100%",padding:"5px",backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},itemsContainer:{padding:"5px",height:"100%"}}})),le=function(e){var t=e.mode,n=e.title,c=e.validItems,a=e.showResults,r=e.fontSize,o=e.onTitleChange,s=e.onItemsChange,l=e.droppedItems,j=e.onDrop,d=Object(oe.a)({accept:"dnd",drop:function(e){j&&j(e)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),b=Object(m.a)(d,2),f=b[0],h=f.isOver,O=f.canDrop,x=b[1],g=Object(u.useState)({title:n||"",validItems:c||[],droppedItems:l||[]}),v=Object(m.a)(g,2),C=v[0],y=v[1],w=Object(u.useRef)({}),S=Object(u.useRef)({}),k=se();Object(u.useEffect)((function(){null!=l&&y(Object(_.a)(Object(_.a)({},C),{},{droppedItems:Object(G.a)(l)}))}),[l]);var I=function(){var e=[].concat(Object(G.a)(C.validItems),[S.current.value]),t=Object(_.a)(Object(_.a)({},C),{},{validItems:e});y(t),s&&s(e),S.current.value=""};return Object(p.jsx)(M.a,{elevation:4,className:k.root,style:{backgroundColor:h&&O?"#efefef":"#ffffff"},children:Object(p.jsxs)(D.a,{container:!0,direction:"column",className:"".concat(k.fullHeight," ").concat(k.fullWidth),children:[Object(p.jsx)(D.a,{item:!0,className:k.titleContainer,children:t===i.Play?Object(p.jsx)(ne.a,{style:{fontSize:r},children:n}):Object(p.jsx)(ce.a,{inputRef:w,value:C.title,style:{width:"100%"},inputProps:{style:{fontSize:r,textAlign:"center",color:"#ffffff"}},onInput:function(){var e=Object(_.a)(Object(_.a)({},C),{},{title:w.current.value});y(e),o&&o(w.current.value)}})}),Object(p.jsx)(D.a,{item:!0,xs:!0,children:Object(p.jsxs)(D.a,{container:!0,direction:"column",alignItems:"center",className:k.itemsContainer,spacing:2,children:[t===i.Design&&C.validItems.map((function(e,t){return Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(re.a,{label:e,color:"secondary",size:"medium",style:{fontSize:r,color:"#ffffff"},onDelete:function(){return function(e){var t=C.validItems.filter((function(t,n){return e!==n})),n=Object(_.a)(Object(_.a)({},C),{},{validItems:t});y(n),s&&s(t)}(t)}})},"item_".concat(t))})),t===i.Design&&Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:S,variant:"outlined",InputProps:{style:{fontSize:r,color:"#000000"}},label:"Nuevo elemento",onKeyPress:function(e){"Enter"===e.code&&""!==S.current.value&&I()}})},"newItem"),t===i.Play&&Object(p.jsx)(D.a,{item:!0,xs:!0,className:"".concat(k.fullWidth," ").concat(k.fullHeight),children:Object(p.jsx)("div",{ref:x,className:"".concat(k.fullWidth," ").concat(k.fullHeight),children:Object(p.jsx)(D.a,{container:!0,direction:"column",alignItems:"center",spacing:1,className:k.fullHeight,children:C.droppedItems.map((function(e){return Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Ne,{name:e,style:(t=e,a?c.indexOf(t)>=0?{fontSize:"".concat(r,"px"),backgroundColor:"#4caf50"}:{fontSize:"".concat(r,"px"),backgroundColor:"#f44336"}:{fontSize:"".concat(r,"px")})},e)},"gridItem_".concat(e));var t}))})})},"dropItem")]})})]})})},ue=Object(h.a)({fullWidth:{width:"100%"}}),je=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),a=i[0],r=i[1],o=Object(u.useRef)({}),s=Object(u.useRef)({}),l=ue();Object(u.useEffect)((function(){r(t)}),[t]);var j=function(e,t){var c=Object(_.a)(Object(_.a)({},a),{},Object(f.a)({},e,t));r(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:o,type:"number",label:"L\xedmite de tiempo (segundos)",inputProps:{min:10},value:a.timeLimit,color:"secondary",className:l.fullWidth,onInput:function(){j("timeLimit",parseInt(o.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:s,type:"number",label:"Tama\xf1o de letra del t\xedtulo",inputProps:{min:1},value:a.questionFontSize,color:"secondary",className:l.fullWidth,onInput:function(){j("questionFontSize",parseInt(s.current.value))}})})]})},de=n(48),be=Object(h.a)({root:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},inputContainer:{width:"90%",height:"80%",display:"flex",justifyContent:"center",alignItems:"center"},input:{width:"90%"}}),fe=function(e){var t=e.mode,n=e.question,c=e.fontSize,a=e.onChange,r=Object(u.useState)(n),o=Object(m.a)(r,2),s=o[0],l=o[1],j=Object(u.useRef)({}),d=be();Object(u.useEffect)((function(){l(n)}),[n]);return Object(p.jsx)("div",{className:d.root,children:Object(p.jsx)(M.a,{className:d.inputContainer,children:Object(p.jsx)(ce.a,{inputRef:j,variant:"standard",className:d.input,inputProps:{style:{textAlign:"center",fontSize:"".concat(null!=c?c/(de.isMobile&&!de.isTablet?2:1):28,"px"),lineHeight:"32px"}},InputProps:{readOnly:t===i.Play,disableUnderline:t===i.Play},placeholder:"Escribe aqu\xed el enunciado o pregunta",multiline:!0,rowsMax:2,value:s,onInput:function(){l(j.current.value),a&&a(j.current.value)}})})})},he=n(215),Oe=n(192),me=function(e){var t=e.mode,n=e.time,c=e.stopTimer,a=e.onTimeUp,r=Object(u.useState)(n),o=Object(m.a)(r,2),s=o[0],l=o[1],j=Object(u.useState)(c||!1),d=Object(m.a)(j,2),b=d[0],f=d[1];return Object(u.useEffect)((function(){l(n)}),[n]),Object(u.useEffect)((function(){f(c||!1)}),[c]),Object(u.useEffect)((function(){var e;return t!==i.Play||b||(e=setTimeout((function(){0===s?a&&a():l(s-1)}),1e3)),function(){null!=e&&clearTimeout(e)}}),[s,a]),Object(p.jsx)(D.a,{container:!0,justify:"center",alignItems:"center",style:{height:"100%"},children:Object(p.jsx)(D.a,{item:!0,children:Object(p.jsxs)(he.a,{position:"relative",display:"inline-flex",children:[Object(p.jsx)(Oe.a,{variant:"determinate",color:s>5?"primary":"secondary",size:"75px",value:Math.round(100*s/(1*n))}),Object(p.jsx)(he.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(p.jsx)(ne.a,{variant:"h5",component:"div",color:"textSecondary",children:s})})]})})})},pe=n(223),xe=n(193),ge=n(194),ve=n(195),Ce=function(e){var t=e.open,n=e.text,c=e.acceptButtonText,i=e.cancelButtonText,a=e.width,r=e.onConfirm,o=e.onRefuse;return Object(p.jsxs)(pe.a,{open:t,fullWidth:!0,maxWidth:a||"sm",children:[Object(p.jsx)(xe.a,{children:Object(p.jsx)(D.a,{container:!0,justify:"center",children:Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"button",children:n})})})}),Object(p.jsxs)(ge.a,{children:[Object(p.jsx)(ve.a,{autoFocus:!0,onClick:r,color:"primary",variant:"contained",children:c||"Aceptar"}),Object(p.jsx)(ve.a,{onClick:o,color:"primary",children:i||"Cancelar"})]})]})},ye=n(196),we=Object(h.a)((function(){return{dialogContainer:{padding:"20px"}}})),Se=function(e){var t=e.open,n=e.picture,c=e.onAccept,i=e.onCancel,a=Object(u.useState)(n),r=Object(m.a)(a,2),o=r[0],s=r[1],j=Object(u.useRef)({}),d=we();Object(u.useEffect)((function(){null!=n&&s(n)}),[n]);return Object(p.jsxs)(pe.a,{open:t,fullWidth:!0,maxWidth:"sm",children:[Object(p.jsx)(ye.a,{children:"Imagen"}),Object(p.jsx)(he.a,{className:d.dialogContainer,children:Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(ce.a,{inputRef:j,label:"URL de la imagen",fullWidth:!0,value:o.data,onInput:function(){s(Object(_.a)(Object(_.a)({},o),{},{data:j.current.value}))}})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsxs)(D.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{variant:"contained",color:"primary",onClick:function(){var e={type:l.Url,data:j.current.value};c(e)},children:"Aceptar"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{color:"primary",onClick:function(){i()},children:"Cancelar"})})]})})]})})]})},ke=n(217),Ie=Object(h.a)((function(e){return{item:{borderRadius:"10em",backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:"0.5rem 1rem",cursor:"move"}}})),Ne=function(e){var t=e.name,n=e.style,c=e.iconButton,i=Ie(),a=Object(ke.a)((function(){return{type:"dnd",item:{name:t},collect:function(e){return{opacity:e.isDragging()?.4:1}}}}),[t]),r=Object(m.a)(a,2),o=r[0].opacity,s=r[1];return Object(p.jsxs)("div",{ref:s,className:i.item,style:Object(_.a)({opacity:o},n),children:[t,c]})},Ee=n(221),Re=Object(h.a)((function(e){return{uploadInput:{display:"none"}}})),Te=function(e){var t=e.label,n=e.onDataLoaded,c=e.onError,i=Object(u.useRef)({}),a=Re(),r=Object(Ee.a)();return Object(p.jsxs)(u.Fragment,{children:[Object(p.jsx)("input",{ref:i,accept:"text",className:a.uploadInput,id:r,multiple:!0,type:"file",onInput:function(e){try{var t,a=e;if(null!=(null===a||void 0===a||null===(t=a.target)||void 0===t?void 0:t.files)){var r=a.target.files[0],o=new FileReader;o.readAsText(r),o.onloadend=function(e){try{var t=JSON.parse(o.result);n(t)}catch(i){c&&c()}}}}catch(s){c&&c()}i.current.value=""}}),Object(p.jsx)(ve.a,{style:{color:w.dark},children:Object(p.jsx)("label",{htmlFor:r,children:t})})]})},Pe=Object(h.a)((function(e){return{root:{height:"99%",justifyContent:"center",alignItems:"center"},fullHeight:{height:"100%"},pic:{maxWidth:"100%",maxHeight:"100%"}}})),Fe=function(e){var t=e.mode,n=e.pictures,c=e.onPicturesChange,a=Object(u.useState)(),r=Object(m.a)(a,2),o=r[0],s=r[1],j=Pe(),d=Object(u.useState)({height:"100%",width:8}),b=Object(m.a)(d,2),f=b[0],h=b[1];Object(u.useEffect)((function(){switch(n.length){case 9:case 8:case 7:h({height:"33.3%",width:4});break;case 6:case 5:h({height:"50%",width:4});break;case 4:case 3:h({height:"50%",width:6});break;case 2:h({height:"100%",width:6});break;default:h({height:"100%",width:12})}}),[n]);return Object(p.jsxs)(u.Fragment,{children:[o&&Object(p.jsx)(Se,{open:o.openDialog,picture:o.selectedPicture,onAccept:function(e){return t=e,i=o.selectedPictureIdx,c&&c(n.map((function(e,n){return n!==i?Object(_.a)({},e):Object(_.a)({},t)}))),void s({openDialog:!1,selectedPicture:{type:l.None,data:""},selectedPictureIdx:-1});var t,i},onCancel:function(){s({openDialog:!1,selectedPicture:{type:l.None,data:""},selectedPictureIdx:-1})}}),Object(p.jsx)(D.a,{container:!0,className:j.root,children:n.map((function(e,n){return Object(p.jsx)(D.a,{item:!0,xs:f.width,style:{height:f.height,border:t===i.Design?"solid 1px":"0px"},children:Object(p.jsxs)(D.a,{container:!0,justify:"center",alignItems:"center",className:j.fullHeight,children:[e.type!==l.None&&Object(p.jsx)("img",{className:j.pic,src:e.data,alt:""}),t===i.Design&&Object(p.jsx)(L.a,{size:"medium",color:"primary",style:{position:"absolute",color:"#ffffff"},onClick:function(){!function(e,t){s({openDialog:!0,selectedPicture:e,selectedPictureIdx:t})}(e,n)},children:Object(p.jsx)(U.a,{children:"add_a_photo"})})]})},"pic".concat(n.toString()))}))})]})},ze=n(197),Ae=n(222),De=n(218),He=n(198),We=Object(h.a)((function(){return{option:{width:"100%",height:"100%"},optionActionArea:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},optionInput:{width:"90%",color:"#ffffff"},optionInnerInput:{cursor:"pointer"},optionIcon:{color:"#ffffff"},selector:{color:"#ffffff","&$checked":{color:"#ffffff"}},checked:{}}})),_e=function(e){var t=e.mode,n=e.text,c=e.icon,a=e.valid,r=e.selected,o=e.color,s=e.fontSize,l=e.multiselect,j=e.showResults,d=e.onClick,b=e.onTextChange,f=e.onValidChange,h=Object(u.useState)({text:n||"",valid:a||!1}),O=Object(m.a)(h,2),x=O[0],g=O[1],v=Object(u.useRef)({}),C=Object(u.useRef)({}),y=Object(u.useRef)({}),S=We();Object(u.useEffect)((function(){g({text:n||"",valid:a||!1})}),[n,a]);return Object(p.jsx)(M.a,{className:S.option,style:{backgroundColor:o||w.main,borderStyle:"solid",borderWidth:j&&a||r?"3px":"0px",borderColor:j?a?"#00ff00":"#ff0000":"#323232"},children:t===i.Design?Object(p.jsx)("div",{className:S.optionActionArea,children:Object(p.jsx)(ce.a,{inputRef:v,value:x.text,placeholder:"Escribe aqu\xed una respuesta",className:S.optionInput,InputProps:{style:{color:"#ffffff",fontSize:"".concat(s||22,"px")},startAdornment:Object(p.jsx)(ze.a,{position:"start",children:Object(p.jsx)(U.a,{className:S.optionIcon,children:c})}),endAdornment:l?Object(p.jsx)(Ae.a,{inputRef:y,checked:x.valid,classes:{root:S.selector,checked:S.checked},onChange:function(){var e=Object(_.a)(Object(_.a)({},x),{},{selected:y.current.checked});g(e),f&&f(y.current.checked)}}):Object(p.jsx)(De.a,{inputRef:C,checked:x.valid,classes:{root:S.selector,checked:S.checked},onChange:function(){var e=Object(_.a)(Object(_.a)({},x),{},{selected:C.current.checked});g(e),f&&f(C.current.checked)}})},onInput:function(){var e=Object(_.a)(Object(_.a)({},x),{},{text:v.current.value});g(e),b&&b(v.current.value)},onClick:function(e){e.preventDefault()}})}):Object(p.jsx)(He.a,{className:S.optionActionArea,onClick:function(){d&&d()},children:Object(p.jsxs)(D.a,{container:!0,className:S.optionInput,spacing:2,alignItems:"center",children:[(!de.isMobile||de.isTablet)&&Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(U.a,{className:S.optionIcon,children:c})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)("label",{style:{color:"#ffffff",fontSize:"".concat(null!=s?s/(de.isMobile&&!de.isTablet?2:1):22,"px"),justifySelf:"left"},children:x.text})})]})})})},Me=Object(h.a)((function(){return{fullHeight:{height:"100%"}}})),Le=function(e){var t=e.challenge,n=e.onChallengeChange,i=Me(),a=function(e){n(e)};return Object(p.jsx)(D.a,{container:!0,className:i.fullHeight,children:Object(p.jsxs)(D.a,{item:!0,xs:12,children:[(null===t||void 0===t?void 0:t.type)===c.SelectAnswer&&Object(p.jsx)(wn,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.TrueOrFalse&&Object(p.jsx)(Bn,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.FillGaps&&Object(p.jsx)(Et,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.Match&&Object(p.jsx)(dn,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.Sort&&Object(p.jsx)(Rn,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.Classify&&Object(p.jsx)(J,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.FillTable&&Object(p.jsx)(qt,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.TheOddOne&&Object(p.jsx)(Dn,{challenge:t,onChallengeChange:a})]})})},Ue=Object(h.a)({root:{width:"100%",overflowY:"auto"},fullWidth:{width:"100%"}}),qe=function(e){var t=e.challenges,n=e.compactList,c=e.selected,i=e.onChallengeReorder,a=e.onSelect,r=e.onDelete,o=Object(u.useState)(t),s=Object(m.a)(o,2),l=s[0],j=s[1],d=Object(u.useState)(c||void 0),b=Object(m.a)(d,2),f=b[0],h=b[1],O=Ue();Object(u.useEffect)((function(){j(t)}),[t]),Object(u.useEffect)((function(){h(c)}),[c]);var x=function(e){h(e),a&&a(e)},g=function(e){r&&r(e)},v=function(e,n){if(i){var c=t.filter((function(t,n){return n!==e})),a=[].concat(Object(G.a)(c.slice(0,n)),[t[e]],Object(G.a)(c.slice(n)));j(a),i(a)}};return Object(p.jsx)(D.a,{container:!0,direction:"column",alignItems:"center",spacing:2,className:O.root,children:l.map((function(e,t){return Object(p.jsx)(at,{challenge:e,index:t,selected:(null===f||void 0===f?void 0:f.id)===e.id,compact:n,onChallengeMove:v,onClick:x,onDelete:g},e.id)}))})},Be=n(199),Ge=n(224),Ve=n(200),Je=n(201),Ke=n(112),Qe=n(103),Ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Es;switch(e){case c.SelectAnswer:return t===o.Es?"Selecciona la respuesta correcta":"Choose the correct answer";case c.TrueOrFalse:return t===o.Es?"Verdadero o falso":"True or false";case c.Match:return t===o.Es?"Une las opciones":"Match the options";case c.FillGaps:return t===o.Es?"Rellena los huecos":"Fill in the gaps";case c.Sort:return t===o.Es?"Ordena los elementos":"Order the elements";case c.Classify:return t===o.Es?"Clasifica los elementos":"Classify the elements";case c.FillTable:return t===o.Es?"Completa la tabla":"Complete the table";case c.TheOddOne:return t===o.Es?"Encuentra el que sobra":"Find the odd one";case c.Crossword:return t===o.Es?"Crucigrama":"Crossword";default:return t===o.Es?"Sin definir":"Undefined"}},$e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(p.jsx)(U.a,{fontSize:t,style:n,children:e===c.SelectAnswer?"widgets":e===c.TrueOrFalse?"check":e===c.FillGaps?"space_bar":e===c.Match?"shuffle":e===c.Sort?"swap_vert":e===c.Classify?"category":e===c.FillTable?"grid_on":e===c.TheOddOne?"touch_app":e===c.Crossword?"font_download":""})},Xe=function(e){var t={timeLimit:30,questionFontSize:28};switch(e){case c.SelectAnswer:return Object(_.a)(Object(_.a)({},t),{},{answerFontSize:22,pictureCount:1,pictureLabel:!1,multiselect:!1});case c.TrueOrFalse:return Object(_.a)(Object(_.a)({},t),{},{pictureCount:1,pictureLabel:!1});case c.Match:return Object(_.a)(Object(_.a)({},t),{},{answerFontSize:22,pairsCount:4});case c.FillGaps:return Object(_.a)(Object(_.a)({},t),{},{textFontSize:18,fillMethod:r.Writing});case c.Sort:return Object(_.a)(Object(_.a)({},t),{},{itemsFontSize:18,itemCount:5,elementsDirection:a.Horizontal});case c.Classify:return Object(_.a)(Object(_.a)({},t),{},{itemsFontSize:18,groupCount:3});case c.FillTable:return Object(_.a)(Object(_.a)({},t),{},{itemsFontSize:18,rowCount:3,columnCount:3,firstRowFixed:!1,firstColumnFixed:!1});case c.TheOddOne:return Object(_.a)(Object(_.a)({},t),{},{answerFontSize:15,seriesCount:3,seriesLength:4});default:return t}},Ze=function(e){return e.replace(/\./g," .").replace(/,/g," ,").replace(/;/g," ;").replace(/:/g," :").split(" ")},et=function(e){return e.join(" ").replace(/ \./g,".").replace(/ ,/g,",").replace(/ ;/g,";").replace(/ :/g,":")},tt=function(e,t,n,c){var i=e,a=t;return n||(i=i.toLowerCase(),a=a.toLowerCase()),c||(i=i.replace(/\xc1/g,"A").replace(/\xc9/g,"E").replace(/\xcd/g,"I").replace(/\xd3/g,"O").replace(/\xda/g,"U").replace(/\xe1/g,"a").replace(/\xe9/g,"e").replace(/\xed/g,"i").replace(/\xf3/g,"o").replace(/\xfa/g,"u"),a=a.replace(/\xc1/g,"A").replace(/\xc9/g,"E").replace(/\xcd/g,"I").replace(/\xd3/g,"O").replace(/\xda/g,"U").replace(/\xe1/g,"a").replace(/\xe9/g,"e").replace(/\xed/g,"i").replace(/\xf3/g,"o").replace(/\xfa/g,"u")),i===a},nt=function(e){var t=[];null!=(null===e||void 0===e?void 0:e.id)&&null!=(null===e||void 0===e?void 0:e.type)||t.push("Datos internos incorrectos");var n=function(e,t){var n=[];switch((null==(null===t||void 0===t?void 0:t.timeLimit)||(null===t||void 0===t?void 0:t.timeLimit)<=0)&&n.push("El tiempo l\xedmite debe ser mayor de 0"),(null==(null===t||void 0===t?void 0:t.questionFontSize)||(null===t||void 0===t?void 0:t.questionFontSize)<=0)&&n.push("El tama\xf1o de fuente del titulo debe ser mayor de 0"),e){case c.SelectAnswer:var i=t;(null==(null===i||void 0===i?void 0:i.pictureCount)||(null===i||void 0===i?void 0:i.pictureCount)<=0)&&n.push("El n\xfamero de im\xe1genes debe ser mayor de 0"),null==(null===i||void 0===i?void 0:i.pictureLabel)&&n.push("Error en indicador de etiquetado de im\xe1genes"),null==(null===i||void 0===i?void 0:i.multiselect)&&n.push("Error en indicador de seleccion m\xfaltiple");break;case c.TrueOrFalse:case c.FillGaps:case c.Match:case c.Sort:case c.Classify:case c.FillTable:case c.Crossword:}return{valid:0===n.length,errorMessage:n}}(null===e||void 0===e?void 0:e.type,null===e||void 0===e?void 0:e.config);switch(n.valid||(t=[].concat(Object(G.a)(t),Object(G.a)(n.errorMessage))),null!=(null===e||void 0===e?void 0:e.question)&&""!==(null===e||void 0===e?void 0:e.question)||t.push("Se debe rellenar el enunciado / pregunta"),e.type){case c.SelectAnswer:var i=e;i.config.pictureCount>1&&i.pictures.some((function(e){return e.type===l.None}))&&t.push("Hay im\xe1genes vac\xedas"),i.answers.reduce((function(e,t){return e&&null!=t.text&&""!==t.text}),!0)||t.push("Hay alguna respuesta vac\xeda"),i.answers.some((function(e){return e.valid}))||t.push("Debe marcarse al menos una respuesta como v\xe1lida");break;case c.TrueOrFalse:break;case c.FillGaps:var a=e;a.sentences.reduce((function(e,t){return e&&null!=t&&""!==t.text}),!0)||t.push("Hay elementos sin texto"),0===a.sentences.length&&t.push("Debe haber al menos una frase"),a.sentences.reduce((function(e,t){return e&&null!=t&&t.hiddenExpressions.length>0}),!0)||t.push("Hay frases sin palabras ocultas");break;case c.Match:e.pairs.reduce((function(e,t){return e&&null!=t.source&&""!==t.source&&null!=t.destination&&""!==t.destination}),!0)||t.push("Hay elementos sin texto");break;case c.Sort:e.items.reduce((function(e,t){return e&&null!=t&&""!==t}),!0)||t.push("Hay elementos sin texto");break;case c.Classify:e.groups.reduce((function(e,t){return e&&null!=t.name&&""!==t.name}),!0)||t.push("Todos los grupos deben tener un t\xedtulo");break;case c.FillTable:var r=e;r.items.reduce((function(e,t,n){return e&&t.reduce((function(e,t,c){return e&&(r.config.firstRowFixed&&0===n&&r.config.firstColumnFixed&&0===c||""!==t.text)}),!0)}),!0)||t.push("Todas las celdas deben estar rellenas");break;case c.TheOddOne:var o=e;o.series.reduce((function(e,t){return e&&t.elements.reduce((function(e,t){return e&&null!=t&&""!==t}),!0)}),!0)||t.push("Todos los elementos deben estar rellenos"),o.series.some((function(e){return-1===e.theOddOneIndex}))&&t.push("Todas las series deben tener un elemento que sobra marcado");break;case c.Crossword:}return{valid:0===t.length,errorMessage:t}},ct=function(e){return null!=e&&null!=e.id&&null!=e.name&&null!=e.challenges&&e.challenges.reduce((function(e,t){return e&&nt(t).valid}),!0)},it=Object(h.a)({fullWidth:{width:"100%"},fullHeight:{height:"100%"},headerContainer:{overflow:"hidden"},contentContainer:{overflow:"hidden"},actionContainer:{marginTop:"8px"},descriptionContainer:{width:"100%"},description:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tooltipRow:{fontSize:"12px"},statusContainer:{display:"flex",justifyContent:"space-between"}}),at=function(e){var t=e.challenge,n=e.index,c=e.selected,i=e.compact,a=e.onChallengeMove,r=e.onClick,o=e.onDelete,s=Object(u.useRef)(null),l=Object(u.useState)({valid:!0,errorMessage:[]}),j=Object(m.a)(l,2),d=j[0],b=j[1],f=it(),h=Object(oe.a)({accept:"challengeThumbnail",hover:function(e,t){if(s.current){var c=e.index,i=n;if(c!==i){var r=s.current.getBoundingClientRect(),o=(r.bottom-r.top)/2,l=t.getClientOffset().y-r.top;c<i&&l<o||c>i&&l>o||(a(c,i),e.index=i)}}}}),O=Object(m.a)(h,2)[1],x=Object(ke.a)({type:"challengeThumbnail",item:{type:"challengeThumbnail",challenge:t,index:n},collect:function(e){return{isDragging:e.isDragging()}}}),g=Object(m.a)(x,3),v=g[0].isDragging,C=g[1],y=g[2];Object(u.useEffect)((function(){y(Object(Qe.a)(),{captureDraggingState:!0})}),[]);var S=v?{opacity:5,backgroundColor:w.light}:{opacity:1};C(O(s));return Object(u.useEffect)((function(){b(nt(t))}),[t]),Object(p.jsx)(D.a,{item:!0,className:f.fullWidth,children:Object(p.jsxs)(M.a,{ref:s,style:Object(_.a)({},S),variant:c?"elevation":"outlined",elevation:10,className:f.fullWidth,children:[Object(p.jsxs)(He.a,{className:f.fullWidth,onMouseDown:function(){r&&r(t)},children:[Object(p.jsx)(Be.a,{classes:{root:f.headerContainer,content:f.contentContainer},avatar:i?$e(t.type,"small"):void 0,subheader:Object(p.jsx)(ne.a,{variant:"subtitle2",color:c?"secondary":"textPrimary",className:f.description,children:i?t.question:"#".concat(n+1," ").concat(Ye(t.type))}),action:i?Object(p.jsx)(D.a,{container:!0,alignItems:"center",className:f.actionContainer,children:d.valid?Object(p.jsx)(U.a,{color:"primary",fontSize:"small",children:"check"}):Object(p.jsx)(Ge.a,{arrow:!0,title:Object(p.jsx)(p.Fragment,{children:d.errorMessage.map((function(e,t){return Object(p.jsx)("li",{className:f.tooltipRow,children:e},"li_".concat(t))}))}),children:Object(p.jsx)(U.a,{color:"secondary",fontSize:"small",children:"priority_high"})})}):void 0}),!i&&Object(p.jsx)(Ve.a,{children:Object(p.jsx)(ne.a,{noWrap:!0,children:t.question})})]}),!i&&Object(p.jsxs)(Je.a,{className:f.statusContainer,children:[d.valid?Object(p.jsx)(re.a,{label:"completo",color:"primary",size:"small",icon:Object(p.jsx)(U.a,{fontSize:"small",children:"check"})}):Object(p.jsx)(Ge.a,{arrow:!0,title:Object(p.jsx)(p.Fragment,{children:d.errorMessage.map((function(e,t){return Object(p.jsx)("li",{className:f.tooltipRow,children:e},"li_".concat(t))}))}),children:Object(p.jsx)(re.a,{label:"error",color:"secondary",size:"small",style:{color:"#ffffff"},icon:Object(p.jsx)(U.a,{fontSize:"small",children:"priority_high"})})}),Object(p.jsx)(Ke.a,{onClick:function(){o&&o(t)},children:Object(p.jsx)(U.a,{children:"delete"})})]})]})})},rt=n(202),ot=n(203),st=n(109),lt=n(232),ut=n(204),jt=Object(h.a)((function(e){return{fullHeight:{height:"100%"},fullWidth:{width:"100%"},listContainer:{paddingRight:"10px",height:"100%",width:"100%",overflow:"hidden"},challengesContainer:{height:"calc(100% - 50px)",width:"100%",overflowY:"auto",overflowX:"hidden",listStyle:"none","&::-webkit-scrollbar":{width:"0.2em"},"&::-webkit-scrollbar-track":{boxShadow:"inset 0 0 6px rgba(255,0,0,0.00)",webkitBoxShadow:"inset 0 0 6px rgba(255,0,0,0.00)"},"&::-webkit-scrollbar-thumb":{backgroundColor:w.light,outline:"1px solid slategrey"}},challengeSelector:{flexGrow:1}}})),dt=[{type:c.SelectAnswer,disabled:!1},{type:c.TrueOrFalse,disabled:!1},{type:c.FillGaps,disabled:!1},{type:c.Match,disabled:!1},{type:c.Sort,disabled:!0},{type:c.Classify,disabled:!1},{type:c.FillTable,disabled:!1},{type:c.TheOddOne,disabled:!1},{type:c.Crossword,disabled:!0}],bt=function(e){var t=e.projectId,n=e.testId,i=W(),a=i.projects,r=i.setProjects,s=Object(u.useState)({id:Object(Ee.a)(),name:"Nuevo cuestionario",description:"",language:o.Es,challenges:[]}),j=Object(m.a)(s,2),d=j[0],b=j[1],f=Object(u.useState)(!1),h=Object(m.a)(f,2),O=h[0],x=h[1],g=Object(u.useState)(),v=Object(m.a)(g,2),C=v[0],y=v[1],w=Object(u.useState)(null),S=Object(m.a)(w,2),k=S[0],I=S[1],N=Object(u.useState)(),E=Object(m.a)(N,2),R=E[0],T=E[1],P=Object(u.useState)(!1),F=Object(m.a)(P,2),z=F[0],A=F[1],H=jt();Object(u.useEffect)((function(){var e=a.find((function(e){return e.id===t}));if(null!=e){var c=e.tests.find((function(e){return e.id===n}));null!=c&&(b(c),c.challenges.length>0&&y(null==C?c.challenges[0]:Object(_.a)({},C)))}}),[a,t,n]);var M=Object(u.useCallback)((function(e){var c=a.map((function(c){if(c.id!==t)return Object(_.a)({},c);var i=c.tests.map((function(t){return t.id!==n?Object(_.a)({},t):Object(_.a)(Object(_.a)({},t),{},{challenges:e})}));return Object(_.a)(Object(_.a)({},c),{},{tests:Object(G.a)(i)})}));r(c)}),[a]),L=function(e){var i=function(e){var t={id:Object(Ee.a)(),type:e,question:"",config:Xe(e)};switch(e){case c.SelectAnswer:return Object(_.a)(Object(_.a)({},t),{},{pictures:[{type:l.None,data:""}],answers:[{text:"",valid:!1},{text:"",valid:!1},{text:"",valid:!1},{text:"",valid:!1}]});case c.TrueOrFalse:return Object(_.a)(Object(_.a)({},t),{},{pictures:[{type:l.None,data:""}],answer:!0});case c.Match:return Object(_.a)(Object(_.a)({},t),{},{pairs:[{source:"",destination:""},{source:"",destination:""},{source:"",destination:""},{source:"",destination:""}]});case c.FillGaps:return Object(_.a)(Object(_.a)({},t),{},{sentences:[]});case c.Sort:return Object(_.a)(Object(_.a)({},t),{},{items:["","","","",""]});case c.Classify:return Object(_.a)(Object(_.a)({},t),{},{groups:[{name:"",items:[]},{name:"",items:[]},{name:"",items:[]}]});case c.FillTable:return Object(_.a)(Object(_.a)({},t),{},{items:[[{text:"",hidden:!1},{text:"",hidden:!1},{text:"",hidden:!1}],[{text:"",hidden:!1},{text:"",hidden:!1},{text:"",hidden:!1}],[{text:"",hidden:!1},{text:"",hidden:!1},{text:"",hidden:!1}]]});case c.TheOddOne:return Object(_.a)(Object(_.a)({},t),{},{series:[{elements:["","","",""],theOddOneIndex:-1},{elements:["","","",""],theOddOneIndex:-1},{elements:["","","",""],theOddOneIndex:-1}]});default:return t}}(e),o=a.map((function(e){if(e.id!==t)return Object(_.a)({},e);var c=e.tests.map((function(e){if(e.id!==n)return Object(_.a)({},e);var t=null!=C?d.challenges.findIndex((function(e){return e.id===(null===C||void 0===C?void 0:C.id)})):0;return Object(_.a)(Object(_.a)({},e),{},{challenges:[].concat(Object(G.a)(e.challenges.slice(0,t+1)),[i],Object(G.a)(e.challenges.slice(t+1)))})}));return Object(_.a)(Object(_.a)({},e),{},{tests:Object(G.a)(c)})}));r(o),y(i),I(null)};return Object(p.jsxs)(u.Fragment,{children:[Object(p.jsx)(Ce,{open:z,text:"\xbfSeguro que deseas eliminar la pregunta?",width:"xs",onConfirm:function(){var e=a.map((function(e){if(e.id!==t)return e;var c=e.tests.map((function(e){if(e.id!==n)return e;(null===R||void 0===R?void 0:R.id)===(null===C||void 0===C?void 0:C.id)&&y(e.challenges.find((function(e){return e.id!==(null===R||void 0===R?void 0:R.id)})));var t=e.challenges.filter((function(e){return e.id!==(null===R||void 0===R?void 0:R.id)}));return Object(_.a)(Object(_.a)({},e),{},{challenges:Object(G.a)(t)})}));return Object(_.a)(Object(_.a)({},e),{},{tests:Object(G.a)(c)})}));r(e),A(!1)},onRefuse:function(){A(!1)}}),Object(p.jsxs)(D.a,{container:!0,className:H.fullHeight,children:[Object(p.jsx)(D.a,{item:!0,xs:2,className:H.listContainer,children:Object(p.jsxs)(D.a,{container:!0,direction:"column",className:H.fullHeight,children:[Object(p.jsx)(D.a,{item:!0,className:H.fullWidth,children:Object(p.jsxs)(D.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Preguntas"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsxs)(D.a,{container:!0,justify:"flex-end",alignItems:"center",children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsxs)(lt.a,{size:"small",value:O,exclusive:!0,onChange:function(e,t){x(t)},children:[Object(p.jsx)(ut.a,{value:!1,children:Object(p.jsx)(U.a,{children:"crop_din"})}),Object(p.jsx)(ut.a,{value:!0,children:Object(p.jsx)(U.a,{children:"reorder"})})]})}),Object(p.jsxs)(D.a,{item:!0,children:[Object(p.jsx)(Ke.a,{onClick:function(e){I(e.currentTarget)},children:Object(p.jsx)(U.a,{color:"primary",children:"add_circle"})}),Object(p.jsx)(st.a,{id:"new-challenge-menu",anchorEl:k,keepMounted:!0,open:Boolean(k),onClose:function(){I(null)},children:dt.map((function(e){return t=e.type,n=e.disabled,Object(p.jsxs)(rt.a,{disabled:n,onClick:function(){L(t)},children:[Object(p.jsx)(ot.a,{children:$e(t,"large")}),Object(p.jsx)(ne.a,{variant:"button",children:Ye(t)})]},"item_".concat(t));var t,n}))})]})]})})]})}),Object(p.jsx)(D.a,{item:!0,className:H.challengesContainer,children:Object(p.jsx)(K.a,{backend:Q.a,children:Object(p.jsx)(qe,{challenges:d.challenges,compactList:O,selected:C,onChallengeReorder:M,onSelect:function(e){y(e)},onDelete:function(e){T(e),A(!0)}})})})]})}),Object(p.jsx)(D.a,{item:!0,xs:10,children:C&&Object(p.jsx)(Le,{challenge:C,onChallengeChange:function(e){var c=a.map((function(c){if(c.id!==t)return c;var i=c.tests.map((function(t){if(t.id!==n)return Object(_.a)({},t);var c=t.challenges.map((function(t){return t.id!==e.id?Object(_.a)({},t):Object(_.a)({},e)}));return Object(_.a)(Object(_.a)({},t),{},{challenges:Object(G.a)(c)})}));return Object(_.a)(Object(_.a)({},c),{},{tests:Object(G.a)(i)})}));r(c),y(Object(_.a)({},e))}})})]})]})},ft=Object(h.a)((function(e){return{fullHeight:{height:"100%"}}})),ht=function(e){var t=e.challenge,n=e.options,a=e.onSuccess,r=e.onError,o=ft(),s=function(){a&&a()},l=function(){r&&r()};return Object(p.jsx)(D.a,{container:!0,className:o.fullHeight,children:Object(p.jsxs)(D.a,{item:!0,xs:12,children:[(null===t||void 0===t?void 0:t.type)===c.SelectAnswer&&Object(p.jsx)(kn,{mode:i.Play,challenge:t,options:n,onSuccess:s,onError:l}),(null===t||void 0===t?void 0:t.type)===c.TrueOrFalse&&Object(p.jsx)(Vn,{mode:i.Play,challenge:t,options:n,onSuccess:s,onError:l}),(null===t||void 0===t?void 0:t.type)===c.FillGaps&&Object(p.jsx)(Pt,{mode:i.Play,challenge:t,options:n,onSuccess:s,onError:l}),(null===t||void 0===t?void 0:t.type)===c.Match&&Object(p.jsx)(mn,{mode:i.Play,challenge:t,options:n,onSuccess:s,onError:l}),(null===t||void 0===t?void 0:t.type)===c.Classify&&Object(p.jsx)(te,{mode:i.Play,challenge:t,options:n,onSuccess:s,onError:l}),(null===t||void 0===t?void 0:t.type)===c.FillTable&&Object(p.jsx)(Gt,{mode:i.Play,challenge:t,options:n,onSuccess:s,onError:l}),(null===t||void 0===t?void 0:t.type)===c.TheOddOne&&Object(p.jsx)(Wn,{mode:i.Play,challenge:t,options:n,onSuccess:s,onError:l})]})})},Ot=n(205),mt=Object(h.a)((function(e){return{root:{width:"100%",height:"100%",border:"solid 1px",backgroundColor:e.palette.primary.light}}})),pt=function(e){var t=e.challengeType,n=e.challengeNumber,c=e.challengeTotalCount,i=e.language,a=e.delay,r=e.onEnd,s=mt();return Object(u.useEffect)((function(){setTimeout((function(){r()}),1e3*a)}),[]),Object(p.jsxs)(D.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,className:s.root,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h2",children:Ye(t,i)})}),Object(p.jsx)(D.a,{item:!0,style:{width:"100%"},children:Object(p.jsx)(Ot.a,{color:"secondary"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h4",children:i===o.En?"Question ".concat(n.toString()," of ").concat(c.toString()):"Pregunta ".concat(n.toString()," de ").concat(c.toString())})})]})},xt=Object(h.a)((function(e){return{root:{height:"100%",border:"solid 1px"},timeline:{transform:"rotate(-90deg)"},timelineContentContainer:{textAlign:"left",padding:"0px"},timelineContent:{transform:"rotate(90deg)",padding:"0px 5px"},timelineIcon:{transform:"rotate(90deg)"}}})),gt=function(e){var t=e.test,n=e.results,c=e.onBackHome,i=e.onRepeatTest,a=xt();return Object(p.jsxs)(D.a,{container:!0,direction:"column",className:a.root,justify:"center",alignItems:"center",spacing:4,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h2",children:t.name})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h3",children:t.description})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h4",children:"".concat(t.language===o.En?"Correct answers":"Respuestas correctas",": ").concat(n.filter((function(e){return e})).length,"/").concat(n.length)})}),Object(p.jsxs)(D.a,{item:!0,container:!0,justify:"center",alignItems:"center",spacing:4,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsxs)(ve.a,{variant:"contained",color:"primary",onClick:c,children:[Object(p.jsx)(U.a,{children:"navigate_before"}),"\xa0",t.language===o.En?"Go back to home":"Volver a la pantalla principal"]})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsxs)(ve.a,{variant:"contained",color:"primary",onClick:i,children:[Object(p.jsx)(U.a,{children:"replay"}),"\xa0",t.language===o.En?"repeat test":"Repetir cuestionario"]})})]})]})},vt=n(190),Ct=n(142),yt=n(206),wt=n(207),St=Object(h.a)((function(){return{dialogContainer:{padding:"20px"}}})),kt=function(e){var t=e.open,n=e.text,c=e.candidates,i=e.onAccept,a=e.onCancel,r=Object(u.useState)(c),o=Object(m.a)(r,2),s=o[0],l=o[1],j=Object(u.useRef)({}),d=St();Object(u.useEffect)((function(){null!=c&&l(c)}),[c]);return Object(p.jsx)(pe.a,{open:t,fullWidth:!0,maxWidth:"sm",children:Object(p.jsx)(he.a,{className:d.dialogContainer,children:Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(ne.a,{variant:"h6",children:'Otros textos validos para "'.concat(n,'"')})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(vt.a,{children:s.map((function(e,t){return Object(p.jsxs)(Ct.a,{children:[Object(p.jsx)(yt.a,{primary:e}),Object(p.jsx)(wt.a,{children:Object(p.jsx)(Ke.a,{edge:"end",onClick:function(){!function(e){l(s.filter((function(t,n){return n!==e})))}(t)},children:Object(p.jsx)(U.a,{children:"delete"})})})]})}))})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(ce.a,{inputRef:j,variant:"outlined",style:{width:"100%"},label:"Nuevo candidato",onKeyPress:function(e){"Enter"===e.code&&""!==j.current.value&&(l([].concat(Object(G.a)(s),[j.current.value])),j.current.value="")}})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsxs)(D.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{variant:"contained",color:"primary",onClick:function(){i(s)},children:"Aceptar"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{color:"primary",onClick:function(){a()},children:"Cancelar"})})]})})]})})})},It=function(e){var t=e.value,n=e.style,c=e.fontSize,i=e.onDrop,a=Object(oe.a)({accept:"dnd",drop:function(e){i(e.name)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),r=Object(m.a)(a,2)[1];return Object(p.jsx)("div",{ref:r,style:Object(_.a)({width:"150px",height:"50px",lineHeight:"50px",textAlign:"center",borderBottom:"solid 1px ".concat(w.main),color:w.main,fontSize:"".concat(c||50,"px")},n),children:t})},Nt=Object(h.a)({fullHeight:{height:"100%"}}),Et=function(e){var t=e.challenge,n=e.onChallengeChange,c=Nt();return Object(p.jsxs)(D.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:10,className:c.fullHeight,children:Object(p.jsx)(Pt,{mode:i.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(p.jsx)(D.a,{item:!0,xs:2,className:c.fullHeight,children:Object(p.jsx)(_t,{config:t.config,onConfigChange:function(e){var c=Object(_.a)(Object(_.a)({},t),{},{config:e});n(c)}})})]})},Rt=Object(h.a)((function(e){return{fullHeight:{height:"100%"},fullWidth:{width:"100%"},optionsContainer:{border:"solid 1px gray",backgroundColor:"#ffffff",minHeight:"60px"}}})),Tt=function(e,t){var n=[];return e.forEach((function(e,t){e.hiddenExpressions.forEach((function(c,i){n.push({sentenceText:e.text,sentenceIdx:t,hiddenExpression:c,hiddenExpressionIdx:i})}))})),t===i.Play&&(n=n.sort((function(){return Math.random()-.5}))),n},Pt=function(e){var t=e.mode,n=e.challenge,c=e.options,a=e.onChallengeChange,o=e.onSuccess,s=e.onError,l=Object(u.useState)(!1),j=Object(m.a)(l,2),d=j[0],b=j[1],f=Object(u.useState)(!1),h=Object(m.a)(f,2),O=h[0],x=h[1],g=Object(u.useRef)({}),v=Object(u.useState)(function(e){return e.sentences.map((function(e){return[]}))}(n)),C=Object(m.a)(v,2),y=C[0],w=C[1],S=Object(u.useState)(!1),k=Object(m.a)(S,2),I=k[0],N=k[1],E=Object(u.useState)(),R=Object(m.a)(E,2),T=R[0],P=R[1],F=Object(u.useState)(Tt(n.sentences,t)),z=Object(m.a)(F,2),A=z[0],H=z[1],W=Object(Y.a)($),M=Object(m.a)(W,1)[0],L=Object(Y.a)(X),q=Object(m.a)(L,1)[0],V=Rt();Object(u.useEffect)((function(){H(Tt(n.sentences,t))}),[n.sentences]);var J=function(e){b(!0),x(!0),e?M():q(),setTimeout((function(){e?o&&o():s&&s()}),2e3)},Z=function(e,t){return et(Ze(e).slice(t.initPosition,t.initPosition+t.wordCount))};return Object(p.jsx)(B,{mode:t,challenge:n,options:c,onChallengeChange:function(e){a&&a(Object(_.a)(Object(_.a)({},n),e))},stopTime:d,onTimeUp:function(){J(!1)},showCheck:!0,disabledCheck:t===i.Design||!n.sentences.reduce((function(e,t,n){return e&&t.hiddenExpressions.length===y[n].length&&y[n].every((function(e){return null!=e.value&&""!==e.value}))}),!0),onCheckClick:function(){var e=n.sentences.reduce((function(e,t,c){var i=Ze(t.text),a=t.hiddenExpressions.reduce((function(e,t,a){var r=y[c].find((function(e){return e.hiddenIdx===a}));return null!=r&&e&&(tt(et(i.slice(t.initPosition,t.initPosition+t.wordCount)),r.value,n.config.checkCapitalLetters,n.config.checkAccentMarks)||t.alternatives.some((function(e){return tt(e,r.value,n.config.checkCapitalLetters,n.config.checkAccentMarks)})))}),!0);return e&&a}),!0);J(e)},centralComponent:Object(p.jsxs)(D.a,{item:!0,xs:12,className:V.fullHeight,children:[T&&Object(p.jsx)(kt,{open:I,text:Z(n.sentences[T[0]].text,n.sentences[T[0]].hiddenExpressions[T[1]]),candidates:n.sentences[T[0]].hiddenExpressions[T[1]].alternatives,onAccept:function(e){if(a&&T){var t=n.sentences.map((function(t,n){return n!==T[0]?t:Object(_.a)(Object(_.a)({},t),{},{hiddenExpressions:t.hiddenExpressions.map((function(t,n){return n!==T[1]?t:Object(_.a)(Object(_.a)({},t),{},{alternatives:Object(G.a)(e)})}))})}));a(Object(_.a)(Object(_.a)({},n),{},{sentences:t}))}N(!1)},onCancel:function(){N(!1)}}),Object(p.jsx)(K.a,{backend:Q.a,children:Object(p.jsxs)(D.a,{container:!0,spacing:2,direction:"column",className:V.fullHeight,children:[(t===i.Design||n.config.fillMethod===r.Dragging)&&Object(p.jsx)(D.a,{item:!0,className:V.optionsContainer,children:Object(p.jsx)(D.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center",children:A.map((function(e){return!function(e){var t=Z(e.sentenceText,e.hiddenExpression);return y.some((function(e){return e.some((function(e){return e.value===t}))}))}(e)&&Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Ne,{name:Z(e.sentenceText,e.hiddenExpression),style:{fontSize:n.config.textFontSize},iconButton:t===i.Design?Object(p.jsx)(Ke.a,{size:"small",onClick:function(){var t,n;t=e.sentenceIdx,n=e.hiddenExpressionIdx,P([t,n]),N(!0)},children:Object(p.jsx)(U.a,{children:"add_circle"})}):void 0},"dragable_".concat(e.sentenceIdx,"_").concat(e.hiddenExpression.initPosition))},"gridItem_".concat(e.sentenceIdx,"_").concat(e.hiddenExpression.initPosition))}))})}),Object(p.jsx)(D.a,{item:!0,xs:!0,children:Object(p.jsx)(D.a,{container:!0,direction:"column",justify:"space-around",className:"".concat(V.fullWidth," ").concat(V.fullHeight),children:n.sentences.map((function(e,c){return Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Lt,{mode:t,sentence:e,fillMethod:n.config.fillMethod,checkCapitalLetters:n.config.checkCapitalLetters,checkAccentMarks:n.config.checkAccentMarks,showResults:O,fontSize:n.config.textFontSize,onSentenceChange:function(e){return function(e,t){if(a){var c=n.sentences.map((function(n,c){return c===t?e:n}));a(Object(_.a)(Object(_.a)({},n),{},{sentences:c}))}}(e,c)},onSentenceRemove:function(){!function(e){if(a){var t=n.sentences.filter((function(t,n){return n!==e}));a(Object(_.a)(Object(_.a)({},n),{},{sentences:t})),w(y.filter((function(t,n){return n!==e})))}}(c)},onAnswersChange:function(e){!function(e,t){var n=y.map((function(n,c){return c===e?Object(G.a)(t):Object(G.a)(n)}));w(n)}(c,e)}})},"sentence_".concat(c))}))})}),t===i.Design&&Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:g,variant:"outlined",style:{width:"100%"},InputProps:{style:{fontSize:n.config.textFontSize,color:"#000000"}},label:"Nueva frase",onKeyPress:function(e){"Enter"===e.code&&""!==g.current.value&&function(){if(a){var e={text:g.current.value,hiddenExpressions:[]};a(Object(_.a)(Object(_.a)({},n),{},{sentences:[].concat(Object(G.a)(n.sentences),[e])})),w([].concat(Object(G.a)(y),[[]]))}g.current.value=""}()}})})]})})]})})},Ft=n(187),zt=n(228),At=n(219),Dt=n(208),Ht=n(209),Wt=Object(h.a)({fullWidth:{width:"100%"}}),_t=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),a=i[0],o=i[1],s=Object(u.useRef)({}),l=Object(u.useRef)({}),j=Object(u.useRef)({}),d=Object(u.useRef)({}),b=Wt();Object(u.useEffect)((function(){o(t)}),[t]);var h=function(e,t){var c=Object(_.a)(Object(_.a)({},a),{},Object(f.a)({},e,t));o(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(je,{config:t,onConfigChange:function(e){var t=Object(_.a)(Object(_.a)({},a),e);o(t),n&&n(t)}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:s,type:"number",label:"Tama\xf1o de letra de los elementos",inputProps:{min:1},value:a.textFontSize,color:"secondary",className:b.fullWidth,onInput:function(){h("textFontSize",parseInt(s.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsxs)(Ft.a,{className:b.fullWidth,children:[Object(p.jsx)(zt.a,{children:"Modo de rellenado"}),Object(p.jsxs)(At.a,{inputRef:l,label:"Modo de rellenado",value:a.fillMethod,color:"secondary",className:b.fullWidth,onChange:function(e){h("fillMethod",e.target.value)},children:[Object(p.jsx)(rt.a,{value:r.Writing,children:"Escribiendo"}),Object(p.jsx)(rt.a,{value:r.Dragging,children:"Arrastrando"})]})]})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:j,name:"checkMultiselect",checked:a.checkCapitalLetters,color:"secondary",onChange:function(){h("checkCapitalLetters",j.current.checked)}}),label:"Comprobar may\xfasculas/min\xfasculas"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:d,name:"checkAccentMarks",checked:a.checkAccentMarks,color:"secondary",onChange:function(){h("checkAccentMarks",d.current.checked)}}),label:"Comprobar tildes"})})]})},Mt=Object(h.a)((function(e){return{word:{padding:"2px"},selectableWord:{padding:"2px","& :hover":{backgroundColor:e.palette.primary.light,color:"#ffffff",cursor:"pointer",borderRadius:"10px"}},selected:{backgroundColor:e.palette.primary.main,borderRadius:"10px",color:"#ffffff"}}})),Lt=function(e){var t=e.mode,n=e.sentence,c=e.fillMethod,a=e.checkCapitalLetters,o=e.checkAccentMarks,s=e.showResults,l=e.fontSize,j=e.onSentenceChange,d=e.onSentenceRemove,b=e.onAnswersChange,f=Object(u.useState)(function(e){var t=[],n=0,c=Ze(e.text);return e.hiddenExpressions.forEach((function(e,i){e.initPosition>n&&t.push({type:"text",hiddenIdx:-1,value:et(c.slice(n,e.initPosition)),answer:""}),t.push({type:"hidden",hiddenIdx:i,value:et(c.slice(e.initPosition,e.initPosition+e.wordCount)),answer:""}),n=e.initPosition+e.wordCount})),n<c.length-1&&t.push({type:"text",hiddenIdx:-1,value:et(c.slice(n)),answer:""}),t}(n)),h=Object(m.a)(f,2),O=h[0],x=h[1],g=Mt(),v=function(e,t){var n=O.map((function(n,c){return Object(_.a)(Object(_.a)({},n),{},{answer:c===e?t:n.answer})}));x(n),b(n.filter((function(e){return"hidden"===e.type})).map((function(e){return{hiddenIdx:e.hiddenIdx,value:e.answer}})))},C=function(e,t){return s?e.some((function(e){return tt(e,t,a,o)}))?{color:"#4caf50"}:{color:"#f44336"}:{}};return Object(p.jsxs)(D.a,{container:!0,alignItems:"center",spacing:1,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(U.a,{fontSize:"small",color:"secondary",children:"navigate_next"})}),t===i.Design&&Ze(n.text).map((function(e,t){return Object(p.jsx)(D.a,{item:!0,className:"".concat(g.selectableWord," ").concat((c=t,n.hiddenExpressions.some((function(e){return c>=e.initPosition&&c<=e.initPosition+e.wordCount-1}))?g.selected:"")),onClick:function(){!function(e){var t=[];0===n.hiddenExpressions.length&&t.push({initPosition:e,wordCount:1,alternatives:[]}),n.hiddenExpressions.some((function(c,i){var a=-1;if(0===i&&e<c.initPosition-1)return t=[{initPosition:e,wordCount:1,alternatives:[]}].concat(Object(G.a)(n.hiddenExpressions)),!0;if(e===c.initPosition-1)t.push({initPosition:e,wordCount:c.wordCount+1,alternatives:Object(G.a)(c.alternatives)}),a=i;else if(e===c.initPosition)1===c.wordCount||t.push({initPosition:e+1,wordCount:c.wordCount-1,alternatives:Object(G.a)(c.alternatives)}),a=i;else if(e>c.initPosition&&e<c.initPosition+c.wordCount-1)t=[].concat(Object(G.a)(t),[{initPosition:c.initPosition,wordCount:e-c.initPosition,alternatives:[]},{initPosition:e+1,wordCount:c.initPosition+c.wordCount-e-1,alternatives:[]}]),a=i;else if(e===c.initPosition+c.wordCount-1)1===c.wordCount||t.push({initPosition:c.initPosition,wordCount:c.wordCount-1,alternatives:Object(G.a)(c.alternatives)}),a=i;else if(i<n.hiddenExpressions.length-1&&e>c.initPosition+c.wordCount&&e<n.hiddenExpressions[i+1].initPosition-1)t=[].concat(Object(G.a)(t),[Object(_.a)({},c),{initPosition:e,wordCount:1,alternatives:[]}]),a=i;else if(i<n.hiddenExpressions.length-1&&e===c.initPosition+c.wordCount&&e===n.hiddenExpressions[i+1].initPosition-1)t.push({initPosition:c.initPosition,wordCount:c.wordCount+n.hiddenExpressions[i+1].wordCount+1,alternatives:[]}),a=i+1;else if(e===c.initPosition+c.wordCount)t.push({initPosition:c.initPosition,wordCount:c.wordCount+1,alternatives:Object(G.a)(c.alternatives)}),a=i;else if(i===n.hiddenExpressions.length-1)return t=[].concat(Object(G.a)(t),[Object(_.a)({},c),{initPosition:e,wordCount:1,alternatives:[]}]),!0;return-1!==a?(i<n.hiddenExpressions.length-1&&(t=[].concat(Object(G.a)(t),Object(G.a)(n.hiddenExpressions.slice(a+1)))),!0):(t.push(Object(_.a)({},c)),!1)})),j(Object(_.a)(Object(_.a)({},n),{},{hiddenExpressions:t}))}(t)},children:Object(p.jsx)(ne.a,{style:{fontSize:"".concat(l||50,"px")},children:e})},"word_".concat(t));var c})),t===i.Design&&Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Ke.a,{size:"small",onClick:function(){d&&d()},children:Object(p.jsx)(U.a,{children:"delete"})})}),t===i.Play&&O.map((function(e,t){return"text"===e.type?e.value.split(" ").map((function(e){return Object(p.jsx)(D.a,{item:!0,className:g.word,children:Object(p.jsx)(ne.a,{style:{fontSize:"".concat(l||50,"px")},children:e})},"part_".concat(t))})):Object(p.jsx)(D.a,{item:!0,children:c===r.Writing?Object(p.jsx)(ce.a,{value:e.answer,color:"primary",inputProps:{style:Object(_.a)({fontSize:"".concat(l||50,"px"),textAlign:"center",color:w.main},C([e.value].concat(Object(G.a)(n.hiddenExpressions[e.hiddenIdx].alternatives)),e.answer))},onInput:function(e){v(t,e.target.value)}},"input_".concat(t)):Object(p.jsx)(It,{value:e.answer,style:C([e.value].concat(Object(G.a)(n.hiddenExpressions[e.hiddenIdx].alternatives)),e.answer),fontSize:l,onDrop:function(e){v(t,e)}},"input_".concat(t))},"part_".concat(t))}))]})},Ut=Object(h.a)({fullHeight:{height:"100%"}}),qt=function(e){var t=e.challenge,n=e.onChallengeChange,c=Ut();return Object(p.jsxs)(D.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:10,className:c.fullHeight,children:Object(p.jsx)(Gt,{mode:i.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(p.jsx)(D.a,{item:!0,xs:2,className:c.fullHeight,children:Object(p.jsx)(Jt,{config:t.config,onConfigChange:function(e){var c=function(e,n){var c=Object(G.a)(t.items);if(e>c.length){var i=Array.from(Array(c[0].length)).map((function(){return{text:"",hidden:!1}})),a=Array.from(Array(e-c.length)).map((function(){return Object(G.a)(i)}));c=[].concat(Object(G.a)(c),Object(G.a)(a))}else e<c.length&&(c=c.slice(0,e));if(n>c[0].length){var r=Array.from(Array(n-c[0].length)).map((function(){return{text:"",hidden:!1}}));c=c.map((function(e){return[].concat(Object(G.a)(e),Object(G.a)(r))}))}else n<c[0].length&&(c=c.map((function(e){return e.slice(0,n)})));return c}(e.rowCount,e.columnCount),i=Object(_.a)(Object(_.a)({},t),{},{items:c,config:e});n(i)}})})]})},Bt=Object(h.a)((function(e){return{cell:{height:"60px"}}})),Gt=function(e){var t=e.mode,n=e.challenge,c=e.options,a=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(u.useState)(function(e){return e.items.map((function(e){return e.map((function(e){return e.hidden?Object(_.a)(Object(_.a)({},e),{},{text:""}):Object(_.a)({},e)}))}))}(n)),l=Object(m.a)(s,2),j=l[0],d=l[1],b=Object(u.useState)(!1),f=Object(m.a)(b,2),h=f[0],O=f[1],x=Object(u.useState)(!1),g=Object(m.a)(x,2),v=g[0],C=g[1],y=Object(Y.a)($),w=Object(m.a)(y,1)[0],S=Object(Y.a)(X),k=Object(m.a)(S,1)[0],I=Bt(),N=function(e){O(!0),C(!0),e?w():k(),setTimeout((function(){e?r&&r():o&&o()}),2e3)};return Object(p.jsx)(B,{mode:t,challenge:n,options:c,onChallengeChange:function(e){a&&a(Object(_.a)(Object(_.a)({},n),e))},stopTime:h,onTimeUp:function(){N(!1)},showCheck:!0,disabledCheck:t===i.Design||!j.reduce((function(e,t,c){return e&&t.reduce((function(e,t,i){return e&&(n.config.firstRowFixed&&0===c&&n.config.firstColumnFixed&&0===i||""!==t.text)}),!0)}),!0),onCheckClick:function(){var e=j.reduce((function(e,t,c){return e&&t.reduce((function(e,t,i){return e&&(n.config.firstRowFixed&&0===c&&n.config.firstColumnFixed&&0===i||t.text===n.items[c][i].text)}),!0)}),!0);N(e)},centralComponent:Object(p.jsx)(D.a,{container:!0,alignItems:"center",style:{height:"100%"},children:Object(p.jsx)(D.a,{item:!0,xs:!0,children:Object(p.jsx)(D.a,{container:!0,direction:"column",children:(t===i.Design?n.items:j).map((function(e,c){return Object(p.jsx)(D.a,{item:!0,xs:!0,children:Object(p.jsx)(D.a,{container:!0,children:e.map((function(e,r){return Object(p.jsx)(D.a,{item:!0,xs:!0,className:I.cell,children:!(n.config.firstRowFixed&&n.config.firstColumnFixed&&0===c&&0===r)&&Object(p.jsx)(Qt,{mode:t,cell:e,fixed:n.config.firstRowFixed&&0===c||n.config.firstColumnFixed&&0===r,fontSize:n.config.itemsFontSize,showResults:v,success:(!n.config.firstRowFixed||0!==c)&&(!n.config.firstColumnFixed||0!==r)&&null!=n.items&&null!=n.items[c]&&null!=n.items[c][r]&&null!=j[c]&&null!=j[c][r]&&n.items[c][r].text===j[c][r].text,onCellChange:function(e){!function(e,c,r){var o=(t===i.Design?n.items:j).map((function(t,n){return n!==c?Object(G.a)(t):t.map((function(t,n){return n===r?Object(_.a)({},e):Object(_.a)({},t)}))}));t===i.Play?d(o):a&&a(Object(_.a)(Object(_.a)({},n),{},{items:o}))}(e,c,r)}})},"column_".concat(r))}))})},"row_".concat(c))}))})})})})},Vt=Object(h.a)({fullWidth:{width:"100%"}}),Jt=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),a=i[0],r=i[1],o=Object(u.useRef)({}),s=Object(u.useRef)({}),l=Object(u.useRef)({}),j=Object(u.useRef)({}),d=Object(u.useRef)({}),b=Vt();Object(u.useEffect)((function(){r(t)}),[t]);var h=function(e,t){var c=Object(_.a)(Object(_.a)({},a),{},Object(f.a)({},e,t));r(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(je,{config:t,onConfigChange:function(e){var t=Object(_.a)(Object(_.a)({},a),e);r(t),n&&n(t)}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:o,type:"number",label:"Tama\xf1o de letra de los elementos",inputProps:{min:1},value:a.itemsFontSize,color:"secondary",className:b.fullWidth,onInput:function(){h("itemsFontSize",parseInt(o.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:s,type:"number",label:"N\xfamero de filas",inputProps:{min:1},value:a.rowCount,color:"secondary",className:b.fullWidth,onInput:function(){h("rowCount",parseInt(s.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:l,name:"checkMultiselect",checked:a.firstRowFixed,color:"secondary",onChange:function(){h("firstRowFixed",l.current.checked)}}),label:"Primera fila fija"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:j,type:"number",label:"N\xfamero de columnas",inputProps:{min:1},value:a.columnCount,color:"secondary",className:b.fullWidth,onInput:function(){h("columnCount",parseInt(j.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:d,name:"checkFirstColumnFixed",checked:a.firstColumnFixed,color:"secondary",onChange:function(){h("firstColumnFixed",d.current.checked)}}),label:"Primera columna fija"})})]})},Kt=Object(h.a)((function(e){return{root:{width:"100%",height:"100%",border:"solid 1px gray"},fixed:{backgroundColor:e.palette.primary.main,color:"#ffffff"},valid:{backgroundColor:"#4caf50"},invalid:{backgroundColor:"#f44336"}}})),Qt=function(e){var t=e.mode,n=e.cell,c=e.fixed,a=e.fontSize,r=e.showResults,o=e.success,s=e.onCellChange,l=Object(u.useState)(n),j=Object(m.a)(l,2),d=j[0],b=j[1],f=Object(u.useRef)({}),h=Kt();return Object(p.jsxs)(D.a,{container:!0,alignItems:"center",className:"".concat(h.root," ").concat(c?h.fixed:r?o?h.valid:h.invalid:""),children:[t===i.Design&&!c&&Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{value:"hidden",onClick:function(){var e=Object(_.a)(Object(_.a)({},d),{},{hidden:!d.hidden});b(e),s(e)},children:Object(p.jsx)(U.a,{color:d.hidden?"secondary":"primary",children:d.hidden?"visibility_off":"visibility"})})}),Object(p.jsx)(D.a,{item:!0,xs:!0,children:t===i.Design||d.hidden?Object(p.jsx)(ce.a,{inputRef:f,value:d.text,color:"secondary",style:{marginLeft:"10px",width:"calc(100% - 20px)"},inputProps:{style:{textAlign:"center",fontSize:"".concat(null!=a?a:28,"px"),color:c||r?"#ffffff":"#000000",width:"100%"}},onInput:function(){var e=Object(_.a)(Object(_.a)({},d),{},{text:f.current.value});b(e),s(e)}}):Object(p.jsx)("div",{style:{textAlign:"center",fontSize:"".concat(null!=a?a:28,"px"),color:c||r?"#ffffff":"#000000"},children:d.text})})]})},Yt=(Object(h.a)((function(){return{dialogContainer:{padding:"20px"}}})),Object(h.a)((function(){return{dialogContainer:{padding:"20px"}}}))),$t=function(e){var t=e.open,n=e.onAccept,c=e.onCancel,i=Object(u.useState)({ignoreTimeLimit:!1,autoNext:!0,disorderedChallenges:!1}),a=Object(m.a)(i,2),r=a[0],o=a[1],s=Object(u.useRef)({}),l=Object(u.useRef)({}),j=Object(u.useRef)({}),d=Yt(),b=function(e,t){o(Object(_.a)(Object(_.a)({},r),{},Object(f.a)({},e,t)))};return Object(p.jsxs)(pe.a,{open:t,fullWidth:!0,maxWidth:"sm",children:[Object(p.jsx)(ye.a,{children:"Opciones del cuestionario"}),Object(p.jsx)(he.a,{className:d.dialogContainer,children:Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:s,name:"checkIgnoreTimeLimit",checked:r.ignoreTimeLimit,color:"secondary",onChange:function(){b("ignoreTimeLimit",s.current.checked)}}),label:"Desactivar tiempo l\xedmite de las preguntas"})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:l,name:"checkAutoNextChallenge",checked:r.autoNext,color:"secondary",onChange:function(){b("autoNext",l.current.checked)}}),label:"Avanzar autom\xe1ticamente a la siguiente pregunta"})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:j,name:"checkDisorderedChallenges",checked:r.disorderedChallenges,color:"secondary",onChange:function(){b("disorderedChallenges",j.current.checked)}}),label:"Desordenar preguntas"})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsxs)(D.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{variant:"contained",color:"primary",onClick:function(){n(r)},children:"Aceptar"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{color:"primary",onClick:function(){c()},children:"Cancelar"})})]})})]})})]})},Xt=function(e){var t=e.project,n=e.onAccept,c=e.onCancel,i=Object(u.useState)(function(e){return null!=e?{name:e.name,description:e.description||""}:{name:"",description:""}}(t)),a=Object(m.a)(i,2),r=a[0],o=a[1],s=Object(u.useRef)({}),l=Object(u.useRef)({});return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(ce.a,{inputRef:s,label:"Nombre",fullWidth:!0,value:r.name,onInput:function(){o(Object(_.a)(Object(_.a)({},r),{},{name:s.current.value}))}})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(ce.a,{inputRef:l,label:"Descripci\xf3n",fullWidth:!0,value:r.description,onInput:function(){o(Object(_.a)(Object(_.a)({},r),{},{description:l.current.value}))}})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsxs)(D.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{variant:"contained",color:"primary",onClick:function(){var e=t?Object(_.a)(Object(_.a)({},t),{},{name:s.current.value,description:l.current.value}):{id:Object(Ee.a)(),name:s.current.value,description:l.current.value,tests:[]};n(e)},children:"Aceptar"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{color:"primary",onClick:function(){c()},children:"Cancelar"})})]})})]})},Zt=n(230),en=n(210),tn=n(211),nn=n(225),cn=n(212),an=n(213),rn=Object(h.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:S.main,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},gridContainer:{padding:"0px 10px"},gridItems:{flexGrow:1},messageControl:{backgroundColor:k,color:N.errorContrast},dialogContainer:{padding:"20px"}}})),on=function(e){var t=e.projects,n=e.setProjects,c=Object(C.f)(),i=j.a.useState(!1),a=Object(m.a)(i,2),r=a[0],o=a[1],s=j.a.useState(),l=Object(m.a)(s,2),d=l[0],b=l[1],f=j.a.useState(!1),h=Object(m.a)(f,2),O=h[0],x=h[1],g=Object(u.useState)(!1),v=Object(m.a)(g,2),y=v[0],S=v[1],k=Object(u.useState)(!1),I=Object(m.a)(k,2),N=I[0],E=I[1],R=Object(u.useState)(),T=Object(m.a)(R,2),P=T[0],F=T[1],z=Object(u.useState)(!1),A=Object(m.a)(z,2),H=A[0],W=A[1],M=Object(u.useState)(""),L=Object(m.a)(M,2),q=L[0],B=L[1],V=rn(),J=function(e,i,a){var r=t.find((function(t){return t.id===e})),o=null!=r&&r.tests.some((function(e){return e.id===i.id})),s=t.map((function(t){if(t.id!==e)return Object(_.a)({},t);if(o){var n=t.tests.map((function(e){return e.id===i.id?Object(_.a)({},i):Object(_.a)({},e)}));return Object(_.a)(Object(_.a)({},t),{},{tests:Object(G.a)(n)})}return Object(_.a)(Object(_.a)({},t),{},{tests:[].concat(Object(G.a)(t.tests),[i])})}));n(s),!o&&a&&c.push("/designer/".concat(e,"/").concat(i.id))},K=function(e,c){var i=t.map((function(t){if(t.id!==e)return Object(_.a)({},t);var n=t.tests.filter((function(e){return e.id!==c.id}));return Object(_.a)(Object(_.a)({},t),{},{tests:Object(G.a)(n)})}));n(i)};return Object(p.jsxs)(u.Fragment,{children:[Object(p.jsx)(Ce,{open:O,text:"El proyecto ya existe. \xbfQu\xe9 deseas hacer?",acceptButtonText:"Sobreescribir proyecto",cancelButtonText:"Crear nueva copia",width:"sm",onConfirm:function(){d&&(n(t.map((function(e){return e.id===d.id?d:e}))),b(void 0)),x(!1)},onRefuse:function(){if(d){var e=Object(_.a)(Object(_.a)({},d),{},{id:Object(Ee.a)(),name:"Copia ".concat(null===d||void 0===d?void 0:d.name)});n([].concat(Object(G.a)(t),[Object(_.a)({},e)])),b(void 0)}x(!1)}}),Object(p.jsxs)(pe.a,{open:y,fullWidth:!0,maxWidth:"sm",children:[Object(p.jsx)(ye.a,{children:"Proyecto"}),Object(p.jsx)(he.a,{className:V.dialogContainer,children:Object(p.jsx)(Xt,{project:P,onAccept:function(e){n(null!=P?t.map((function(t){return t.id===e.id?e:t})):[].concat(Object(G.a)(t),[Object(_.a)({},e)])),F(void 0),S(!1)},onCancel:function(){F(void 0),S(!1)}})})]}),Object(p.jsx)(Ce,{open:N,text:"\xbfSeguro que deseas eliminar el proyecto?",width:"xs",onConfirm:function(){null!=P&&n(t.filter((function(e){return e.id!==P.id}))),E(!1)},onRefuse:function(){E(!1)}}),Object(p.jsx)(Zt.a,{open:H,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){W(!1)},children:Object(p.jsx)(en.a,{message:Object(p.jsxs)(D.a,{container:!0,spacing:4,children:[Object(p.jsx)(D.a,{item:!0,xs:1,children:Object(p.jsx)(U.a,{children:"error"})}),Object(p.jsx)(D.a,{item:!0,xs:10,children:Object(p.jsx)(ne.a,{children:q})})]}),className:V.messageControl})}),Object(p.jsxs)(D.a,{container:!0,children:[Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsxs)(D.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2,className:V.gridContainer,children:[Object(p.jsx)(D.a,{item:!0,xs:6,children:Object(p.jsx)(ne.a,{variant:"h6",children:"Proyectos"})}),Object(p.jsxs)(D.a,{item:!0,xs:6,container:!0,justify:"flex-end",children:[Object(p.jsx)(D.a,{item:!0,xs:6,sm:4,container:!0,justify:"flex-end",children:Object(p.jsx)(ve.a,{style:{color:w.dark},onClick:function(){S(!0)},children:"Nuevo proyecto"})}),Object(p.jsx)(D.a,{item:!0,xs:6,sm:4,container:!0,justify:"flex-end",children:Object(p.jsx)(Te,{label:"Importar proyecto",onDataLoaded:function(e){var c=e;(function(e){return null!=e&&null!=e.id&&null!=e.name&&null!=e.tests&&e.tests.reduce((function(e,t){return e&&ct(t)}),!0)})(c)||(B("El proyecto es inv\xe1lido"),W(!0)),null!=t.find((function(e){return e.id===c.id}))?(b(c),x(!0)):n([].concat(Object(G.a)(t),[Object(_.a)({},c)]))},onError:function(){B("Se produjo un error en la importaci\xf3n"),W(!0)}})})]})]})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(tn.a,{})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:t.map((function(e){return Object(p.jsxs)(nn.a,{expanded:r===e.id,onChange:function(t,n){!function(e,t){o(!!t&&e.id)}(e,n)},children:[Object(p.jsx)(cn.a,{title:e.description,children:Object(p.jsxs)(D.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(p.jsx)(D.a,{item:!0,xs:3,children:Object(p.jsx)(ne.a,{className:V.heading,children:e.name})}),Object(p.jsx)(D.a,{item:!0,xs:3,children:Object(p.jsx)(ne.a,{className:V.secondaryHeading,children:"".concat(e.tests.length," cuestionario").concat(1!==e.tests.length?"s":"")})}),Object(p.jsxs)(D.a,{item:!0,xs:6,container:!0,justify:"flex-end",children:[Object(p.jsx)(Ke.a,{title:"Descargar proyecto",color:"primary",onClick:function(t){t.stopPropagation(),function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),t.setAttribute("download",e.name.replace(/ /g,"_")),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(e)},children:Object(p.jsx)(U.a,{children:"download"})}),Object(p.jsx)(Ke.a,{title:"Editar proyecto",color:"primary",onClick:function(t){t.stopPropagation(),F(e),S(!0)},children:Object(p.jsx)(U.a,{children:"edit"})}),Object(p.jsx)(Ke.a,{title:"Eliminar proyecto",onClick:function(t){t.stopPropagation(),F(e),E(!0)},children:Object(p.jsx)(U.a,{children:"delete"})})]})]})}),Object(p.jsx)(an.a,{children:Object(p.jsx)(un,{project:e,onCreateTest:J,onDeleteTest:K})})]},e.id)}))})]})]})},sn=function(e){var t=e.test,n=e.onAccept,c=e.onCancel,i=Object(u.useState)(function(e){return null!=e?{name:e.name,description:e.description||"",language:e.language||o.Es}:{name:"",description:"",language:o.Es}}(t)),a=Object(m.a)(i,2),r=a[0],s=a[1],l=Object(u.useRef)({}),j=Object(u.useRef)({});return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:4,children:[Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(ce.a,{inputRef:l,id:"newTestNameInput",label:"Nombre",fullWidth:!0,value:r.name,onInput:function(){s(Object(_.a)(Object(_.a)({},r),{},{name:l.current.value}))}})}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsx)(ce.a,{inputRef:j,id:"newTestNameInput",label:"Descripci\xf3n",fullWidth:!0,value:r.description,onInput:function(){s(Object(_.a)(Object(_.a)({},r),{},{description:j.current.value}))}})}),Object(p.jsxs)(D.a,{item:!0,xs:12,children:[Object(p.jsx)(zt.a,{shrink:!0,id:"label-language",children:"Idioma"}),Object(p.jsxs)(At.a,{labelId:"label-language",id:"newTestLanguageInput",label:"Idioma",fullWidth:!0,value:r.language.toString(),onChange:function(e){var t=e.target.value===o.Es.toString()?o.Es:o.En;s(Object(_.a)(Object(_.a)({},r),{},{language:t}))},children:[Object(p.jsx)(rt.a,{value:o.Es.toString(),children:"Espa\xf1ol"}),Object(p.jsx)(rt.a,{value:o.En.toString(),children:"Ingl\xe9s"})]})]}),Object(p.jsx)(D.a,{item:!0,xs:12,children:Object(p.jsxs)(D.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{variant:"contained",color:"primary",onClick:function(){var e=t?Object(_.a)(Object(_.a)({},t),{},{name:r.name,description:r.description,language:r.language}):{id:Object(Ee.a)(),name:r.name,description:r.description,language:r.language,challenges:[]};n(e)},children:"Aceptar"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{color:"primary",onClick:function(){c()},children:"Cancelar"})})]})})]})},ln=Object(h.a)((function(e){return{inline:{display:"inline"},fullWidth:Object(f.a)({width:"100%"},e.breakpoints.down("xs"),{width:"50px"}),listItemSecondaryAction:{visibility:"hidden"},listItem:{"&:hover $listItemSecondaryAction":{visibility:"inherit"}},bottomContainer:{marginTop:"10px"},play:{color:E},dialogContainer:{padding:"20px"},messageControl:{backgroundColor:k,color:N.errorContrast}}})),un=function(e){var t=e.project,n=e.onCreateTest,c=e.onDeleteTest,i=Object(C.f)(),a=j.a.useState(),r=Object(m.a)(a,2),o=r[0],s=r[1],l=j.a.useState(),d=Object(m.a)(l,2),b=d[0],f=d[1],h=j.a.useState(null),O=Object(m.a)(h,2),x=O[0],g=O[1],y=j.a.useState(!1),w=Object(m.a)(y,2),S=w[0],k=w[1],I=Object(u.useState)(!1),N=Object(m.a)(I,2),E=N[0],R=N[1],T=Object(u.useState)(!1),P=Object(m.a)(T,2),F=P[0],z=P[1],A=Object(u.useState)(),H=Object(m.a)(A,2),W=H[0],M=H[1],L=Object(u.useState)(!1),q=Object(m.a)(L,2),B=q[0],G=q[1],V=Object(u.useState)(""),J=Object(m.a)(V,2),K=J[0],Q=J[1],Y=ln();return Object(p.jsxs)(u.Fragment,{children:[Object(p.jsxs)(st.a,{id:"addNewMenu",anchorEl:x,keepMounted:!0,open:Boolean(x),onClose:function(){g(null)},children:[Object(p.jsx)(rt.a,{onClick:function(){g(null),R(!0)},children:Object(p.jsx)(ne.a,{variant:"subtitle2",children:"Editar datos generales"})}),Object(p.jsx)(rt.a,{component:v.b,to:"/designer/".concat(t.id,"/").concat(null===o||void 0===o?void 0:o.id),children:Object(p.jsx)(ne.a,{variant:"subtitle2",children:"Editar preguntas"})})]}),Object(p.jsx)(Ce,{open:S,text:"El cuestionario ya existe en este proyecto. \xbfQu\xe9 deseas hacer?",acceptButtonText:"Sobreescribir cuestionario",cancelButtonText:"Crear nueva copia",width:"sm",onConfirm:function(){b&&(n(t.id,b,!1),f(void 0)),k(!1)},onRefuse:function(){if(b){var e=Object(_.a)(Object(_.a)({},b),{},{id:Object(Ee.a)(),name:"Copia ".concat(null===b||void 0===b?void 0:b.name)});n(t.id,e,!1),f(void 0)}k(!1)}}),Object(p.jsxs)(pe.a,{open:E,fullWidth:!0,maxWidth:"sm",children:[Object(p.jsx)(ye.a,{children:"Cuestionario"}),Object(p.jsx)(he.a,{className:Y.dialogContainer,children:Object(p.jsx)(sn,{test:o,onAccept:function(e){n(t.id,e,!0),s(void 0),R(!1)},onCancel:function(){s(void 0),R(!1)}})})]}),Object(p.jsx)(Ce,{open:F,text:"\xbfSeguro que deseas eliminar el proyecto?",width:"xs",onConfirm:function(){null!=o&&c(t.id,o),s(void 0),z(!1)},onRefuse:function(){s(void 0),z(!1)}}),Object(p.jsx)(Zt.a,{open:B,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){G(!1)},children:Object(p.jsx)(en.a,{message:Object(p.jsxs)(D.a,{container:!0,spacing:4,children:[Object(p.jsx)(D.a,{item:!0,xs:1,children:Object(p.jsx)(U.a,{children:"error"})}),Object(p.jsx)(D.a,{item:!0,xs:10,children:Object(p.jsx)(ne.a,{children:K})})]}),className:Y.messageControl})}),Object(p.jsx)(D.a,{container:!0,children:Object(p.jsxs)(D.a,{item:!0,xs:12,children:[0===t.tests.length&&Object(p.jsx)(ne.a,{children:"No hay cuestionarios"}),t.tests.length>0&&Object(p.jsx)(vt.a,{children:t.tests.map((function(e){return Object(p.jsxs)(u.Fragment,{children:[Object(p.jsxs)(Ct.a,{button:!0,alignItems:"flex-start",classes:{container:Y.listItem},children:[Object(p.jsxs)(D.a,{container:!0,children:[Object(p.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(yt.a,{primary:e.name,secondary:Object(p.jsx)(ne.a,{component:"span",variant:"body2",className:Y.inline,color:"textPrimary",children:e.description})})}),Object(p.jsx)(D.a,{item:!0,xs:12,sm:2,children:Object(p.jsx)(yt.a,{secondary:"".concat(e.challenges.length," pregunta").concat(1!==e.challenges.length?"s":"")})})]}),Object(p.jsx)(wt.a,{className:Y.listItemSecondaryAction,children:Object(p.jsxs)(D.a,{container:!0,className:Y.fullWidth,children:[Object(p.jsx)(D.a,{item:!0,xs:6,sm:3,children:ct(e)?Object(p.jsx)(Ke.a,{title:"Jugar!",onClick:function(){var n,c;n=t.id,c=e.id,M({projectId:n,testId:c,openOptions:!0})},children:Object(p.jsx)(U.a,{className:Y.play,children:"play_circle_filled"})}):Object(p.jsx)(Ke.a,{title:"Errores en el cuestionario",children:Object(p.jsx)(U.a,{color:"error",children:"error"})})}),Object(p.jsx)(D.a,{item:!0,xs:6,sm:3,children:Object(p.jsx)(Ke.a,{title:"Editar cuestionario",onClick:function(t){t.stopPropagation(),function(e,t){s(t),g(e.currentTarget)}(t,e)},children:Object(p.jsx)(U.a,{color:"primary",children:"edit"})})}),Object(p.jsx)(D.a,{item:!0,xs:6,sm:3,children:Object(p.jsx)(Ke.a,{title:"Descargar cuestionario",onClick:function(t){t.stopPropagation(),function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),t.setAttribute("download",e.name.replace(/ /g,"_")),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(e)},children:Object(p.jsx)(U.a,{children:"download"})})}),Object(p.jsx)(D.a,{item:!0,xs:6,sm:3,children:Object(p.jsx)(Ke.a,{title:"Eliminar cuestionario",onClick:function(t){t.stopPropagation(),s(e),z(!0)},children:Object(p.jsx)(U.a,{children:"delete"})})})]})})]},e.id),Object(p.jsx)(tn.a,{variant:"inset",component:"li"})]},"fragment_".concat(e.id))}))}),Object(p.jsx)(D.a,{item:!0,xs:12,className:Y.bottomContainer,children:Object(p.jsxs)(D.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ve.a,{variant:"contained",color:"primary",onClick:function(){R(!0)},children:"Nuevo cuestionario"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Te,{label:"Importar cuestionario",onDataLoaded:function(e){var c=e;ct(c)||(Q("El cuestionario es inv\xe1lido"),G(!0)),null!=t.tests.find((function(e){return e.id===c.id}))?(f(c),k(!0)):n(t.id,c,!1)},onError:function(){Q("Se produjo un error en la importaci\xf3n"),G(!0)}})})]})})]})}),W&&Object(p.jsx)($t,{open:W.openOptions,onAccept:function(e){i.push("/play/".concat(null===W||void 0===W?void 0:W.projectId,"/").concat(null===W||void 0===W?void 0:W.testId,"?")+"ignoreTimeLimit=".concat(e.ignoreTimeLimit,"&")+"autoNext=".concat(e.autoNext,"&")+"disorderedChallenges=".concat(e.disorderedChallenges),W),M({openOptions:!1})},onCancel:function(){M({openOptions:!1})}})]})},jn=Object(h.a)({fullHeight:{height:"100%"}}),dn=function(e){var t=e.challenge,n=e.onChallengeChange,c=jn();return Object(p.jsxs)(D.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:10,className:c.fullHeight,children:Object(p.jsx)(mn,{mode:i.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(p.jsx)(D.a,{item:!0,xs:2,className:c.fullHeight,children:Object(p.jsx)(xn,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(G.a)(t.pairs);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return{source:"",destination:""}}));n=[].concat(Object(G.a)(n),Object(G.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.pairsCount),i=Object(_.a)(Object(_.a)({},t),{},{pairs:c,config:e});n(i)}})})]})},bn=n(87),fn=n.n(bn),hn=Object(h.a)((function(){return{fullHeight:{height:"100%"}}})),On=function(e,t){var n=Object(G.a)(e);return t===i.Play&&(n=n.sort((function(){return Math.random()-.5}))),n},mn=function(e){var t=e.mode,n=e.challenge,c=e.options,a=e.onChallengeChange,r=e.onSuccess,o=e.onError,l=Object(u.useState)(!1),j=Object(m.a)(l,2),d=j[0],b=j[1],h=Object(u.useState)(!1),O=Object(m.a)(h,2),x=O[0],g=O[1],v=Object(u.useState)(On(n.pairs.map((function(e){return e.source})),t)),C=Object(m.a)(v,2),y=C[0],S=C[1],k=Object(u.useState)(On(n.pairs.map((function(e){return e.destination})),t)),I=Object(m.a)(k,2),N=I[0],E=I[1],R=Object(u.useState)([]),T=Object(m.a)(R,2),P=T[0],F=T[1],z=Object(Y.a)($),A=Object(m.a)(z,1)[0],H=Object(Y.a)(X),W=Object(m.a)(H,1)[0],M=hn();Object(u.useEffect)((function(){S(On(n.pairs.map((function(e){return e.source})),t)),E(On(n.pairs.map((function(e){return e.destination})),t))}),[n.pairs]);var L=function(e){b(!0),g(!0),e?A():W(),setTimeout((function(){e?r&&r():o&&o()}),2e3)},U=function(e,t,c){if(a){var i=t===s.Source?"source":"destination",r=Object(_.a)(Object(_.a)({},n),{},{pairs:n.pairs.map((function(t,n){return n===c?Object(_.a)(Object(_.a)({},t),{},Object(f.a)({},i,e)):Object(_.a)({},t)}))});a(r)}};return Object(p.jsx)(B,{mode:t,challenge:n,options:c,onChallengeChange:function(e){a&&a(Object(_.a)(Object(_.a)({},n),e))},stopTime:d,onTimeUp:function(){L(!1)},showCheck:!0,disabledCheck:t===i.Design||!(P.length===n.pairs.length),onCheckClick:function(){var e=n.pairs.reduce((function(e,t){var n=P.findIndex((function(e){return e.source.text===t.source&&e.destination.text===t.destination}));return e&&n>=0}),!0);L(e)},centralComponent:Object(p.jsx)(D.a,{container:!0,xs:12,className:M.fullHeight,children:Object(p.jsxs)(K.a,{backend:Q.a,children:[Object(p.jsx)(D.a,{item:!0,xs:5,container:!0,direction:"column",justify:"space-around",alignItems:"center",children:y.map((function(e,c){return Object(p.jsx)(vn,{mode:t,item:{text:e,index:c},fontSize:n.config.answerFontSize,arrowNode:Object(p.jsx)("div",{id:"an_s_".concat(c),style:{width:"20px",height:"20px",border:"solid 1px ".concat(w.main),borderRadius:"20px"}}),onTextChange:function(e){return U(e,s.Source,c)}},"source_".concat(c))}))}),Object(p.jsx)(D.a,{item:!0,xs:2}),Object(p.jsxs)(D.a,{item:!0,xs:5,container:!0,direction:"column",justify:"space-around",alignItems:"center",children:[N.map((function(e,c){return Object(p.jsx)(gn,{mode:t,item:{text:e,index:c},fontSize:n.config.answerFontSize,arrowNode:Object(p.jsx)("div",{id:"an_d_".concat(c),style:{width:"20px",height:"20px",border:"solid 1px ".concat(w.main),borderRadius:"20px"}}),onTextChange:function(e){return U(e,s.Destination,c)},onDrop:function(t){!function(e,t){var n=P.filter((function(n){return n.source.index!==e.index&&n.destination.index!==t.index}));n.push({source:e,destination:t}),F(n)}(t,{text:e,index:c})}},"destination_".concat(c))})),t===i.Design?y.map((function(e,t){return Object(p.jsx)(fn.a,{start:"an_s_".concat(t),end:"an_d_".concat(t),curveness:0},"designArrow_".concat(t))})):P.map((function(e,t){return Object(p.jsx)(fn.a,{start:"an_s_".concat(e.source.index),end:"an_d_".concat(e.destination.index),curveness:0,color:x?n.pairs.findIndex((function(t){return t.source===e.source.text&&t.destination===e.destination.text}))>=0?"#4caf50":"#f44336":void 0},"playArrow_".concat(t))}))]})]})})})},pn=Object(h.a)({fullWidth:{width:"100%"}}),xn=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),a=i[0],r=i[1],o=Object(u.useRef)({}),s=Object(u.useRef)({}),l=pn();Object(u.useEffect)((function(){r(t)}),[t]);var j=function(e,t){var c=Object(_.a)(Object(_.a)({},a),{},Object(f.a)({},e,t));r(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(je,{config:t,onConfigChange:function(e){var t=Object(_.a)(Object(_.a)({},a),e);r(t),n&&n(t)}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:o,type:"number",label:"Tama\xf1o de letra de las respuestas",inputProps:{min:1},value:a.answerFontSize,color:"secondary",className:l.fullWidth,onInput:function(){j("answerFontSize",parseInt(o.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:s,type:"number",label:"N\xfamero de parejas",inputProps:{min:1},value:a.pairsCount,color:"secondary",className:l.fullWidth,onInput:function(){j("pairsCount",parseInt(s.current.value))}})})]})},gn=function(e){var t=e.mode,n=e.item,c=e.fontSize,a=e.arrowNode,r=e.onTextChange,o=e.onDrop,s=Object(u.useState)(n.text),l=Object(m.a)(s,2),j=l[0],d=l[1],b=Object(u.useRef)({});Object(u.useEffect)((function(){d(n.text)}),[n.text]);var f=Object(oe.a)({accept:"dnd",drop:function(e){o&&o(e)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),h=Object(m.a)(f,2)[1];return Object(p.jsx)(M.a,{style:{width:"100%"},children:Object(p.jsx)(Ve.a,{children:Object(p.jsxs)(D.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(D.a,{item:!0,xs:1,container:!0,justify:"center",children:Object(p.jsx)("div",{ref:h,children:a})}),Object(p.jsx)(D.a,{item:!0,xs:!0,container:!0,justify:"center",children:t===i.Design?Object(p.jsx)(ce.a,{inputRef:b,value:j,onInput:function(){d(b.current.value),r&&r(b.current.value)},style:{width:"95%"},inputProps:{style:{fontSize:"".concat(c||22,"px")}}}):Object(p.jsx)(ne.a,{children:j})})]})})})},vn=function(e){var t=e.mode,n=e.item,c=e.fontSize,a=e.arrowNode,r=e.onTextChange,o=Object(u.useState)(n.text),s=Object(m.a)(o,2),l=s[0],j=s[1],d=Object(u.useRef)({});Object(u.useEffect)((function(){j(n.text)}),[n]);var b=Object(ke.a)((function(){return{type:"dnd",item:Object(_.a)({},n),collect:function(e){return{opacity:e.isDragging()?.4:1}}}}),[n]),f=Object(m.a)(b,2)[1];return Object(p.jsx)(M.a,{style:{width:"100%"},children:Object(p.jsx)(Ve.a,{children:Object(p.jsxs)(D.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(D.a,{item:!0,xs:!0,container:!0,justify:"center",children:t===i.Design?Object(p.jsx)(ce.a,{inputRef:d,value:l,onInput:function(){j(d.current.value),r&&r(d.current.value)},style:{width:"95%"},inputProps:{style:{fontSize:"".concat(c||22,"px")}}}):Object(p.jsx)(ne.a,{children:l})}),Object(p.jsx)(D.a,{item:!0,xs:1,container:!0,justify:"center",children:Object(p.jsx)("div",{ref:f,children:a})})]})})})},Cn=function(e){var t=e.mode,n=e.challenge,c=e.options,i=e.onChallengeChange,a=e.stopTime,r=e.onTimeUp,o=e.showCheck,s=e.disabledCheck,l=e.onCheckClick,u=e.children;return Object(p.jsx)(B,{mode:t,challenge:n,options:c,onChallengeChange:function(e){i&&i(Object(_.a)(Object(_.a)({},n),e))},stopTime:a,onTimeUp:r,showCheck:o,disabledCheck:s,onCheckClick:l,centralComponent:Object(p.jsx)(Fe,{mode:t,pictures:n.pictures,onPicturesChange:function(e){i&&i(Object(_.a)(Object(_.a)({},n),{},{pictures:Object(G.a)(e)}))}}),bottomComponent:u})},yn=Object(h.a)({fullHeight:{height:"100%"}}),wn=function(e){var t=e.challenge,n=e.onChallengeChange,c=yn();return Object(p.jsxs)(D.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:10,className:c.fullHeight,children:Object(p.jsx)(kn,{mode:i.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(p.jsx)(D.a,{item:!0,xs:2,className:c.fullHeight,children:Object(p.jsx)(Nn,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(G.a)(t.pictures);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return{type:l.None,data:""}}));n=[].concat(Object(G.a)(n),Object(G.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.pictureCount),i=function(e){var n=!1;return t.answers.map((function(t){return e?Object(_.a)({},t):t.valid&&!n?(n=!0,Object(_.a)({},t)):Object(_.a)(Object(_.a)({},t),{},{valid:!1})}))}(e.multiselect),a=Object(_.a)(Object(_.a)({},t),{},{pictures:Object(G.a)(c),answers:Object(G.a)(i),config:e});n(a)}})})]})},Sn=Object(h.a)((function(){return{optionContainer:{height:"50%"}}})),kn=function(e){var t=e.mode,n=e.challenge,c=e.options,a=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(u.useState)(!1),l=Object(m.a)(s,2),j=l[0],d=l[1],b=Object(u.useState)([]),f=Object(m.a)(b,2),h=f[0],O=f[1],x=Object(u.useState)(!1),g=Object(m.a)(x,2),v=g[0],C=g[1],y=Object(Y.a)($),w=Object(m.a)(y,1)[0],S=Object(Y.a)(X),k=Object(m.a)(S,1)[0],I=Sn(),N=function(e,t){var c=n.answers.map((function(c,i){return i!==e?n.config.multiselect?Object(_.a)({},c):Object(_.a)(Object(_.a)({},c),{},{valid:!1}):Object(_.a)({},t)}));a&&a(Object(_.a)(Object(_.a)({},n),{},{answers:c}))},E=function(e){if(t===i.Play)if(n.config.multiselect){var c=h.findIndex((function(t){return t===e}));O(-1===c?[].concat(Object(G.a)(h),[e]):h.filter((function(t){return t!==e})))}else n.answers[e].valid?R(!0):R(!1)},R=function(e){d(!0),C(!0),e?w():k(),setTimeout((function(){e?r&&r():o&&o()}),2e3)};return Object(p.jsx)(Cn,{mode:t,challenge:n,options:c,onChallengeChange:function(e){a&&a(Object(_.a)(Object(_.a)({},n),e))},stopTime:j,onTimeUp:function(){R(!1)},showCheck:n.config.multiselect,disabledCheck:t===i.Design||0===h.length,onCheckClick:function(){if(0===h.map((function(e){return n.answers[e]})).filter((function(e){return!e.valid})).length&&0===n.answers.filter((function(e,t){return e.valid&&-1===h.indexOf(t)})).length)return void R(!0);R(!1)},children:Object(p.jsxs)(D.a,{container:!0,justify:"space-evenly",spacing:2,style:{height:"100%"},children:[Object(p.jsx)(D.a,{item:!0,xs:5,className:I.optionContainer,children:Object(p.jsx)(_e,{mode:t,text:n.answers[0].text,icon:"wb_sunny",valid:n.answers[0].valid,selected:t===i.Play&&h.indexOf(0)>=0,color:"#f44336",fontSize:n.config.answerFontSize,multiselect:n.config.multiselect,showResults:v,onTextChange:function(e){N(0,Object(_.a)(Object(_.a)({},n.answers[0]),{},{text:e}))},onValidChange:function(e){N(0,Object(_.a)(Object(_.a)({},n.answers[0]),{},{valid:e}))},onClick:function(){E(0)}})}),Object(p.jsx)(D.a,{item:!0,xs:5,className:I.optionContainer,children:Object(p.jsx)(_e,{mode:t,text:n.answers[1].text,icon:"brightness_2",valid:n.answers[1].valid,selected:t===i.Play&&h.indexOf(1)>=0,color:"#03a9f4",fontSize:n.config.answerFontSize,multiselect:n.config.multiselect,showResults:v,onTextChange:function(e){N(1,Object(_.a)(Object(_.a)({},n.answers[1]),{},{text:e}))},onValidChange:function(e){N(1,Object(_.a)(Object(_.a)({},n.answers[1]),{},{valid:e}))},onClick:function(){E(1)}})}),Object(p.jsx)(D.a,{item:!0,xs:5,className:I.optionContainer,children:Object(p.jsx)(_e,{mode:t,text:n.answers[2].text,icon:"flash_on",valid:n.answers[2].valid,selected:t===i.Play&&h.indexOf(2)>=0,color:"#ffc107",fontSize:n.config.answerFontSize,multiselect:n.config.multiselect,showResults:v,onTextChange:function(e){N(2,Object(_.a)(Object(_.a)({},n.answers[2]),{},{text:e}))},onValidChange:function(e){N(2,Object(_.a)(Object(_.a)({},n.answers[2]),{},{valid:e}))},onClick:function(){E(2)}})}),Object(p.jsx)(D.a,{item:!0,xs:5,className:I.optionContainer,children:Object(p.jsx)(_e,{mode:t,text:n.answers[3].text,icon:"cloud",valid:n.answers[3].valid,selected:t===i.Play&&h.indexOf(3)>=0,color:"#4caf50",fontSize:n.config.answerFontSize,multiselect:n.config.multiselect,showResults:v,onTextChange:function(e){N(3,Object(_.a)(Object(_.a)({},n.answers[3]),{},{text:e}))},onValidChange:function(e){N(3,Object(_.a)(Object(_.a)({},n.answers[3]),{},{valid:e}))},onClick:function(){E(3)}})})]})})},In=Object(h.a)({fullWidth:{width:"100%"}}),Nn=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),a=i[0],r=i[1],o=Object(u.useRef)({}),s=Object(u.useRef)({}),l=Object(u.useRef)({}),j=Object(u.useRef)({}),d=In();Object(u.useEffect)((function(){r(t)}),[t]);var b=function(e,t){var c=Object(_.a)(Object(_.a)({},a),{},Object(f.a)({},e,t));r(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(je,{config:t,onConfigChange:function(e){var t=Object(_.a)(Object(_.a)({},a),e);r(t),n&&n(t)}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:o,type:"number",label:"N\xfamero de im\xe1genes",inputProps:{min:1,max:9},value:a.pictureCount,color:"secondary",className:d.fullWidth,onInput:function(){b("pictureCount",parseInt(o.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:s,name:"checkPictureLabel",checked:a.pictureLabel,color:"secondary",onChange:function(){b("pictureLabel",s.current.checked)}}),label:"Numerar im\xe1genes"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:l,type:"number",label:"Tama\xf1o de letra de las respuestas",inputProps:{min:1},value:a.answerFontSize,color:"secondary",className:d.fullWidth,onInput:function(){b("answerFontSize",parseInt(l.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:j,name:"checkMultiselect",checked:a.multiselect,color:"secondary",onChange:function(){b("multiselect",j.current.checked)}}),label:"Respuesta m\xfaltiple"})})]})},En=Object(h.a)({fullHeight:{height:"100%"}}),Rn=function(e){var t=e.challenge,n=e.onChallengeChange,c=En();return Object(p.jsxs)(D.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:10,className:c.fullHeight,children:Object(p.jsx)(Pn,{mode:i.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(p.jsx)(D.a,{item:!0,xs:2,className:c.fullHeight,children:Object(p.jsx)(zn,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(G.a)(t.items);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return""}));n=[].concat(Object(G.a)(n),Object(G.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.itemCount),i=Object(_.a)(Object(_.a)({},t),{},{items:c,config:e});n(i)}})})]})},Tn=Object(h.a)((function(e){return{fullHeight:{height:"100%"},item:{padding:"5px 10px",backgroundColor:e.palette.secondary.main,color:e.palette.primary.contrastText,borderRadius:"20px"}}})),Pn=function(e){var t=e.mode,n=e.challenge,c=e.options,r=e.onChallengeChange,o=e.onSuccess,s=e.onError,l=Object(u.useState)(!1),j=Object(m.a)(l,2),d=j[0],b=j[1],f=Object(u.useState)([]),h=(Object(m.a)(f,1)[0],Object(u.useState)(!1)),O=Object(m.a)(h,2),x=(O[0],O[1]),g=Object(Y.a)($),v=Object(m.a)(g,1)[0],C=Object(Y.a)(X),y=Object(m.a)(C,1)[0],w=Tn(),S=function(e){b(!0),x(!0),e?v():y(),setTimeout((function(){e?o&&o():s&&s()}),2e3)};return Object(p.jsx)(B,{mode:t,challenge:n,options:c,onChallengeChange:function(e){r&&r(Object(_.a)(Object(_.a)({},n),e))},stopTime:d,onTimeUp:function(){S(!1)},showCheck:!0,disabledCheck:t===i.Design,onCheckClick:function(){},centralComponent:Object(p.jsx)(D.a,{container:!0,direction:n.config.elementsDirection===a.Horizontal?"row":"column",justify:"space-evenly",alignItems:"center",className:w.fullHeight,children:n.items.map((function(e){return Object(p.jsx)(D.a,{item:!0,className:w.item,children:"anItem"})}))})})},Fn=Object(h.a)({fullWidth:{width:"100%"}}),zn=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),r=i[0],o=i[1],s=Object(u.useRef)({}),l=Object(u.useRef)({}),j=Object(u.useRef)({}),d=Fn();Object(u.useEffect)((function(){o(t)}),[t]);var b=function(e,t){var c=Object(_.a)(Object(_.a)({},r),{},Object(f.a)({},e,t));o(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(je,{config:t,onConfigChange:function(e){var t=Object(_.a)(Object(_.a)({},r),e);o(t),n&&n(t)}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:s,type:"number",label:"Tama\xf1o de letra de los elementos",inputProps:{min:1},value:r.itemsFontSize,color:"secondary",className:d.fullWidth,onInput:function(){b("itemsFontSize",parseInt(s.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:l,type:"number",label:"N\xfamero de elementos",inputProps:{min:1},value:r.itemCount,color:"secondary",className:d.fullWidth,onInput:function(){b("groupCount",parseInt(l.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsxs)(Ft.a,{className:d.fullWidth,children:[Object(p.jsx)(zt.a,{children:"Orientaci\xf3n de elementos"}),Object(p.jsxs)(At.a,{inputRef:j,label:"Orientaci\xf3n de elementos",value:r.elementsDirection,color:"secondary",className:d.fullWidth,onChange:function(e){b("elementsDirection",e.target.value)},children:[Object(p.jsx)(rt.a,{value:a.Horizontal,children:"Horizontal"}),Object(p.jsx)(rt.a,{value:a.Vertical,children:"Vertical"})]})]})})]})},An=Object(h.a)({fullHeight:{height:"100%"}}),Dn=function(e){var t=e.challenge,n=e.onChallengeChange,c=An();return Object(p.jsxs)(D.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:10,className:c.fullHeight,children:Object(p.jsx)(Wn,{mode:i.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(p.jsx)(D.a,{item:!0,xs:2,className:c.fullHeight,children:Object(p.jsx)(Mn,{config:t.config,onConfigChange:function(e){var c=function(e,n){var c=Object(G.a)(t.series);if(e>(c=c.map((function(e){if(e.elements.length===n)return Object(_.a)({},e);if(e.elements.length<n){var t=Array.from(Array(n-e.elements.length)).map((function(){return""}));return Object(_.a)(Object(_.a)({},e),{},{elements:[].concat(Object(G.a)(e.elements),Object(G.a)(t))})}var c=e.theOddOneIndex>=n?-1:e.theOddOneIndex;return{elements:e.elements.slice(0,n),theOddOneIndex:c}}))).length){var i=Array.from(Array(e-c.length)).map((function(){return{elements:Array.from(Array(n)).map((function(){return""})),theOddOneIndex:-1}}));c=[].concat(Object(G.a)(c),Object(G.a)(i))}else e<c.length&&(c=c.slice(0,e));return c}(e.seriesCount,e.seriesLength),i=Object(_.a)(Object(_.a)({},t),{},{series:c,config:e});n(i)}})})]})},Hn=Object(h.a)((function(){return{root:{height:"100%",backgroundColor:"#f0f0f0"},fullHeight:{height:"100%"},fullWidth:{width:"100%"},titleContainer:{height:"20%"},answerContainer:{height:"80%",width:"100%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"},optionsContainer:{border:"solid 1px gray",backgroundColor:"#ffffff",minHeight:"60px"},sentencesContainer:{paddingLeft:"10px"}}})),Wn=function(e){var t=e.mode,n=e.challenge,c=e.options,a=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(u.useState)(!1),l=Object(m.a)(s,2),j=l[0],d=l[1],b=Object(u.useState)(!1),f=Object(m.a)(b,2),h=f[0],O=f[1],x=Object(u.useState)([]),g=Object(m.a)(x,2),v=g[0],C=g[1],y=Object(Y.a)($),w=Object(m.a)(y,1)[0],S=Object(Y.a)(X),k=Object(m.a)(S,1)[0],I=Hn(),N=function(e){d(!0),O(!0),e?w():k(),setTimeout((function(){e?r&&r():o&&o()}),2e3)};return Object(p.jsx)(B,{mode:t,challenge:n,options:c,onChallengeChange:function(e){a&&a(Object(_.a)(Object(_.a)({},n),e))},stopTime:j,onTimeUp:function(){N(!1)},showCheck:!0,disabledCheck:t===i.Design||!(v.length===n.series.length),onCheckClick:function(){var e=n.series.reduce((function(e,t,n){var c=v.findIndex((function(e){return e.serieIndex===n}));return e&&v[c].answerIndex===t.theOddOneIndex}),!0);N(e)},centralComponent:Object(p.jsx)(D.a,{item:!0,xs:12,className:I.fullHeight,container:!0,direction:"column",justify:"space-evenly",children:n.series.map((function(e,c){return Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Un,{mode:t,serie:e,showResults:h,fontSize:n.config.answerFontSize,onSerieChange:function(e){return function(e,t){if(a){var c=Object(_.a)(Object(_.a)({},n),{},{series:n.series.map((function(n,c){return t===c?Object(_.a)({},e):Object(_.a)({},n)}))});a(c)}}(e,c)},onAnswerChange:function(e){return function(e,t){var n=v.findIndex((function(t){return t.serieIndex===e})),c=Object(G.a)(v);n>=0?c.splice(n,1,{serieIndex:e,answerIndex:t}):c.push({serieIndex:e,answerIndex:t}),C(c)}(c,e)}})})}))})})},_n=Object(h.a)({fullWidth:{width:"100%"}}),Mn=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),a=i[0],r=i[1],o=Object(u.useRef)({}),s=Object(u.useRef)({}),l=Object(u.useRef)({}),j=_n();Object(u.useEffect)((function(){r(t)}),[t]);var d=function(e,t){var c=Object(_.a)(Object(_.a)({},a),{},Object(f.a)({},e,t));r(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(je,{config:t,onConfigChange:function(e){var t=Object(_.a)(Object(_.a)({},a),e);r(t),n&&n(t)}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:o,type:"number",label:"Tama\xf1o de letra de las respuestas",inputProps:{min:1},value:a.answerFontSize,color:"secondary",className:j.fullWidth,onInput:function(){d("answerFontSize",parseInt(o.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:s,type:"number",label:"N\xfamero de series",inputProps:{min:1},value:a.seriesCount,color:"secondary",className:j.fullWidth,onInput:function(){d("seriesCount",parseInt(s.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:l,type:"number",label:"Elementos en cada serie",inputProps:{min:3},value:a.seriesLength,color:"secondary",className:j.fullWidth,onInput:function(){d("seriesLength",parseInt(l.current.value))}})})]})},Ln=Object(h.a)((function(e){return{mainContainer:{backgroundColor:"#ffffff",padding:"5px"},selectableAnswer:{cursor:"pointer",borderRadius:"10px",padding:"2px","&:hover":{backgroundColor:e.palette.primary.light,color:"#ffffff"}},selectedAnswer:{backgroundColor:e.palette.primary.main,color:"#ffffff"},correct:{backgroundColor:"#4caf50",color:"#ffffff"},error:{backgroundColor:"#f44336",color:"#ffffff"}}})),Un=function(e){var t=e.mode,n=e.serie,c=e.showResults,a=e.fontSize,r=e.onSerieChange,o=e.onAnswerChange,s=Object(u.useState)(-1),l=Object(m.a)(s,2),j=l[0],d=l[1],b=Ln(),f=function(e){return e===j?c?e===n.theOddOneIndex?b.correct:b.error:b.selectedAnswer:""};return Object(p.jsx)(D.a,{container:!0,justify:"space-evenly",alignItems:"center",className:b.mainContainer,children:n.elements.map((function(e,c){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(D.a,{item:!0,onClick:function(){return e=c,void(o&&t===i.Play&&(d(e),o(e)));var e},children:t===i.Design?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(De.a,{value:c,checked:n.theOddOneIndex===c,name:"radio-button-demo",onChange:function(){return e=c,void(r&&r(Object(_.a)(Object(_.a)({},n),{},{theOddOneIndex:e})));var e}}),Object(p.jsx)(ce.a,{value:e,inputProps:{style:{fontSize:"".concat(a||50,"px")}},onInput:function(e){return function(e,t){if(r){var c=Object(G.a)(n.elements);c.splice(e,1,t),r(Object(_.a)(Object(_.a)({},n),{},{elements:c}))}}(c,e.target.value)}})]}):Object(p.jsx)(ne.a,{style:{fontSize:"".concat(a||50,"px")},className:"".concat(b.selectableAnswer," ").concat(f(c)),children:e})},"element_".concat(c)),c<n.elements.length-1&&Object(p.jsx)(D.a,{item:!0,children:"-"},"separator_".concat(c))]})}))})},qn=Object(h.a)({fullHeight:{height:"100%"}}),Bn=function(e){var t=e.challenge,n=e.onChallengeChange,c=qn();return Object(p.jsxs)(D.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(p.jsx)(D.a,{item:!0,xs:10,className:c.fullHeight,children:Object(p.jsx)(Vn,{mode:i.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(p.jsx)(D.a,{item:!0,xs:2,className:c.fullHeight,children:Object(p.jsx)(Kn,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(G.a)(t.pictures);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return{type:l.None,data:""}}));n=[].concat(Object(G.a)(n),Object(G.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.pictureCount),i=Object(_.a)(Object(_.a)({},t),{},{pictures:Object(G.a)(c),config:e});n(i)}})})]})},Gn=Object(h.a)((function(e){return{optionContainer:{height:"calc(100% - 80px)",marginTop:"40px"}}})),Vn=function(e){var t=e.mode,n=e.challenge,c=e.options,a=e.onChallengeChange,r=e.onSuccess,s=e.onError,l=Object(u.useState)(!1),j=Object(m.a)(l,2),d=j[0],b=j[1],f=Object(u.useState)(!1),h=Object(m.a)(f,2),O=h[0],x=h[1],g=Object(Y.a)($),v=Object(m.a)(g,1)[0],C=Object(Y.a)(X),y=Object(m.a)(C,1)[0],w=Gn(),S=function(e){a&&a(Object(_.a)(Object(_.a)({},n),{},{answer:e}))},k=function(e){t===i.Play&&(n.answer===e?I(!0):I(!1))},I=function(e){b(!0),x(!0),e?v():y(),setTimeout((function(){e?r&&r():s&&s()}),2e3)};return Object(p.jsx)(Cn,{mode:t,challenge:n,options:c,onChallengeChange:function(e){a&&a(Object(_.a)(Object(_.a)({},n),e))},stopTime:d,onTimeUp:function(){I(!1)},showCheck:!1,children:Object(p.jsxs)(D.a,{container:!0,justify:"space-evenly",spacing:2,style:{height:"100%"},children:[Object(p.jsx)(D.a,{item:!0,xs:5,className:w.optionContainer,children:Object(p.jsx)(_e,{mode:t,text:(null===c||void 0===c?void 0:c.language)===o.En?"True":"Verdadero",icon:"wb_sunny",valid:n.answer,color:"#4caf50",fontSize:42,showResults:O,onValidChange:function(e){S(!0)},onClick:function(){k(!0)}})}),Object(p.jsx)(D.a,{item:!0,xs:5,className:w.optionContainer,children:Object(p.jsx)(_e,{mode:t,text:(null===c||void 0===c?void 0:c.language)===o.En?"False":"Falso",icon:"brightness_2",valid:!n.answer,color:"#f44336",fontSize:42,showResults:O,onValidChange:function(e){S(!1)},onClick:function(){k(!1)}})})]})})},Jn=Object(h.a)({fullWidth:{width:"100%"}}),Kn=function(e){var t=e.config,n=e.onConfigChange,c=Object(u.useState)(t),i=Object(m.a)(c,2),a=i[0],r=i[1],o=Object(u.useRef)({}),s=Object(u.useRef)({}),l=Jn();Object(u.useEffect)((function(){r(t)}),[t]);var j=function(e,t){var c=Object(_.a)(Object(_.a)({},a),{},Object(f.a)({},e,t));r(c),n&&n(c)};return Object(p.jsxs)(D.a,{container:!0,direction:"column",spacing:2,children:[Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ne.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(je,{config:t,onConfigChange:function(e){var t=Object(_.a)(Object(_.a)({},a),e);r(t),n&&n(t)}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(ce.a,{inputRef:o,type:"number",label:"N\xfamero de im\xe1genes",inputProps:{min:1,max:9},value:a.pictureCount,color:"secondary",className:l.fullWidth,onInput:function(){j("pictureCount",parseInt(o.current.value))}})}),Object(p.jsx)(D.a,{item:!0,children:Object(p.jsx)(Dt.a,{control:Object(p.jsx)(Ht.a,{inputRef:s,name:"checkPictureLabel",checked:a.pictureLabel,color:"secondary",onChange:function(){j("pictureLabel",s.current.checked)}}),label:"Numerar im\xe1genes"})})]})},Qn=function(){var e=W(),t=e.projects,n=e.setProjects;return Object(p.jsx)(D.a,{container:!0,justify:"center",children:Object(p.jsx)(D.a,{item:!0,xs:12,lg:10,xl:7,children:Object(p.jsx)(on,{projects:t,setProjects:n})})})},Yn=Object(h.a)((function(){return{fullHeight:{height:"100%"}}})),$n=function(){var e=Object(C.g)(),t=e.projectId,n=e.testId,c=Yn();return Object(p.jsx)(D.a,{container:!0,justify:"center",className:c.fullHeight,children:Object(p.jsx)(D.a,{item:!0,xs:12,className:c.fullHeight,children:Object(p.jsx)(bt,{projectId:t,testId:n})})})},Xn=Object(h.a)((function(){return{fullHeight:{height:"100%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"}}})),Zn=function(){var e=Object(C.g)(),t=e.projectId,n=e.testId,c=Object(C.f)(),i=W().projects,a=Object(u.useState)(function(e){var t="?"===e[0]?e.slice(1):e,n={};return t.split(/&/g).forEach((function(e){var t=e.split("=");n[t[0]]="true"===t[1]||"false"===t[1]?"true"===t[1]:t[1]})),n}(c.location.search)),r=Object(m.a)(a,1)[0],s=Object(u.useState)(),l=Object(m.a)(s,2),j=l[0],d=l[1],b=Object(u.useState)({idx:-1,launching:!1}),f=Object(m.a)(b,2),h=f[0],O=f[1],x=Object(u.useState)([]),g=Object(m.a)(x,2),v=g[0],y=g[1],w=Object(u.useState)(!1),S=Object(m.a)(w,2),k=S[0],I=S[1],N=Xn();Object(u.useEffect)((function(){if(null!=t&&null!=n){var e=i.find((function(e){return e.id===t}));if(null!=e){var c=e.tests.find((function(e){return e.id===n}));if(null!=c){if(r.disorderedChallenges){var a=c.challenges.map((function(e){return Object(_.a)({},e)})).sort((function(e,t){return.5-Math.random()}));d(Object(_.a)(Object(_.a)({},c),{},{challenges:a}))}else d(c);O({idx:0,launching:!0})}}}}),[t,n]);var E=function(){null!=j&&(h.launching?O(Object(_.a)(Object(_.a)({},h),{},{launching:!1})):h.idx<j.challenges.length-1?O({idx:h.idx+1,launching:!0}):(O({idx:-1,launching:!1}),I(!0)))},R=function(e){y([].concat(Object(G.a)(v),[e])),r.autoNext&&E()};return Object(p.jsxs)(D.a,{container:!0,justify:"center",className:N.fullHeight,children:[r.autoNext?void 0:Object(p.jsx)(D.a,{item:!0,xs:1,xl:2}),Object(p.jsxs)(D.a,{item:!0,xs:r.autoNext?12:10,xl:8,className:N.fullHeight,children:[null!=j&&h.launching&&h.idx>=0&&Object(p.jsx)(pt,{challengeType:j.challenges[h.idx].type,challengeNumber:h.idx+1,challengeTotalCount:j.challenges.length,language:j.language,delay:3,onEnd:E}),null!=j&&!h.launching&&h.idx>=0&&Object(p.jsx)(ht,{challenge:j.challenges[h.idx],options:{language:j.language,ignoreTimeLimit:r.ignoreTimeLimit},onSuccess:function(){R(!0)},onError:function(){R(!1)}}),null!=j&&k&&Object(p.jsx)(gt,{test:j,results:v,onBackHome:function(){c.push("/")},onRepeatTest:function(){O({idx:0,launching:!0}),y([]),I(!1)}})]}),r.autoNext?void 0:Object(p.jsx)(D.a,{item:!0,xs:1,xl:2,className:"".concat(N.fullHeight," ").concat(N.centerAll),children:!r.autoNext&&h.idx===v.length-1&&Object(p.jsxs)(L.a,{variant:"extended",size:"large",color:"primary",onClick:E,children:[(null===j||void 0===j?void 0:j.language)===o.En?"Next":"Siguiente","\xa0",Object(p.jsx)(U.a,{children:"navigate_next"})]})})]})},ec=Object(h.a)((function(e){return{mainContainer:{width:"100%",height:"100%",overflow:"hidden"},headerContainer:Object(f.a)({width:"100%",height:"65px"},e.breakpoints.down("sm"),{height:"30px"}),content:Object(f.a)({height:"calc(100% - 105px)",padding:"20px 10px"},e.breakpoints.down("sm"),{height:"calc(100% - 35px)",paddingTop:"5px"})}}));function tc(){var e=ec();return Object(p.jsx)(v.a,{children:Object(p.jsx)(O.a,{theme:R,children:Object(p.jsx)(g,{children:Object(p.jsxs)("div",{className:e.mainContainer,children:[Object(p.jsx)("div",{className:e.headerContainer,children:Object(p.jsx)(A,{})}),Object(p.jsx)("div",{className:e.content,children:Object(p.jsxs)(C.c,{children:[Object(p.jsx)(C.a,{exact:!0,path:"/",children:Object(p.jsx)(Qn,{})}),Object(p.jsx)(C.a,{path:"/designer/:projectId/:testId",children:Object(p.jsx)($n,{})}),Object(p.jsx)(C.a,{path:"/play/:projectId/:testId",children:Object(p.jsx)(Zn,{})})]})})]})})})})}var nc=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,233)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};b.a.render(Object(p.jsx)(j.a.StrictMode,{children:Object(p.jsx)(tc,{})}),document.getElementById("root")),nc()}},[[140,1,2]]]);
//# sourceMappingURL=main.1a2c256f.chunk.js.map