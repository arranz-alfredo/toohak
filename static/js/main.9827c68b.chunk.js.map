{"version":3,"sources":["enums/ChallengeType.ts","enums/PictureType.ts","context/ProjectContext.tsx","theme/index.ts","components/common/MainHeader.tsx","hooks/useProjects.ts","utils/utilValidationTypes.ts","enums/Language.ts","components/Home/TestForm.tsx","enums/FillMethod.ts","components/common/DialogConfirm.tsx","components/Home/DialogTestOptions.tsx","components/Home/TestList.tsx","components/common/JsonLoader.tsx","components/Home/ProjectForm.tsx","components/Home/ProjectList.tsx","views/Home/index.tsx","utils/utilChallenges.tsx","enums/ComponentMode.ts","components/Designer/ChallengeThumbnail.tsx","components/Designer/ChallengeSelector.tsx","components/common/ChallengeQuestion.tsx","components/common/SelectableOption.tsx","components/common/DialogPictureSelector.tsx","components/common/PictureGrid.tsx","components/common/Countdown.tsx","assets/sounds/correct.wav","assets/sounds/incorrect.wav","components/SelectAnswerChallenge/SelectAnswerChallenger.tsx","components/SelectAnswerChallenge/SelectAnswerConfigurator.tsx","components/SelectAnswerChallenge/SelectAnswerChallengeDesigner.tsx","components/TrueOrFalseChallenge/TrueOrFalseChallenger.tsx","components/TrueOrFalseChallenge/TrueOrFalseConfigurator.tsx","components/TrueOrFalseChallenge/TrueOrFalseChallengeDesigner.tsx","components/common/DragableItem.tsx","components/ClassifyChallenge/DropGroup.tsx","components/ClassifyChallenge/ClassifyChallenger.tsx","components/ClassifyChallenge/ClassifyConfigurator.tsx","components/ClassifyChallenge/ClassifyChallengeDesigner.tsx","components/SortChallenge/SortChallenger.tsx","components/SortChallenge/SortConfigurator.tsx","components/SortChallenge/SortChallengeDesigner.tsx","components/FillTableChallenge/TableCell.tsx","components/FillTableChallenge/FillTableChallenger.tsx","components/FillTableChallenge/FillTableConfigurator.tsx","components/FillTableChallenge/FillTableChallengeDesigner.tsx","utils/utilStrings.ts","components/FillGapsChallenge/DropGap.tsx","components/FillGapsChallenge/FillGapsSentence.tsx","components/FillGapsChallenge/DialogFillGapsCandidates.tsx","components/FillGapsChallenge/FillGapsChallenger.tsx","components/FillGapsChallenge/FillGapsConfigurator.tsx","components/FillGapsChallenge/FillGapsChallengeDesigner.tsx","components/Designer/ChallengeDesigner.tsx","components/Designer/TestDesigner.tsx","views/Designer/index.tsx","components/Evaluator/ChallengeEvaluator.tsx","components/Evaluator/ChallengeLauncher.tsx","components/Evaluator/TestResult.tsx","views/Evaluator/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ChallengeType","PictureType","ProjectContext","React","createContext","ProjectContextProvider","children","useState","projects","setProjects","Provider","value","colors","main","light","dark","mainContrast","contrast","errorContrast","theme","createMuiTheme","palette","primary","contrastText","secondary","background","default","paper","error","text","typography","fontSize","MainHeader","AppBar","position","Toolbar","Typography","variant","LOCALSTORAGE_KEY","useProjects","useContext","saveProjects","useEffect","length","strProjects","localStorage","getItem","JSON","parse","newProjects","setItem","stringify","Language","isValidChallenge","challenge","errorMessage","id","type","push","configValidation","config","timeLimit","questionFontSize","SelectAnswer","customConfig","pictureCount","pictureLabel","multiselect","TrueOrFalse","FillGaps","Match","Sort","Classify","FillTable","Crossword","valid","isValidConfig","question","customChallenge","pictures","some","aPicture","None","answers","reduce","acc","current","anAnswer","sentences","hiddenExpressions","items","groups","name","accRow","currentRow","rowIdx","accColumn","currentColumn","columnIdx","firstRowFixed","firstColumnFixed","isValidTest","test","challenges","FillMethod","TestForm","props","onAccept","onCancel","description","language","Es","initialState","formState","setFormState","inputName","useRef","inputDescription","Grid","container","direction","spacing","item","xs","TextField","inputRef","label","fullWidth","onInput","InputLabel","shrink","Select","labelId","toString","onChange","evt","updatedLanguage","target","En","MenuItem","justify","Button","color","onClick","newTest","uuidv4","DialogConfirm","open","acceptButtonText","cancelButtonText","width","onConfirm","onRefuse","Dialog","maxWidth","DialogContent","DialogActions","autoFocus","useStyles","makeStyles","dialogContainer","padding","DialogTestOptions","ignoreTimeLimit","autoNext","checkIgnoreTimeLimit","checkAutoNextChallenge","classes","handleAttributeChange","attribute","DialogTitle","Box","className","FormControlLabel","control","Switch","checked","inline","display","listItemSecondaryAction","visibility","listItem","bottomContainer","marginTop","play","TestList","project","onCreateTest","onDeleteTest","history","useHistory","selectedTest","setSelectedTest","anchorElEdit","setAnchorElEdit","openTestForm","setOpenTestForm","openRemoveTestConfirm","setOpenRemoveTestConfirm","playOptionsState","setPlayOptionsState","Menu","anchorEl","keepMounted","Boolean","onClose","component","Link","to","undefined","tests","List","map","aTest","ListItem","button","alignItems","ListItemText","ListItemSecondaryAction","IconButton","title","projectId","testId","openOptions","Icon","stopPropagation","currentTarget","handleEditClick","Divider","testOptions","uploadInput","JsonLoader","onDataLoaded","onError","inputImport","ref","accept","multiple","event","files","file","reader","FileReader","readAsText","onloadend","e","newProject","result","err","style","htmlFor","ProjectForm","heading","pxToRem","secondaryHeading","gridContainer","gridItems","flexGrow","messageControl","backgroundColor","ProjectList","expandedProject","setExpandedProject","openProjectForm","setOpenProjectForm","openRemoveProjectConfirm","setOpenRemoveProjectConfirm","selectedProject","setSelectedProject","openMessage","setOpenMessage","messageText","setMessageText","handleCreateTest","theProject","find","aProject","updating","updatedProjects","updatedTests","handleDeleteTest","filter","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","SnackbarContent","message","isValidProject","Accordion","expanded","isExpanded","handleExpandChange","AccordionSummary","element","document","createElement","setAttribute","encodeURIComponent","replace","body","appendChild","click","removeChild","handleExportProjectClick","AccordionDetails","Home","ComponentMode","getChallengeTypeDescription","TheOddOne","getChallengeTypeIcon","size","getDefaultChallengeConfig","defaultChallengeConfig","answerFontSize","textFontSize","fillMethod","Writing","itemsFontSize","itemCount","groupCount","rowCount","columnCount","fullHeight","height","headerContainer","overflow","contentContainer","actionContainer","descriptionContainer","whiteSpace","textOverflow","tooltipRow","statusContainer","justifyContent","ChallengeThumbnail","selected","compact","onDelete","validation","setValidation","Card","elevation","CardActionArea","CardHeader","root","content","avatar","subheader","action","Tooltip","arrow","aMessage","messageIdx","CardContent","noWrap","CardActions","Chip","icon","overflowY","ChallengeSelector","compactList","onSelect","selectedChallenge","setSelectedChallenge","handleThumbnailClick","handleThumbnailDelete","aChallenge","idx","inputContainer","input","ChallengeQuestion","mode","questionText","setQuestionText","inputQuestion","inputProps","textAlign","lineHeight","InputProps","readOnly","Play","disableUnderline","placeholder","multiline","rowsMax","option","optionActionArea","optionInput","optionInnerInput","cursor","optionIcon","selector","SelectableOption","showResults","onTextChange","onValidChange","optionState","setOptionState","inputTextOption","radioOption","checkOption","borderStyle","borderWidth","borderColor","Design","startAdornment","InputAdornment","endAdornment","Checkbox","newState","Radio","ev","preventDefault","justifySelf","DialogPictureForm","picture","inputUrl","data","newPicture","Url","pic","maxHeight","PictureGrid","onPicturesChange","pictureDialogState","setPictureDialogState","pictureItemSize","setPictureItemSize","openDialog","selectedPicture","newPic","pictureIdx","selectedPictureIdx","border","src","alt","Fab","handleAddPictureClick","Countdown","time","stopTimer","onTimeUp","timeRemaining","setTimeRemaining","stop","setStop","timeoutId","setTimeout","clearTimeout","CircularProgress","Math","round","top","left","bottom","right","titleContainer","pictureContainer","answerContainer","paddingTop","optionContainer","centerAll","SelectAnswerChallenger","options","onChallengeChange","onSuccess","setStopTimer","selectedAnswers","setSelectedAnswers","highlightResults","setHighlightResults","useSound","correct","playCorrect","incorrect","playIncorrect","handleAnswerChange","updatedAnswer","updatedAnswers","handlerOptionClick","answerIdx","theIndex","findIndex","anAnswerIdx","showResult","success","newTitle","newPictures","disabled","indexOf","handleCheckClick","newText","SelectAnswerConfigurator","onConfigChange","formData","setFormData","inputTimeLimit","inputQuestionFontSize","inputPictureCount","checkPictureLabel","inputAnswerFontSize","checkMultiselect","handleConfigParameterChange","parameter","newConfig","min","parseInt","max","SelectAnswerChallengeDesigner","updatedChallenge","Array","from","slice","readjustPictures","validPresent","readjustValidAnswers","TrueOrFalseChallenger","answer","TrueOrFalseConfigurator","TrueOrFalseChallengeDesigner","borderRadius","DragableItem","iconButton","useDrag","collect","monitor","opacity","isDragging","drag","itemsContainer","DropGroup","validItems","onTitleChange","onItemsChange","droppedItems","onDrop","useDrop","drop","isOver","canDrop","groupState","setGroupState","inputTitle","inputItem","addValidItem","updatedItems","anItem","itemIdx","handleRemoveValidItem","onKeyPress","code","aDroppedItem","classifyContainer","optionsContainer","groupsContainer","reorderItems","list","sort","random","ClassifyChallenger","aGroup","groupName","initialClassifyState","classifyState","setClassifyState","draggableItems","setDragabbleItems","isDropped","itemName","DndProvider","backend","HTML5Backend","newName","groupIdx","updatedName","updatedGroups","handleNameChange","newItems","handleItemsChange","auxGroup","droppedItem","newDroppedItems","handleDrop","accGroups","currentGroup","correctItems","accItems","currentItem","theGroup","ClassifyConfigurator","inputItemsFontSize","inputGroupCount","ClassifyChallengeDesigner","newGroups","readjustGroups","SortChallenger","SortConfigurator","inputItemCount","SortChallengeDesigner","readjustItems","fixed","invalid","TableCell","cell","onCellChange","inputText","hidden","marginLeft","FillTableChallenger","aRow","aColumn","initialFillTableState","fillTableState","setFillTableState","newCell","auxRowIdx","auxColumnIdx","handleCellChange","FillTableConfigurator","inputRowCount","checkFirstRowFixed","inputColumnCount","checkFirstColumnFixed","FillTableChallengeDesigner","auxColumn","newRows","newColumns","readjustTable","splitSentence","split","joinSentence","textParts","join","checkEqual","stringA","stringB","checkCapitalLetters","checkAccentMarks","strA","strB","toLowerCase","DropGap","borderBottom","word","FillGapsSentence","sentence","onSentenceChange","onSentenceRemove","onAnswersChange","currentIdx","words","forEach","anExp","initPosition","hiddenIdx","wordCount","sentenceParts","parts","setParts","handlePartChange","partIdx","updatedParts","aPart","getPartStyle","validValues","aValidValue","aWord","wordIdx","anExpression","updatedHiddenExpressions","console","log","alternatives","completeArrayFrom","handleWordClick","droppedText","DialogFillGapsCandidates","candidates","inputCandidate","aCandidate","candidateIdx","edge","handleDeleteCandidate","minHeight","sentencesContainer","paddingLeft","aSentence","sentenceIdx","aHiddenExpression","hiddenExpressionIdx","sentenceText","hiddenExpression","FillGapsChallenger","inputSentence","initialFillGapsState","fillGapsState","setFillGapsState","openCandidatesDialog","setOpenCandidatesDialog","selectedExpression","setSelectedExpression","expressionInSentence","expression","newCandidates","updatedSentences","hiddenExpresionIdx","Dragging","sentencesAnswer","aSentenceAnswer","hiddenExpIdx","updatedSentence","handleSentenceChange","aFillGapsState","handleSentenceRemove","updatedState","handleSentenceAnswer","newSentence","addSentence","every","el","accSentences","currentSentence","correctExpressions","accExpressions","currentExpression","expressionIdx","hiddenAnswer","anAlternative","FillGapsConfigurator","inputTextFontSize","inputFillMethod","FormControl","FillGapsChallengeDesigner","ChallengeDesigner","handleChallengeChange","listContainer","paddingRight","challengesContainer","overflowX","listStyle","boxShadow","webkitBoxShadow","outline","challengeSelector","TestDesigner","setTest","setCompactList","setAnchorEl","deletedChallenge","setDeletedChallenge","openRemoveChallengeConfirm","setOpenRemoveChallengeConfirm","handleNewChallengeOptionClick","newChallenge","defaultChallenge","getDefaultChallenge","handleCloseNewChallengeMenu","updatedChallenges","ToggleButtonGroup","exclusive","newListMode","ToggleButton","ListItemIcon","Designer","useParams","ChallengeEvaluator","handlerSucessChallenge","handlerErrorChallenge","ChallengeLauncher","challengeType","challengeNumber","challengeTotalCount","delay","onEnd","LinearProgress","timeline","transform","timelineContentContainer","timelineContent","timelineIcon","TestResult","results","onBackHome","onRepeatTest","aResult","Evaluator","qs","qsAux","aParam","paramParts","parseQueryString","location","search","launching","currentChallengeState","setCurrentChallengeState","setResults","setShowResult","theTest","next","handleResponse","mainContainer","flexDirection","margin","App","ThemeProvider","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9827c68b.chunk.js","sourcesContent":["export enum ChallengeType {\r\n    SelectAnswer = 'SA',\r\n    TrueOrFalse = 'TF',\r\n    FillGaps = 'FG',\r\n    Match = 'MT',\r\n    Sort = 'SO',\r\n    Classify = 'CL',\r\n    FillTable = 'FT',\r\n    TheOddOne = 'OO',\r\n    Crossword = 'CW'\r\n}","export enum PictureType {\r\n    None = 'NONE',\r\n    Url = 'URL',\r\n    Base64 = 'BASE64'\r\n}","import React, { useState } from 'react';\r\n\r\n/**\r\n * Contexto para almacenar los proyectos importados\r\n */\r\nexport const ProjectContext = React.createContext<any | React.Dispatch<any>>([]);\r\n\r\ntype Props = {\r\n    children: React.ReactNode\r\n}\r\n\r\n/** Proveedor del contexto de proyectos */\r\nexport const ProjectContextProvider = ({ children }: Props) => {\r\n    // Hook para mantener el estado del contexto\r\n    const [projects, setProjects] = useState<any | React.Dispatch<any>>([]);\r\n\r\n    return (\r\n        <ProjectContext.Provider value={{ projects, setProjects }}>\r\n            {children}\r\n        </ProjectContext.Provider>\r\n    );\r\n};\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const colors = {\r\n    primary: {\r\n        main: '#2196f3',\r\n        light: '#6ec6ff',\r\n        dark: '#0069c0'\r\n    },\r\n    secondary: {\r\n        main: '#e91e63',\r\n        light: '#ff6090',\r\n        dark: '#b0003a'\r\n    },\r\n    error: '#f44336',\r\n    background: {\r\n        main: '#2196f3',\r\n        light: '#ffffff',\r\n        dark: '#0069c0'\r\n    },\r\n    font: {\r\n        main: '#000000',\r\n        mainContrast: \"#ffffff\",\r\n        light: '#000000',\r\n        dark: '#888888',\r\n        contrast: '#6ec6ff',\r\n        errorContrast: \"#ffffff\"\r\n    },\r\n    action: \"#4caf50\"\r\n};\r\n\r\nexport const fontSize = {\r\n    s: 10,\r\n    m: 12,\r\n    l: 16\r\n};\r\n\r\nexport const theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: colors.primary.main,\r\n            contrastText: colors.font.mainContrast,\r\n            light: colors.primary.light\r\n        },\r\n        secondary: {\r\n            main: colors.secondary.main,\r\n            contrastText: colors.font.main,\r\n            light: colors.secondary.light\r\n        },\r\n        background: {\r\n            default: colors.background.main,\r\n            paper: colors.background.light\r\n        },\r\n        error: {\r\n            main: colors.error,\r\n        },\r\n        text: {\r\n            primary: colors.font.main,\r\n            secondary: colors.font.dark\r\n        }\r\n    },\r\n    typography: {\r\n        fontSize: fontSize.m,\r\n    }\r\n});","import React, { Fragment } from 'react';\r\nimport { AppBar, Toolbar, Typography } from '@material-ui/core';\r\n\r\nexport const MainHeader: React.FC = () => (\r\n    <Fragment>\r\n        <AppBar position='static'>\r\n            <Toolbar>\r\n                <Typography variant='h5'>\r\n                    !toohaK\r\n                </Typography>\r\n            </Toolbar>\r\n        </AppBar>\r\n    </Fragment>\r\n);\r\n","import { useContext, useEffect } from 'react';\r\nimport { ProjectContext } from '../context/ProjectContext';\r\nimport { Project } from '../types/Project';\r\n\r\nconst LOCALSTORAGE_KEY = 'projects';\r\n\r\n/**\r\n * Hook para la gestin del mapa\r\n */\r\nexport const useProjects = (): any => {\r\n    // Contexto del mapa\r\n    const { projects, setProjects: saveProjects } = useContext(ProjectContext);\r\n\r\n    useEffect(() => {\r\n        if (projects == null || projects.length === 0) {\r\n            const strProjects = localStorage.getItem(LOCALSTORAGE_KEY);\r\n            if (strProjects != null && strProjects !== '') {\r\n                saveProjects(JSON.parse(strProjects));\r\n            } else {\r\n                saveProjects([]);\r\n            }\r\n        }\r\n    });\r\n\r\n    const setProjects = (newProjects: Project[]) => {\r\n        localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(newProjects));\r\n        saveProjects(newProjects);\r\n    };\r\n\r\n    return { projects, setProjects };\r\n};\r\n","import { ChallengeType } from '../enums/ChallengeType';\r\nimport { PictureType } from '../enums/PictureType';\r\nimport { Challenge, ChallengeConfig, ChallengePicture } from '../types/Challenge';\r\nimport { ClassifyChallenge, ClassifyChallengeGroup } from '../types/ClassifyChallenge';\r\nimport { FillGapsChallenge, FillGapsChallengeSentence } from '../types/FillGapsChallenge';\r\nimport { FillTableChallenge, FillTableChallengeCell } from '../types/FillTableChallenge';\r\nimport { Project } from '../types/Project';\r\nimport { SelectAnswerChallenge, SelectAnswerChallengeAnswer, SelectAnswerChallengeConfig } from '../types/SelectAnswerChallenge';\r\nimport { SortChallenge } from '../types/SortChallenge';\r\nimport { Test } from '../types/Test';\r\n\r\nexport interface Validation {\r\n    valid: boolean,\r\n    errorMessage: string[]\r\n}\r\n\r\nexport const isValidConfig = (type: ChallengeType, config: ChallengeConfig): Validation => {\r\n    const errorMessage: string[] = [];\r\n\r\n    if (config?.timeLimit == null || config?.timeLimit <= 0) { errorMessage.push('El tiempo lmite debe ser mayor de 0') ;}\r\n    if (config?.questionFontSize == null || config?.questionFontSize <= 0) { errorMessage.push('El tamao de fuente del titulo debe ser mayor de 0'); }\r\n\r\n    switch (type) {\r\n        case ChallengeType.SelectAnswer: {\r\n            const customConfig = config as SelectAnswerChallengeConfig;\r\n            if (customConfig?.pictureCount == null || customConfig?.pictureCount <= 0) { errorMessage.push('El nmero de imgenes debe ser mayor de 0'); }\r\n            if (customConfig?.pictureLabel == null) { errorMessage.push('Error en indicador de etiquetado de imgenes'); }\r\n            if (customConfig?.multiselect == null) { errorMessage.push('Error en indicador de seleccion mltiple'); }\r\n            break;\r\n        }\r\n        case ChallengeType.TrueOrFalse:\r\n            break;\r\n        case ChallengeType.FillGaps:\r\n            break;\r\n        case ChallengeType.Match:\r\n            break;\r\n        case ChallengeType.Sort:\r\n            break;\r\n        case ChallengeType.Classify:\r\n            break;\r\n        case ChallengeType.FillTable:\r\n            break;\r\n        case ChallengeType.Crossword:\r\n            break;\r\n    }\r\n    return {\r\n        valid: errorMessage.length === 0,\r\n        errorMessage\r\n    };\r\n};\r\n\r\nexport const isValidChallenge = (challenge: Challenge): Validation => {\r\n    let errorMessage: string[] = [];\r\n\r\n    if (challenge?.id == null || challenge?.type == null) { errorMessage.push('Datos internos incorrectos'); }\r\n    const configValidation = isValidConfig(challenge?.type, challenge?.config);\r\n    if (!configValidation.valid) { errorMessage = [...errorMessage, ...configValidation.errorMessage]; }\r\n    if (challenge?.question == null || challenge?.question === '') { errorMessage.push('Se debe rellenar el enunciado / pregunta'); }\r\n\r\n    switch (challenge.type) {\r\n        case ChallengeType.SelectAnswer: {\r\n            const customChallenge = challenge as SelectAnswerChallenge;\r\n            if (customChallenge.config.pictureCount > 1\r\n                && customChallenge.pictures.some((aPicture: ChallengePicture) => aPicture.type === PictureType.None)\r\n            ) {\r\n                errorMessage.push('Hay imgenes vacas');\r\n            }\r\n            if(!customChallenge.answers.reduce(\r\n                (acc: boolean, current: SelectAnswerChallengeAnswer) => acc && current.text != null && current.text !== '',\r\n                true\r\n            )) {\r\n                errorMessage.push('Hay alguna respuesta vaca');\r\n            }\r\n            if(!customChallenge.answers.some((anAnswer: SelectAnswerChallengeAnswer) => anAnswer.valid)) {\r\n                errorMessage.push('Debe marcarse al menos una respuesta como vlida');\r\n            }\r\n            break;\r\n        }\r\n        case ChallengeType.TrueOrFalse:\r\n            break;\r\n        case ChallengeType.FillGaps:{\r\n            const customChallenge = challenge as FillGapsChallenge;\r\n            if(!customChallenge.sentences.reduce(\r\n                (acc: boolean, current: FillGapsChallengeSentence) => acc && current != null && current.text !== '',\r\n                true\r\n            )) {\r\n                errorMessage.push('Hay elementos sin texto');\r\n            }\r\n            if (customChallenge.sentences.length === 0) {\r\n                errorMessage.push('Debe haber al menos una frase');\r\n            }\r\n            if(!customChallenge.sentences.reduce(\r\n                (acc: boolean, current: FillGapsChallengeSentence) => (\r\n                    acc\r\n                    && current != null\r\n                    && current.hiddenExpressions.length > 0\r\n                ),\r\n                true\r\n            )) {\r\n                errorMessage.push('Hay frases sin palabras ocultas');\r\n            }\r\n            break;\r\n        }\r\n        case ChallengeType.Match:\r\n            break;\r\n        case ChallengeType.Sort: {\r\n            const customChallenge = challenge as SortChallenge;\r\n            if(!customChallenge.items.reduce(\r\n                (acc: boolean, current: string) => acc && current != null && current !== '',\r\n                true\r\n            )) {\r\n                errorMessage.push('Hay elementos sin texto');\r\n            }\r\n            break;\r\n        }\r\n        case ChallengeType.Classify: {\r\n            const customChallenge = challenge as ClassifyChallenge;\r\n            if(!customChallenge.groups.reduce(\r\n                (acc: boolean, current: ClassifyChallengeGroup) => acc && current.name != null && current.name !== '',\r\n                true\r\n            )) {\r\n                errorMessage.push('Todos los grupos deben tener un ttulo');\r\n            }\r\n            break;\r\n        }\r\n        case ChallengeType.FillTable: {\r\n            const customChallenge = challenge as FillTableChallenge;\r\n            if(!customChallenge.items.reduce(\r\n                (accRow: boolean, currentRow: FillTableChallengeCell[], rowIdx: number) => (\r\n                    accRow\r\n                    && currentRow.reduce(\r\n                        (accColumn: boolean, currentColumn: FillTableChallengeCell, columnIdx: number) => (\r\n                            accColumn\r\n                            && (\r\n                                (\r\n                                    customChallenge.config.firstRowFixed\r\n                                    && rowIdx === 0\r\n                                    && customChallenge.config.firstColumnFixed\r\n                                    && columnIdx === 0\r\n                                )\r\n                                || currentColumn.text !== ''\r\n                            )\r\n                        ),\r\n                        true\r\n                    )\r\n                ),\r\n                true\r\n            )) {\r\n                errorMessage.push('Todas las celdas deben estar rellenas');\r\n            }\r\n            break;\r\n            break;\r\n        }\r\n        case ChallengeType.Crossword:\r\n            break;\r\n    }\r\n    return {\r\n        valid: errorMessage.length === 0,\r\n        errorMessage\r\n    };\r\n};\r\n\r\nexport const isValidTest = (test: Test): boolean => {\r\n    return test != null\r\n        && test.id != null\r\n        && test.name != null\r\n        && test.challenges != null\r\n        && test.challenges.reduce(\r\n            (acc: boolean, current: Challenge) => acc && isValidChallenge(current).valid,\r\n            true\r\n        );\r\n};\r\n\r\nexport const isValidProject = (project: Project): boolean => {\r\n    return project != null\r\n        && project.id != null\r\n        && project.name != null\r\n        && project.tests != null\r\n        && project.tests.reduce(\r\n            (acc: boolean, current: Test) => acc && isValidTest(current),\r\n            true\r\n        );\r\n};","export enum Language {\r\n    Es = 'ES',\r\n    En = 'EN'\r\n}\r\n","import React, { useRef, useState } from 'react';\r\nimport { Button, Grid, InputLabel, MenuItem, Select, TextField } from '@material-ui/core';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { Language } from '../../enums/Language';\r\nimport { Test } from '../../types/Test';\r\n\r\ninterface TestState {\r\n    name: string,\r\n    description: string,\r\n    language: Language\r\n}\r\n\r\nconst initialState = (test?: Test): TestState => {\r\n    if (test != null) {\r\n        return {\r\n            name: test.name,\r\n            description: test.description || '',\r\n            language: test.language || Language.Es\r\n        };\r\n    }\r\n    return {\r\n        name: '',\r\n        description: '',\r\n        language: Language.Es\r\n    };\r\n};\r\n\r\ninterface TestFormProps {\r\n    test?: Test,\r\n    onAccept: (newTest: Test) => void,\r\n    onCancel: () => void\r\n}\r\n\r\nexport const TestForm: React.FC<TestFormProps> = (props: TestFormProps) => {\r\n    const { test, onAccept, onCancel } = props;\r\n\r\n    const [formState, setFormState] = useState<TestState>(initialState(test));\r\n\r\n    const inputName = useRef({} as HTMLInputElement);\r\n    const inputDescription = useRef({} as HTMLInputElement);\r\n\r\n    const handleNameChange = () => {\r\n        setFormState({\r\n            ...formState,\r\n            name: inputName.current.value\r\n        });\r\n    };\r\n\r\n    const handleDescriptionChange = () => {\r\n        setFormState({\r\n            ...formState,\r\n            description: inputDescription.current.value\r\n        });\r\n    };\r\n\r\n    const handleLanguageChange = (evt: React.ChangeEvent<{ name?: string | undefined, value: unknown}>) => {\r\n        const updatedLanguage = evt.target.value === Language.Es.toString() ? Language.Es : Language.En;\r\n        setFormState({\r\n            ...formState,\r\n            language: updatedLanguage\r\n        });\r\n    };\r\n\r\n    const handleAcceptClick = () => {\r\n        const newTest: Test = test ?\r\n            {\r\n                ...test,\r\n                name: formState.name,\r\n                description: formState.description,\r\n                language: formState.language\r\n            }\r\n            : {\r\n                id: uuidv4(),\r\n                name: formState.name,\r\n                description: formState.description,\r\n                language: formState.language,\r\n                challenges: []\r\n            };\r\n\r\n        onAccept(newTest);\r\n    };\r\n\r\n    const handleCancelClick = () => {\r\n        onCancel();\r\n    };\r\n\r\n    return (\r\n        <Grid\r\n            container\r\n            direction='column'\r\n            spacing={4}\r\n        >\r\n            <Grid item xs={12}>\r\n                <TextField\r\n                    inputRef={inputName}\r\n                    id='newTestNameInput'\r\n                    label='Nombre'\r\n                    fullWidth\r\n                    value={formState.name}\r\n                    onInput={handleNameChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <TextField\r\n                    inputRef={inputDescription}\r\n                    id='newTestNameInput'\r\n                    label='Descripcin'\r\n                    fullWidth\r\n                    value={formState.description}\r\n                    onInput={handleDescriptionChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <InputLabel shrink id=\"label-language\">\r\n                    Idioma\r\n                </InputLabel>\r\n                <Select\r\n                    labelId=\"label-language\"\r\n                    id='newTestLanguageInput'\r\n                    label='Idioma'\r\n                    fullWidth\r\n                    value={formState.language.toString()}\r\n                    onChange={handleLanguageChange}\r\n                >\r\n                    <MenuItem value={Language.Es.toString()}>Espaol</MenuItem>\r\n                    <MenuItem value={Language.En.toString()}>Ingls</MenuItem>\r\n                </Select>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <Grid container justify='flex-end' spacing={1}>\r\n                    <Grid item>\r\n                        <Button variant='contained' color='primary' onClick={handleAcceptClick}>Aceptar</Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Button color='primary' onClick={handleCancelClick}>Cancelar</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","export enum FillMethod {\r\n    Writing = 'W',\r\n    Dragging = 'D'\r\n}","import React from 'react';\r\nimport { Button, Dialog, DialogActions, DialogContent, Grid, Typography } from '@material-ui/core';\r\n\r\ninterface DialogConfirmProps {\r\n    open: boolean,\r\n    text: string,\r\n    acceptButtonText?: string,\r\n    cancelButtonText?: string,\r\n    width?: 'xs' | 'sm' | 'md' | 'lg' | 'xl',\r\n    onConfirm: () => void,\r\n    onRefuse: () => void\r\n}\r\n\r\nexport const DialogConfirm: React.FC<DialogConfirmProps> = (props: DialogConfirmProps) => {\r\n    const {open, text, acceptButtonText, cancelButtonText, width, onConfirm, onRefuse} = props;\r\n\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            fullWidth\r\n            maxWidth={ width ? width : 'sm' }\r\n        >\r\n            <DialogContent>\r\n                <Grid container justify='center'>\r\n                    <Grid item>\r\n                        <Typography variant='button'>{text}</Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button autoFocus onClick={onConfirm} color='primary' variant='contained'>\r\n                    { acceptButtonText ? acceptButtonText : 'Aceptar' }\r\n                </Button>\r\n                <Button onClick={onRefuse} color='primary'>\r\n                    { cancelButtonText ? cancelButtonText : 'Cancelar' }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n","import React, { useRef, useState } from 'react';\r\nimport { Box, Button, Dialog, DialogTitle, FormControlLabel, Grid, makeStyles, Switch } from '@material-ui/core';\r\nimport { TestOptions } from '../../types/Test';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    dialogContainer: {\r\n        padding: '20px'\r\n    },\r\n}));\r\n\r\ninterface DialogTestOptionsProps {\r\n    open: boolean,\r\n    onAccept: (options: TestOptions) => void,\r\n    onCancel: () => void\r\n}\r\n\r\nexport const DialogTestOptions: React.FC<DialogTestOptionsProps> = (props: DialogTestOptionsProps) => {\r\n    const {open, onAccept, onCancel} = props;\r\n\r\n    const [formState, setFormState] = useState<TestOptions>({ ignoreTimeLimit: false, autoNext: true });\r\n\r\n    const checkIgnoreTimeLimit = useRef({} as HTMLInputElement);\r\n    const checkAutoNextChallenge = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleAttributeChange = (attribute: string, value: boolean) => {\r\n        setFormState({\r\n            ...formState,\r\n            [attribute]: value\r\n        });\r\n    };\r\n\r\n    const handleAcceptClick = () => {\r\n        onAccept(formState);\r\n    };\r\n\r\n    const handleCancelClick = () => {\r\n        onCancel();\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            fullWidth\r\n            maxWidth='sm'\r\n        >\r\n            <DialogTitle>Opciones del cuestionario</DialogTitle>\r\n            <Box className={classes.dialogContainer}>\r\n                <Grid\r\n                    container\r\n                    direction='column'\r\n                    spacing={2}\r\n                >\r\n                    <Grid item xs={12}>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    inputRef={checkIgnoreTimeLimit}\r\n                                    name='checkMultiselect'\r\n                                    checked={formState.ignoreTimeLimit}\r\n                                    color='secondary'\r\n                                    onChange={() => { handleAttributeChange('ignoreTimeLimit', checkIgnoreTimeLimit.current.checked); }}\r\n                                />\r\n                            }\r\n                            label='Desactivar tiempo lmite de las preguntas'\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    inputRef={checkAutoNextChallenge}\r\n                                    name='checkMultiselect'\r\n                                    checked={formState.autoNext}\r\n                                    color='secondary'\r\n                                    onChange={() => { handleAttributeChange('autoNext', checkAutoNextChallenge.current.checked); }}\r\n                                />\r\n                            }\r\n                            label='Avanzar automticamente a la siguiente pregunta'\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Grid container justify='flex-end' spacing={1}>\r\n                            <Grid item>\r\n                                <Button variant='contained' color='primary' onClick={handleAcceptClick}>Aceptar</Button>\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <Button color='primary' onClick={handleCancelClick}>Cancelar</Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </Box>\r\n        </Dialog>\r\n    );\r\n};\r\n","import React, { Fragment, useState } from 'react';\r\nimport { Box, Button, Dialog, DialogTitle, Divider, Grid, Icon, IconButton, List, ListItem, ListItemSecondaryAction, ListItemText, makeStyles, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { Test, TestOptions } from '../../types/Test';\r\nimport { colors } from '../../theme';\r\nimport { Project } from '../../types/Project';\r\nimport { isValidTest } from '../../utils/utilValidationTypes';\r\nimport { TestForm } from './TestForm';\r\nimport { DialogConfirm } from '../common/DialogConfirm';\r\nimport { DialogTestOptions } from './DialogTestOptions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    inline: {\r\n        display: 'inline',\r\n    },\r\n    listItemSecondaryAction: {\r\n        visibility: 'hidden'\r\n    },\r\n    listItem: {\r\n        '&:hover $listItemSecondaryAction': {\r\n            visibility: 'inherit'\r\n        }\r\n    },\r\n    bottomContainer: {\r\n        marginTop: '10px'\r\n    },\r\n    play: {\r\n        color: colors.action\r\n    },\r\n    dialogContainer: {\r\n        padding: '20px'\r\n    }\r\n}));\r\n\r\ninterface PlayOptionsState {\r\n    projectId?: string,\r\n    testId?: string,\r\n    openOptions: boolean\r\n}\r\ninterface TestListProps {\r\n    project: Project,\r\n    onCreateTest: (projectId: string, test: Test) => void,\r\n    onDeleteTest: (projectId: string, test: Test) => void\r\n}\r\n\r\nexport const TestList: React.FC<TestListProps> = (props: TestListProps) => {\r\n    const { project, onCreateTest, onDeleteTest } = props;\r\n\r\n    const history = useHistory();\r\n\r\n    const [selectedTest, setSelectedTest] = React.useState<Test | undefined>();\r\n    const [anchorElEdit, setAnchorElEdit] = React.useState<Element | null>(null);\r\n    const [openTestForm, setOpenTestForm] = useState<boolean>(false);\r\n    const [openRemoveTestConfirm, setOpenRemoveTestConfirm] = useState<boolean>(false);\r\n    const [playOptionsState, setPlayOptionsState] = useState<PlayOptionsState>();\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleCreateTestClick = () => {\r\n        setOpenTestForm(true);\r\n    };\r\n\r\n    const handleTestFormAccept = (newTest: Test) => {\r\n        onCreateTest(project.id, newTest);\r\n        setSelectedTest(undefined);\r\n        setOpenTestForm(false);\r\n    };\r\n\r\n    const handleTestFormCancel = () => {\r\n        setSelectedTest(undefined);\r\n        setOpenTestForm(false);\r\n    };\r\n\r\n    const handleEditClick = (evt: React.MouseEvent<HTMLButtonElement>, test: Test) => {\r\n        setSelectedTest(test);\r\n        setAnchorElEdit(evt.currentTarget);\r\n    };\r\n\r\n    const handleCloseEditMenu = () => {\r\n        setAnchorElEdit(null);\r\n    };\r\n\r\n    const handleEditDataClick = () => {\r\n        setAnchorElEdit(null);\r\n        setOpenTestForm(true);\r\n    };\r\n\r\n    const handleRemoveTestClick = (test: Test) => {\r\n        setSelectedTest(test);\r\n        setOpenRemoveTestConfirm(true);\r\n    };\r\n\r\n    const handleConfirmRemoveTest = () => {\r\n        if (selectedTest != null) {\r\n            onDeleteTest(project.id, selectedTest);\r\n        }\r\n        setSelectedTest(undefined);\r\n        setOpenRemoveTestConfirm(false);\r\n    };\r\n\r\n    const handleRefuseRemoveTest = () => {\r\n        setSelectedTest(undefined);\r\n        setOpenRemoveTestConfirm(false);\r\n    };\r\n\r\n    const handlePlayClick = (projectId: string, testId: string) => {\r\n        setPlayOptionsState({\r\n            projectId,\r\n            testId,\r\n            openOptions: true\r\n        });\r\n    };\r\n\r\n    const handleAcceptPlayOptions = (testOptions: TestOptions) => {\r\n        history.push(`/play/${playOptionsState?.projectId}/${playOptionsState?.testId}?ignoreTimeLimit=${testOptions.ignoreTimeLimit}&autoNext=${testOptions.autoNext}`, playOptionsState);\r\n        setPlayOptionsState({\r\n            openOptions: false\r\n        });\r\n    };\r\n\r\n    const handleCancelPlayOptions = () => {\r\n        setPlayOptionsState({\r\n            openOptions: false\r\n        });\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <Menu\r\n                id=\"addNewMenu\"\r\n                anchorEl={anchorElEdit}\r\n                keepMounted\r\n                open={Boolean(anchorElEdit)}\r\n                onClose={handleCloseEditMenu}\r\n            >\r\n                <MenuItem onClick={handleEditDataClick}>\r\n                    <Typography variant=\"subtitle2\">\r\n                        Editar datos generales\r\n                    </Typography>\r\n                </MenuItem>\r\n                <MenuItem component={Link} to={`/designer/${project.id}/${selectedTest?.id}`}>\r\n                    <Typography variant=\"subtitle2\">\r\n                        Editar preguntas\r\n                    </Typography>\r\n                </MenuItem>\r\n            </Menu>\r\n            <Dialog\r\n                open={openTestForm}\r\n                fullWidth\r\n                maxWidth='sm'\r\n            >\r\n                <DialogTitle>Cuestionario</DialogTitle>\r\n                <Box className={classes.dialogContainer}>\r\n                    <TestForm\r\n                        test={selectedTest}\r\n                        onAccept={handleTestFormAccept}\r\n                        onCancel={handleTestFormCancel}\r\n                    />\r\n                </Box>\r\n            </Dialog>\r\n            <DialogConfirm\r\n                open={openRemoveTestConfirm}\r\n                text='Seguro que deseas eliminar el proyecto?'\r\n                width='xs'\r\n                onConfirm={handleConfirmRemoveTest}\r\n                onRefuse={handleRefuseRemoveTest}\r\n            />\r\n            <Grid container>\r\n                <Grid item xs={12}>\r\n                    {\r\n                        project.tests.length === 0\r\n                        && <Typography>No hay cuestionarios</Typography>\r\n                    }\r\n                    {\r\n                        project.tests.length > 0\r\n                        && <List>\r\n                            {\r\n                                project.tests.map((aTest: Test) => (\r\n                                    <Fragment key={`fragment_${aTest.id}`}>\r\n                                        <ListItem\r\n                                            button\r\n                                            key={aTest.id}\r\n                                            alignItems='flex-start'\r\n                                            classes={{ container: classes.listItem }}\r\n                                        >\r\n                                            <Grid container>\r\n                                                <Grid item xs={6}>\r\n                                                    <ListItemText\r\n                                                        primary={\r\n                                                            aTest.name\r\n                                                        }\r\n                                                        secondary={\r\n                                                            <Typography\r\n                                                                component='span'\r\n                                                                variant='body2'\r\n                                                                className={classes.inline}\r\n                                                                color='textPrimary'\r\n                                                            >\r\n                                                                {aTest.description}\r\n                                                            </Typography>\r\n                                                        }\r\n                                                    />\r\n                                                </Grid>\r\n                                                <Grid item xs={2}>\r\n                                                    <ListItemText\r\n                                                        secondary={`${aTest.challenges.length} pregunta${aTest.challenges.length !== 1 ? 's' : ''}`}\r\n                                                    />\r\n                                                </Grid>\r\n                                            </Grid>\r\n                                            <ListItemSecondaryAction className={classes.listItemSecondaryAction}>\r\n                                                <Grid container>\r\n                                                    <Grid item>\r\n                                                        {\r\n                                                            isValidTest(aTest) ? (\r\n                                                                <IconButton title='Jugar!' onClick={() => { handlePlayClick(project.id, aTest.id); }}>\r\n                                                                    <Icon className={classes.play}>play_circle_filled</Icon>\r\n                                                                </IconButton>\r\n                                                            ) : (\r\n                                                                <IconButton title='Errores en el cuestionario'>\r\n                                                                    <Icon color='error'>error</Icon>\r\n                                                                </IconButton>\r\n                                                            )\r\n                                                        }\r\n                                                    </Grid>\r\n                                                    <Grid item>\r\n                                                        <IconButton title='Editar' onClick={(evt: React.MouseEvent<HTMLButtonElement>) => {\r\n                                                            evt.stopPropagation();\r\n                                                            handleEditClick(evt, aTest);\r\n                                                        }}>\r\n                                                            <Icon color='primary'>edit</Icon>\r\n                                                        </IconButton>\r\n                                                    </Grid>\r\n                                                    <Grid item>\r\n                                                        <IconButton title='Eliminar' onClick={(evt) => {\r\n                                                            evt.stopPropagation();\r\n                                                            handleRemoveTestClick(aTest);\r\n                                                        }}>\r\n                                                            <Icon>delete</Icon>\r\n                                                        </IconButton>\r\n                                                    </Grid>\r\n                                                </Grid>\r\n                                            </ListItemSecondaryAction>\r\n                                        </ListItem>\r\n                                        <Divider variant='inset' component='li' />\r\n                                    </Fragment>\r\n                                ))\r\n                            }\r\n                        </List>\r\n                    }\r\n                    <Grid item xs={12} className={classes.bottomContainer}>\r\n                        <Grid container justify='flex-end'>\r\n                            <Button\r\n                                variant='contained'\r\n                                color='primary'\r\n                                onClick={handleCreateTestClick}\r\n                            >\r\n                                Nuevo cuestionario\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            {\r\n                playOptionsState && (\r\n                    <DialogTestOptions\r\n                        open={playOptionsState.openOptions}\r\n                        onAccept={handleAcceptPlayOptions}\r\n                        onCancel={handleCancelPlayOptions}\r\n                    />\r\n                )\r\n            }\r\n        </Fragment>\r\n    );\r\n};\r\n","import React, { Fragment, useRef } from 'react';\r\nimport { Button, makeStyles } from '@material-ui/core';\r\nimport { colors } from '../../theme';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    uploadInput: {\r\n        display: 'none'\r\n    }\r\n}));\r\n\r\ninterface HTMLInputEvent extends Event {\r\n    target: HTMLInputElement & EventTarget\r\n}\r\n\r\ninterface JsonLoaderProps {\r\n    onDataLoaded: (data: unknown) => void,\r\n    onError?: () => void\r\n}\r\n\r\nexport const JsonLoader: React.FC<JsonLoaderProps> = (props: JsonLoaderProps) => {\r\n    const { onDataLoaded, onError } = props;\r\n\r\n    const inputImport = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleInput = (event: unknown) => {\r\n        try {\r\n            const evt = event as HTMLInputEvent;\r\n            if (evt?.target?.files != null) {\r\n                const file = evt.target.files[0];\r\n                const reader = new FileReader();\r\n                reader.readAsText(file);\r\n                reader.onloadend = (e) => {\r\n                    try {\r\n                        const newProject = JSON.parse(reader.result as string);\r\n                        onDataLoaded(newProject);\r\n                    } catch (err) {\r\n                        if (onError) {\r\n                            onError();\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n        } catch (err) {\r\n            if (onError) {\r\n                onError();\r\n            }\r\n        }\r\n        inputImport.current.value = '';\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <input\r\n                ref={inputImport}\r\n                accept='text'\r\n                className={classes.uploadInput}\r\n                id='contained-button-file'\r\n                multiple\r\n                type='file'\r\n                onInput={handleInput}\r\n            />\r\n            <Button style={{ color: colors.primary.dark }}>\r\n                <label htmlFor='contained-button-file'>\r\n                    Importar proyecto\r\n                </label>\r\n            </Button>\r\n        </Fragment>\r\n    );\r\n};\r\n","import React, { useRef, useState } from 'react';\r\nimport { Button, Grid, TextField } from '@material-ui/core';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { Project } from '../../types/Project';\r\n\r\ninterface FormState {\r\n    name: string,\r\n    description: string\r\n}\r\n\r\nconst initialState = (project?: Project): FormState => {\r\n    if (project != null) {\r\n        return {\r\n            name: project.name,\r\n            description: project.description || ''\r\n        };\r\n    }\r\n    return {\r\n        name: '',\r\n        description: ''\r\n    };\r\n};\r\n\r\ninterface ProjectFormProps {\r\n    project?: Project,\r\n    onAccept: (newProject: Project) => void,\r\n    onCancel: () => void\r\n}\r\n\r\nexport const ProjectForm: React.FC<ProjectFormProps> = (props: ProjectFormProps) => {\r\n    const { project, onAccept, onCancel } = props;\r\n\r\n    const [formState, setFormState] = useState<FormState>(initialState(project));\r\n\r\n    const inputName = useRef({} as HTMLInputElement);\r\n    const inputDescription = useRef({} as HTMLInputElement);\r\n\r\n    const handleNameChange = () => {\r\n        setFormState({\r\n            ...formState,\r\n            name: inputName.current.value\r\n        });\r\n    };\r\n\r\n    const handleDescriptionChange = () => {\r\n        setFormState({\r\n            ...formState,\r\n            description: inputDescription.current.value\r\n        });\r\n    };\r\n\r\n    const handleAcceptClick = () => {\r\n        const newProject: Project = project ?\r\n            {\r\n                ...project,\r\n                name: inputName.current.value,\r\n                description: inputDescription.current.value\r\n            }\r\n            : {\r\n                id: uuidv4(),\r\n                name: inputName.current.value,\r\n                description: inputDescription.current.value,\r\n                tests: []\r\n            };\r\n\r\n        onAccept(newProject);\r\n    };\r\n\r\n    const handleCancelClick = () => {\r\n        onCancel();\r\n    };\r\n\r\n    return (\r\n        <Grid\r\n            container\r\n            direction='column'\r\n            spacing={2}\r\n        >\r\n            <Grid item xs={12}>\r\n                <TextField\r\n                    inputRef={inputName}\r\n                    label='Nombre'\r\n                    fullWidth\r\n                    value={formState.name}\r\n                    onInput={handleNameChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <TextField\r\n                    inputRef={inputDescription}\r\n                    label='Descripcin'\r\n                    fullWidth\r\n                    value={formState.description}\r\n                    onInput={handleDescriptionChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <Grid container justify='flex-end' spacing={1}>\r\n                    <Grid item>\r\n                        <Button variant='contained' color='primary' onClick={handleAcceptClick}>Aceptar</Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Button color='primary' onClick={handleCancelClick}>Cancelar</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { ChangeEvent, Fragment, useState } from 'react';\r\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Button, Dialog, DialogTitle, Divider, Grid, Icon, IconButton, makeStyles, Snackbar, SnackbarContent, Typography } from '@material-ui/core';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Project } from '../../types/Project';\r\nimport { colors } from '../../theme';\r\nimport { TestList } from './TestList';\r\nimport { DialogConfirm } from '../common/DialogConfirm';\r\nimport { JsonLoader } from '../common/JsonLoader';\r\nimport { isValidProject } from '../../utils/utilValidationTypes';\r\nimport { ProjectForm } from './ProjectForm';\r\nimport { Test } from '../../types/Test';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    heading: {\r\n        fontSize: theme.typography.pxToRem(15)\r\n    },\r\n    secondaryHeading: {\r\n        fontSize: theme.typography.pxToRem(15),\r\n        color: colors.secondary.main\r\n    },\r\n    gridContainer: {\r\n        padding: '0px 10px'\r\n    },\r\n    gridItems: {\r\n        flexGrow: 1,\r\n    },\r\n    messageControl: {\r\n        backgroundColor: colors.error,\r\n        color: colors.font.errorContrast\r\n    },\r\n    dialogContainer: {\r\n        padding: '20px'\r\n    }\r\n}));\r\n\r\ninterface ProjectListProps {\r\n    projects: Project[],\r\n    setProjects: (newProjects: Project[]) => void\r\n}\r\n\r\nexport const ProjectList: React.FC<ProjectListProps> = (props: ProjectListProps) => {\r\n    const { projects, setProjects } = props;\r\n\r\n    const history = useHistory();\r\n\r\n    const [expandedProject, setExpandedProject] = React.useState<string | false>(false);\r\n    const [openProjectForm, setOpenProjectForm] = useState<boolean>(false);\r\n    const [openRemoveProjectConfirm, setOpenRemoveProjectConfirm] = useState<boolean>(false);\r\n    const [selectedProject, setSelectedProject] = useState<Project>();\r\n    const [openMessage, setOpenMessage] = useState<boolean>(false);\r\n    const [messageText, setMessageText] = useState<string>('');\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleExpandChange = (project: Project, isExpanded: boolean) => {\r\n        setExpandedProject(isExpanded ? project.id : false);\r\n    };\r\n\r\n    const handleNewProjectClick = () => {\r\n        setOpenProjectForm(true);\r\n    };\r\n\r\n    const handleEditProjectClick = (project: Project) => {\r\n        setSelectedProject(project);\r\n        setOpenProjectForm(true);\r\n    };\r\n\r\n    const handleRemoveProjectClick = (project: Project) => {\r\n        setSelectedProject(project);\r\n        setOpenRemoveProjectConfirm(true);\r\n    };\r\n\r\n    const handleExportProjectClick = (project: Project) => {\r\n        const element = document.createElement('a');\r\n        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(JSON.stringify(project)));\r\n        element.setAttribute('download', project.name.replace(/ /g, '_'));\r\n        element.style.display = 'none';\r\n        document.body.appendChild(element);\r\n        element.click();\r\n        document.body.removeChild(element);\r\n    };\r\n\r\n    const handleProjectFormAccept = (newProject: Project) => {\r\n        if (selectedProject != null) {\r\n            setProjects(projects.map((aProject: Project) => aProject.id === newProject.id ? newProject : aProject));\r\n        } else {\r\n            setProjects([\r\n                ...projects,\r\n                {\r\n                    ...newProject\r\n                }\r\n            ]);\r\n        }\r\n        setSelectedProject(undefined);\r\n        setOpenProjectForm(false);\r\n    };\r\n\r\n    const handleProjectFormCancel = () => {\r\n        setSelectedProject(undefined);\r\n        setOpenProjectForm(false);\r\n    };\r\n\r\n    const handleImportProject = (project: unknown) => {\r\n        const newProject = project as Project;\r\n        if (!isValidProject(newProject)) {\r\n            setMessageText('El proyecto es invlido');\r\n            setOpenMessage(true);\r\n        }\r\n        const exist = projects.find((aProject: Project) => aProject.id === newProject.id) != null;\r\n        if (!exist) {\r\n            setProjects([\r\n                ...projects,\r\n                {\r\n                    ...newProject\r\n                }\r\n            ]);\r\n        } else {\r\n            setMessageText('El proyecto ya existe');\r\n            setOpenMessage(true);\r\n        }\r\n    };\r\n\r\n    const handleImportProjectError = () => {\r\n        setMessageText('Se produjo un error en la importacin');\r\n        setOpenMessage(true);\r\n    };\r\n\r\n    const handleConfirmRemoveProject = () => {\r\n        if (selectedProject != null) {\r\n            setProjects(projects.filter((aProject: Project) => aProject.id !== selectedProject.id));\r\n        }\r\n        setOpenRemoveProjectConfirm(false);\r\n    };\r\n\r\n    const handleRefuseRemoveProject = () => {\r\n        setOpenRemoveProjectConfirm(false);\r\n    };\r\n\r\n    const handleCreateTest = (projectId: string, test: Test) => {\r\n        const theProject = projects.find((aProject: Project) => aProject.id === projectId);\r\n        const updating = theProject != null && theProject.tests.some((aTest: Test) => aTest.id === test.id);\r\n\r\n        const updatedProjects = projects.map((aProject: Project) => {\r\n            if (aProject.id !== projectId) {\r\n                return {...aProject};\r\n            }\r\n            if (updating) {\r\n                const updatedTests = aProject.tests.map((aTest: Test) => aTest.id === test.id ? {...test} : {...aTest});\r\n                return {\r\n                    ...aProject,\r\n                    tests: [...updatedTests]\r\n                };\r\n            }\r\n            return {\r\n                ...aProject,\r\n                tests: [...aProject.tests, test]\r\n            };\r\n        });\r\n        setProjects(updatedProjects);\r\n        if (!updating) {\r\n            history.push(`/designer/${projectId}/${test.id}`);\r\n        }\r\n    };\r\n\r\n    const handleDeleteTest = (projectId: string, test: Test) => {\r\n        const updatedProjects = projects.map((aProject: Project) => {\r\n            if (aProject.id !== projectId) {\r\n                return {...aProject};\r\n            }\r\n            const updatedTests = aProject.tests.filter((aTest: Test) => aTest.id !== test.id);\r\n            return {\r\n                ...aProject,\r\n                tests: [...updatedTests]\r\n            };\r\n        });\r\n        setProjects(updatedProjects);\r\n    };\r\n\r\n    const handleMessageClose = () => {\r\n        setOpenMessage(false);\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <Dialog\r\n                open={openProjectForm}\r\n                fullWidth\r\n                maxWidth='sm'\r\n            >\r\n                <DialogTitle>Proyecto</DialogTitle>\r\n                <Box className={classes.dialogContainer}>\r\n                    <ProjectForm\r\n                        project={selectedProject}\r\n                        onAccept={handleProjectFormAccept}\r\n                        onCancel={handleProjectFormCancel}\r\n                    />\r\n                </Box>\r\n            </Dialog>\r\n            <DialogConfirm\r\n                open={openRemoveProjectConfirm}\r\n                text='Seguro que deseas eliminar el proyecto?'\r\n                width='xs'\r\n                onConfirm={handleConfirmRemoveProject}\r\n                onRefuse={handleRefuseRemoveProject}\r\n            />\r\n            <Snackbar\r\n                open={openMessage}\r\n                anchorOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                autoHideDuration={3000}\r\n                onClose={handleMessageClose}\r\n            >\r\n                <SnackbarContent\r\n                    message={\r\n                        <Grid container spacing={4}>\r\n                            <Grid item xs={1}>\r\n                                <Icon>error</Icon>\r\n                            </Grid>\r\n                            <Grid item xs={10}>\r\n                                <Typography>{messageText}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    }\r\n                    className={classes.messageControl}\r\n                />\r\n            </Snackbar>\r\n            <Grid container>\r\n                <Grid item xs={12}>\r\n                    <Grid container direction='row' justify='center' alignItems='center' spacing={2} className={classes.gridContainer}>\r\n                        <Grid item className={classes.gridItems}>\r\n                            <Typography variant='h6'>\r\n                                Proyectos\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Button\r\n                                style={{ color: colors.primary.dark }}\r\n                                onClick={handleNewProjectClick}\r\n                            >\r\n                                Nuevo proyecto\r\n                            </Button>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <JsonLoader\r\n                                onDataLoaded={handleImportProject}\r\n                                onError={handleImportProjectError}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <Divider />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    {\r\n                        projects.map((aProject: Project) => (\r\n                            <Accordion\r\n                                key={aProject.id}\r\n                                expanded={expandedProject === aProject.id}\r\n                                onChange={ (event: ChangeEvent<unknown>, isExpanded: boolean) => {\r\n                                    handleExpandChange(aProject, isExpanded);\r\n                                }}\r\n                            >\r\n                                <AccordionSummary title={aProject.description}>\r\n                                    <Grid container justify='space-between' alignItems='center'>\r\n                                        <Grid item xs={3}>\r\n                                            <Typography className={classes.heading}>{aProject.name}</Typography>\r\n                                        </Grid>\r\n                                        <Grid item xs={7}>\r\n                                            <Typography className={classes.secondaryHeading}>\r\n                                                {`${aProject.tests.length} cuestionario${aProject.tests.length !== 1 ? 's' : ''}`}\r\n                                            </Typography>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton\r\n                                                title='Descargar'\r\n                                                color='primary'\r\n                                                onClick={(evt) => {\r\n                                                    evt.stopPropagation();\r\n                                                    handleExportProjectClick(aProject);\r\n                                                }}\r\n                                            >\r\n                                                <Icon>download</Icon>\r\n                                            </IconButton>\r\n                                            {\r\n                                                <IconButton\r\n                                                    title='Editar'\r\n                                                    color='primary'\r\n                                                    onClick={(evt) => {\r\n                                                        evt.stopPropagation();\r\n                                                        handleEditProjectClick(aProject);\r\n                                                    }}\r\n                                                >\r\n                                                    <Icon>edit</Icon>\r\n                                                </IconButton>\r\n                                            }\r\n                                            {\r\n                                                <IconButton\r\n                                                    title='Eliminar'\r\n                                                    onClick={(evt) => {\r\n                                                        evt.stopPropagation();\r\n                                                        handleRemoveProjectClick(aProject);\r\n                                                    }}\r\n                                                >\r\n                                                    <Icon>delete</Icon>\r\n                                                </IconButton>\r\n                                            }\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </AccordionSummary>\r\n                                <AccordionDetails>\r\n                                    <TestList\r\n                                        project={aProject}\r\n                                        onCreateTest={handleCreateTest}\r\n                                        onDeleteTest={handleDeleteTest}\r\n                                    />\r\n                                </AccordionDetails>\r\n                            </Accordion>\r\n                        ))\r\n                    }\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid } from '@material-ui/core';\r\nimport { useProjects } from '../../hooks/useProjects';\r\nimport { ProjectList } from '../../components/Home/ProjectList';\r\n\r\nexport const Home: React.FC = () => {\r\n    const { projects, setProjects } = useProjects();\r\n\r\n    return (\r\n        <Grid\r\n            container\r\n            justify=\"center\"\r\n        >\r\n            <Grid item xs={7}>\r\n                <ProjectList\r\n                    projects={projects}\r\n                    setProjects={setProjects}\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Icon } from '@material-ui/core';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { ChallengeType } from \"../enums/ChallengeType\";\r\nimport { Language } from \"../enums/Language\";\r\nimport { Challenge, ChallengeConfig } from \"../types/Challenge\";\r\nimport { CSSProperties } from '@material-ui/styles';\r\nimport { PictureType } from '../enums/PictureType';\r\nimport { SelectAnswerChallenge, SelectAnswerChallengeConfig } from '../types/SelectAnswerChallenge';\r\nimport { TrueOrFalseChallenge, TrueOrFalseChallengeConfig } from '../types/TrueOrFalseChallenge';\r\nimport { ClassifyChallenge, ClassifyChallengeConfig } from '../types/ClassifyChallenge';\r\nimport { SortChallenge, SortChallengeConfig } from '../types/SortChallenge';\r\nimport { FillTableChallenge, FillTableChallengeConfig } from '../types/FillTableChallenge';\r\nimport { FillGapsChallenge, FillGapsChallengeConfig, FillGapsChallengeSentence } from '../types/FillGapsChallenge';\r\nimport { FillMethod } from '../enums/FillMethod';\r\n\r\nexport const getChallengeTypeDescription = (type: ChallengeType, language: Language = Language.Es): string => {\r\n    switch (type) {\r\n        case ChallengeType.SelectAnswer:\r\n            return language === Language.Es ? \"Selecciona la respuesta correcta\" : \"Choose the correct answer\";\r\n        case ChallengeType.TrueOrFalse:\r\n            return language === Language.Es ? \"Verdadero o falso\" : \"True or false\";\r\n        case ChallengeType.Match:\r\n            return language === Language.Es ? \"Une las opciones\" : \"Match the options\";\r\n        case ChallengeType.FillGaps:\r\n            return language === Language.Es ? \"Rellena los huecos\" : \"Fill in the gaps\";\r\n        case ChallengeType.Sort:\r\n            return language === Language.Es ? \"Ordena los elementos\" : \"Order the elements\";\r\n        case ChallengeType.Classify:\r\n            return language === Language.Es ? \"Clasifica los elementos\" : \"Classify the elements\";\r\n        case ChallengeType.FillTable:\r\n            return language === Language.Es ? \"Completa la tabla\" : \"Complete the table\";\r\n        case ChallengeType.TheOddOne:\r\n            return language === Language.Es ? \"Busca el que sobra\" : \"Find the odd one\";\r\n        case ChallengeType.Crossword:\r\n            return language === Language.Es ? \"Crucigrama\" : \"Crossword\";\r\n        default:\r\n            return language === Language.Es ? \"Sin definir\" : \"Undefined\";\r\n    }\r\n};\r\n\r\nexport const getChallengeTypeIcon = (type: ChallengeType, size: 'large' | 'default' | 'small' = 'default', style: CSSProperties = {}): JSX.Element => {\r\n    return (\r\n        <Icon fontSize={size} style={style}>\r\n            {\r\n                type === ChallengeType.SelectAnswer ? 'widgets'\r\n                    : type === ChallengeType.TrueOrFalse ? 'check'\r\n                        : type === ChallengeType.FillGaps ? 'space_bar'\r\n                            : type === ChallengeType.Match ? 'shuffle'\r\n                                : type === ChallengeType.Sort ? 'swap_vert'\r\n                                    : type === ChallengeType.Classify ? 'category'\r\n                                        : type === ChallengeType.FillTable ? 'grid_on'\r\n                                            : type === ChallengeType.TheOddOne ? 'touch_app'\r\n                                                : type === ChallengeType.Crossword ? 'font_download' : ''\r\n            }\r\n        </Icon>\r\n    );\r\n};\r\n\r\nconst getDefaultChallengeConfig = (type: ChallengeType): ChallengeConfig => {\r\n    const defaultChallengeConfig: ChallengeConfig = {\r\n        timeLimit: 30,\r\n        questionFontSize: 28\r\n    };\r\n\r\n    switch (type) {\r\n        case ChallengeType.SelectAnswer:\r\n            return {\r\n                ...defaultChallengeConfig,\r\n                answerFontSize: 22,\r\n                pictureCount: 1,\r\n                pictureLabel: false,\r\n                multiselect: false\r\n            } as SelectAnswerChallengeConfig;\r\n        case ChallengeType.TrueOrFalse:\r\n            return {\r\n                ...defaultChallengeConfig,\r\n                pictureCount: 1,\r\n                pictureLabel: false\r\n            } as TrueOrFalseChallengeConfig;\r\n        case ChallengeType.Match:\r\n            return defaultChallengeConfig;\r\n        case ChallengeType.FillGaps:\r\n            return {\r\n                ...defaultChallengeConfig,\r\n                textFontSize: 18,\r\n                fillMethod: FillMethod.Writing\r\n            } as FillGapsChallengeConfig;\r\n        case ChallengeType.Sort:\r\n            return {\r\n                ...defaultChallengeConfig,\r\n                itemsFontSize: 18,\r\n                itemCount: 5\r\n            } as SortChallengeConfig;\r\n        case ChallengeType.Classify:\r\n            return {\r\n                ...defaultChallengeConfig,\r\n                itemsFontSize: 18,\r\n                groupCount: 3\r\n            } as ClassifyChallengeConfig;\r\n        case ChallengeType.FillTable:\r\n            return {\r\n                ...defaultChallengeConfig,\r\n                itemsFontSize: 18,\r\n                rowCount: 3,\r\n                columnCount: 3,\r\n                firstRowFixed: false,\r\n                firstColumnFixed: false\r\n            } as FillTableChallengeConfig;\r\n        default:\r\n            return defaultChallengeConfig;\r\n    }\r\n};\r\n\r\nexport const getDefaultChallenge = (type: ChallengeType): Challenge => {\r\n    const defaultChallenge: Challenge = {\r\n        id: uuidv4(),\r\n        type,\r\n        question: '',\r\n        config: getDefaultChallengeConfig(type)\r\n    };\r\n\r\n    switch (type) {\r\n        case ChallengeType.SelectAnswer:\r\n            return {\r\n                ...defaultChallenge,\r\n                pictures: [{\r\n                    type: PictureType.None,\r\n                    data: ''\r\n                }],\r\n                answers: [\r\n                    { text: '', valid: false },\r\n                    { text: '', valid: false },\r\n                    { text: '', valid: false },\r\n                    { text: '', valid: false }\r\n                ]\r\n            } as SelectAnswerChallenge;\r\n        case ChallengeType.TrueOrFalse:\r\n            return {\r\n                ...defaultChallenge,\r\n                pictures: [{\r\n                    type: PictureType.None,\r\n                    data: ''\r\n                }],\r\n                answer: true\r\n            } as TrueOrFalseChallenge;\r\n        case ChallengeType.Match:\r\n            return defaultChallenge;\r\n        case ChallengeType.FillGaps:\r\n            return {\r\n                ...defaultChallenge,\r\n                sentences: [] as FillGapsChallengeSentence[]\r\n            } as FillGapsChallenge;\r\n        case ChallengeType.Sort:\r\n            return {\r\n                ...defaultChallenge,\r\n                items: ['', '', '', '', '']\r\n            } as SortChallenge;\r\n        case ChallengeType.Classify:\r\n            return {\r\n                ...defaultChallenge,\r\n                groups: [\r\n                    { name: '', items: ([] as string[]) },\r\n                    { name: '', items: ([] as string[]) },\r\n                    { name: '', items: ([] as string[]) }\r\n                ]\r\n            } as ClassifyChallenge;\r\n        case ChallengeType.FillTable:\r\n            return {\r\n                ...defaultChallenge,\r\n                items: [\r\n                    [{ text: '', hidden: false },{ text: '', hidden: false },{ text: '', hidden: false }],\r\n                    [{ text: '', hidden: false },{ text: '', hidden: false },{ text: '', hidden: false }],\r\n                    [{ text: '', hidden: false },{ text: '', hidden: false },{ text: '', hidden: false }]\r\n                ]\r\n            } as FillTableChallenge;\r\n        default:\r\n            return defaultChallenge;\r\n    }\r\n};\r\n","export enum ComponentMode {\r\n    Design,\r\n    Play\r\n}","import React, { Fragment, useEffect, useState } from 'react';\r\nimport { Card, CardActionArea, CardActions, CardContent, CardHeader, Chip, Grid, Icon, IconButton, makeStyles, Tooltip, Typography } from '@material-ui/core';\r\nimport { Challenge } from '../../types/Challenge';\r\nimport { getChallengeTypeDescription, getChallengeTypeIcon } from '../../utils/utilChallenges';\r\nimport { isValidChallenge, Validation } from '../../utils/utilValidationTypes';\r\n\r\nconst useStyles = makeStyles({\r\n    fullWidth: {\r\n        width: '100%',\r\n    },\r\n    fullHeight: {\r\n        height: '100%',\r\n    },\r\n    headerContainer: {\r\n        //width: 'calc(100% - 32px)'\r\n        overflow: \"hidden\"\r\n    },\r\n    contentContainer: {\r\n        overflow: \"hidden\"\r\n    },\r\n    actionContainer: {\r\n        marginTop: '8px'\r\n    },\r\n    descriptionContainer: {\r\n        width: '100%',\r\n    },\r\n    description: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n    tooltipRow: {\r\n        fontSize: '12px'\r\n    },\r\n    statusContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    }\r\n});\r\n\r\ninterface ChallengeThumbnailProps {\r\n    challenge: Challenge,\r\n    position: number,\r\n    selected?: boolean,\r\n    compact?: boolean,\r\n    onClick?: (selectedChallenge: Challenge) => void,\r\n    onDelete?: (deletedChallenge: Challenge) => void\r\n}\r\n\r\nexport const ChallengeThumbnail: React.FC<ChallengeThumbnailProps> = (props: ChallengeThumbnailProps) => {\r\n    const { challenge, position, selected, compact, onClick, onDelete } = props;\r\n\r\n    const [validation, setValidation] = useState<Validation>({ valid: true, errorMessage: [] });\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleClick = () => {\r\n        if (onClick) {\r\n            onClick(challenge);\r\n        }\r\n    };\r\n\r\n    const handleDeleteClick = () => {\r\n        if (onDelete) {\r\n            onDelete(challenge);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        setValidation(isValidChallenge(challenge));\r\n    }, [challenge]);\r\n\r\n    return (\r\n        <Fragment>\r\n            {\r\n                <Card variant={selected ? 'elevation' : 'outlined'} elevation={10} className={classes.fullWidth}>\r\n                    <CardActionArea className={classes.fullWidth} onClick={handleClick}>\r\n                        <CardHeader\r\n                            classes={{\r\n                                root: classes.headerContainer,\r\n                                content: classes.contentContainer,\r\n                            }}\r\n                            avatar={\r\n                                compact ? getChallengeTypeIcon(challenge.type, 'small') : undefined\r\n                            }\r\n                            subheader={\r\n                                <Typography variant='subtitle2' color={selected ? 'secondary' : 'textPrimary'} className={classes.description}>\r\n                                    { compact ? challenge.question : `#${position} ${getChallengeTypeDescription(challenge.type)}` }\r\n                                </Typography>\r\n                            }\r\n                            action={\r\n                                compact ? (\r\n                                    <Grid container alignItems=\"center\" className={classes.actionContainer}>\r\n                                        {\r\n                                            validation.valid ? <Icon color=\"primary\" fontSize=\"small\">check</Icon>\r\n                                                : (\r\n                                                    <Tooltip arrow title={\r\n                                                        <>\r\n                                                            {\r\n                                                                validation.errorMessage.map((\r\n                                                                    aMessage: string,\r\n                                                                    messageIdx: number\r\n                                                                ) => (\r\n                                                                    <li\r\n                                                                        key={`li_${messageIdx}`}\r\n                                                                        className={classes.tooltipRow}\r\n                                                                    >\r\n                                                                        {aMessage}\r\n                                                                    </li>\r\n                                                                ))\r\n                                                            }\r\n                                                        </>\r\n                                                    }>\r\n                                                        <Icon color=\"secondary\" fontSize=\"small\">priority_high</Icon>\r\n                                                    </Tooltip>\r\n                                                )\r\n                                        }\r\n                                    </Grid>\r\n                                ) : undefined\r\n                            }\r\n                        />\r\n                        {\r\n                            !compact && (\r\n                                <CardContent>\r\n                                    <Typography noWrap>{challenge.question}</Typography>\r\n                                </CardContent>\r\n                            )\r\n                        }\r\n                    </CardActionArea>\r\n                    {\r\n                        !compact && (\r\n                            <CardActions className={classes.statusContainer}>\r\n                                {\r\n                                    validation.valid ? <Chip label=\"completo\" color=\"primary\" size=\"small\" icon={<Icon fontSize=\"small\">check</Icon>} />\r\n                                        : (\r\n                                            <Tooltip arrow title={\r\n                                                <>\r\n                                                    {\r\n                                                        validation.errorMessage.map((aMessage: string, messageIdx) => (\r\n                                                            <li\r\n                                                                key={`li_${messageIdx}`}\r\n                                                                className={classes.tooltipRow}>\r\n                                                                {aMessage}\r\n                                                            </li>\r\n                                                        ))\r\n                                                    }\r\n                                                </>\r\n                                            }>\r\n                                                <Chip label=\"error\" color=\"secondary\" size=\"small\" style={{ color: '#ffffff' }} icon={<Icon fontSize=\"small\">priority_high</Icon>} />\r\n                                            </Tooltip>\r\n                                        )\r\n                                }\r\n                                <IconButton onClick={handleDeleteClick}>\r\n                                    <Icon>delete</Icon>\r\n                                </IconButton>\r\n                            </CardActions>\r\n                        )\r\n                    }\r\n                </Card>\r\n            }\r\n        </Fragment>\r\n    );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { Challenge } from '../../types/Challenge';\r\nimport { ChallengeThumbnail } from './ChallengeThumbnail';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        width: '100%',\r\n        overflowY: 'auto'\r\n    },\r\n    fullWidth: {\r\n        width: '100%',\r\n    }\r\n});\r\n\r\ninterface ChallengeSelectorProps {\r\n    challenges: Challenge[],\r\n    compactList?: boolean,\r\n    selected?: Challenge,\r\n    onSelect?: (challenge: Challenge) => void,\r\n    onDelete?: (challenge: Challenge) => void\r\n}\r\n\r\nexport const ChallengeSelector: React.FC<ChallengeSelectorProps> = (props: ChallengeSelectorProps) => {\r\n    const { challenges, compactList, selected, onSelect, onDelete } = props;\r\n\r\n    const [selectedChallenge, setSelectedChallenge] = useState<Challenge | undefined>(selected || undefined);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setSelectedChallenge(selected);\r\n    }, [selected]);\r\n\r\n    const handleThumbnailClick = (challenge: Challenge) => {\r\n        setSelectedChallenge(challenge);\r\n        if (onSelect) {\r\n            onSelect(challenge);\r\n        }\r\n    };\r\n\r\n    const handleThumbnailDelete = (challenge: Challenge) => {\r\n        if (onDelete) {\r\n            onDelete(challenge);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container direction='column' alignItems='center' spacing={2} className={classes.root}>\r\n            {\r\n                challenges.map((aChallenge: Challenge, idx: number) => (\r\n                    <Grid item key={idx} className={classes.fullWidth}>\r\n                        <ChallengeThumbnail\r\n                            challenge={aChallenge}\r\n                            position={idx + 1}\r\n                            selected={selectedChallenge?.id === aChallenge.id}\r\n                            compact={compactList}\r\n                            onClick={handleThumbnailClick}\r\n                            onDelete={handleThumbnailDelete}\r\n                        />\r\n                    </Grid>\r\n                ))\r\n            }\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Card, makeStyles, TextField } from '@material-ui/core';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    },\r\n    inputContainer: {\r\n        width: '90%',\r\n        height: '80%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    input: {\r\n        width: '90%'\r\n    }\r\n});\r\n\r\ninterface ChallengeQuestionProps {\r\n    mode: ComponentMode,\r\n    question: string,\r\n    fontSize?: number,\r\n    onChange?: (newTitle: string) => void\r\n}\r\n\r\nexport const ChallengeQuestion: React.FC<ChallengeQuestionProps> = (props: ChallengeQuestionProps) => {\r\n    const { mode, question, fontSize, onChange } = props;\r\n\r\n    const [questionText, setQuestionText] = useState<string>(question);\r\n    const inputQuestion = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setQuestionText(question);\r\n    },[question]);\r\n\r\n    const handleInputChange = () => {\r\n        setQuestionText(inputQuestion.current.value);\r\n        if (onChange) {\r\n            onChange(inputQuestion.current.value);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Card className={classes.inputContainer}>\r\n                <TextField\r\n                    inputRef={inputQuestion}\r\n                    variant='standard'\r\n                    className={classes.input}\r\n                    inputProps = {{\r\n                        style: {\r\n                            textAlign: 'center',\r\n                            fontSize: `${fontSize != null ? fontSize : 28}px`,\r\n                            lineHeight: '32px'\r\n                        }\r\n                    }}\r\n                    InputProps={{\r\n                        readOnly: mode === ComponentMode.Play,\r\n                        disableUnderline: mode === ComponentMode.Play\r\n                    }}\r\n                    placeholder='Escribe aqu el enunciado o pregunta'\r\n                    multiline\r\n                    rowsMax={2}\r\n                    value={questionText}\r\n                    onInput={handleInputChange}\r\n                />\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n    CardActionArea,\r\n    Checkbox,\r\n    Grid,\r\n    Icon,\r\n    InputAdornment,\r\n    makeStyles,\r\n    Radio,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport Card from '@material-ui/core/Card';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { colors } from '../../theme';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    option: {\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    optionActionArea: {\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    optionInput: {\r\n        width: '90%',\r\n        color: '#ffffff'\r\n    },\r\n    optionInnerInput: {\r\n        cursor: 'pointer'\r\n    },\r\n    optionIcon: {\r\n        color: '#ffffff'\r\n    },\r\n    selector: {\r\n        color: '#ffffff',\r\n        '&$checked': {\r\n            color: '#ffffff'\r\n        }\r\n    },\r\n    checked: {}\r\n}));\r\n\r\ninterface OptionState {\r\n    text: string,\r\n    valid: boolean\r\n}\r\n\r\ninterface SelectableOptionProps {\r\n    mode: ComponentMode,\r\n    text: string,\r\n    icon: string,\r\n    valid?: boolean,\r\n    selected?: boolean,\r\n    color?: string,\r\n    fontSize?: number,\r\n    multiselect?: boolean,\r\n    showResults?: boolean,\r\n    onClick?: () => void,\r\n    onTextChange?: (newText: string) => void,\r\n    onValidChange?(newValid: boolean): void\r\n}\r\n\r\nexport const SelectableOption: React.FC<SelectableOptionProps> = (props: SelectableOptionProps) => {\r\n    const {\r\n        mode,\r\n        text,\r\n        icon,\r\n        valid,\r\n        selected,\r\n        color,\r\n        fontSize,\r\n        multiselect,\r\n        showResults,\r\n        onClick,\r\n        onTextChange,\r\n        onValidChange\r\n    } = props;\r\n\r\n    const [optionState, setOptionState] = useState<OptionState>({ text: text || '', valid: valid || false });\r\n    const inputTextOption = useRef({} as HTMLInputElement);\r\n    const radioOption = useRef({} as HTMLInputElement);\r\n    const checkOption = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setOptionState({ text: text || '', valid: valid || false });\r\n    }, [text, valid]);\r\n\r\n    const handleOptionTextChange = () => {\r\n        const newState = {\r\n            ...optionState,\r\n            text: inputTextOption.current.value\r\n        };\r\n        setOptionState(newState);\r\n        if (onTextChange) {\r\n            onTextChange(inputTextOption.current.value);\r\n        }\r\n    };\r\n\r\n    const handleRadioChange = () => {\r\n        const newState = {\r\n            ...optionState,\r\n            selected: radioOption.current.checked\r\n        };\r\n        setOptionState(newState);\r\n        if (onValidChange) {\r\n            onValidChange(radioOption.current.checked);\r\n        }\r\n    };\r\n\r\n    const handleCheckboxChange = () => {\r\n        const newState = {\r\n            ...optionState,\r\n            selected: checkOption.current.checked\r\n        };\r\n        setOptionState(newState);\r\n        if (onValidChange) {\r\n            onValidChange(checkOption.current.checked);\r\n        }\r\n    };\r\n\r\n    const handlerOptionClick = () => {\r\n        if (onClick) {\r\n            onClick();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card\r\n            className={classes.option}\r\n            style={{\r\n                backgroundColor: color || colors.primary.main,\r\n                borderStyle: 'solid',\r\n                borderWidth: (showResults && valid) || selected ? '3px' : '0px',\r\n                borderColor: showResults ? (\r\n                    valid ? '#00ff00' : '#ff0000'\r\n                ) : '#323232'\r\n            }}>\r\n            {\r\n                mode === ComponentMode.Design ? (\r\n                    <div className={classes.optionActionArea}>\r\n                        <TextField\r\n                            inputRef={inputTextOption}\r\n                            value={optionState.text}\r\n                            placeholder=\"Escribe aqu una respuesta\"\r\n                            className={classes.optionInput}\r\n                            InputProps={{\r\n                                style: {\r\n                                    color: '#ffffff',\r\n                                    fontSize: `${fontSize || 22}px`,\r\n                                },\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                        <Icon className={classes.optionIcon}>{icon}</Icon>\r\n                                    </InputAdornment>\r\n                                ),\r\n                                endAdornment: (\r\n                                    multiselect ? (\r\n                                        <Checkbox\r\n                                            inputRef={checkOption}\r\n                                            checked={optionState.valid}\r\n                                            classes={{ root: classes.selector, checked: classes.checked }}\r\n                                            onChange={handleCheckboxChange}\r\n                                        />\r\n                                    ) : (\r\n                                        <Radio\r\n                                            inputRef={radioOption}\r\n                                            checked={optionState.valid}\r\n                                            classes={{ root: classes.selector, checked: classes.checked }}\r\n                                            onChange={handleRadioChange}\r\n                                        />\r\n                                    )\r\n                                ),\r\n                            }}\r\n                            onInput={handleOptionTextChange}\r\n                            onClick={(ev) => { ev.preventDefault(); }}\r\n                        />\r\n                    </div>\r\n                ): (\r\n                    <CardActionArea\r\n                        className={classes.optionActionArea}\r\n                        onClick={handlerOptionClick}\r\n                    >\r\n                        <Grid container className={classes.optionInput} spacing={2} alignItems=\"center\">\r\n                            <Grid item>\r\n                                <Icon className={classes.optionIcon}>{icon}</Icon>\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <label style={{color: '#ffffff', fontSize: `${fontSize || 22}px`, justifySelf: 'left'}}>\r\n                                    {optionState.text}\r\n                                </label>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </CardActionArea>\r\n                )\r\n            }\r\n        </Card>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Box, Button, Dialog, DialogTitle, Grid, makeStyles, TextField } from '@material-ui/core';\r\nimport { ChallengePicture } from '../../types/Challenge';\r\nimport { PictureType } from '../../enums/PictureType';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    dialogContainer: {\r\n        padding: '20px'\r\n    },\r\n}));\r\n\r\ninterface DialogPictureFormProps {\r\n    open: boolean,\r\n    picture: ChallengePicture,\r\n    onAccept: (picture: ChallengePicture) => void,\r\n    onCancel: () => void\r\n}\r\n\r\nexport const DialogPictureForm: React.FC<DialogPictureFormProps> = (props: DialogPictureFormProps) => {\r\n    const {open, picture, onAccept, onCancel} = props;\r\n\r\n    const [formState, setFormState] = useState<ChallengePicture>(picture);\r\n\r\n    const inputUrl = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        if (picture != null) {\r\n            setFormState(picture);\r\n        }\r\n    }, [picture]);\r\n\r\n    const handleUrlChange = () => {\r\n        setFormState({\r\n            ...formState,\r\n            data: inputUrl.current.value\r\n        });\r\n    };\r\n\r\n    const handleAcceptClick = () => {\r\n        const newPicture = {\r\n            type: PictureType.Url,\r\n            data: inputUrl.current.value\r\n        };\r\n\r\n        onAccept(newPicture);\r\n    };\r\n\r\n    const handleCancelClick = () => {\r\n        onCancel();\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            fullWidth\r\n            maxWidth='sm'\r\n        >\r\n            <DialogTitle>Imagen</DialogTitle>\r\n            <Box className={classes.dialogContainer}>\r\n                <Grid\r\n                    container\r\n                    direction='column'\r\n                    spacing={2}\r\n                >\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            inputRef={inputUrl}\r\n                            label='URL de la imagen'\r\n                            fullWidth\r\n                            value={formState.data}\r\n                            onInput={handleUrlChange}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Grid container justify='flex-end' spacing={1}>\r\n                            <Grid item>\r\n                                <Button variant='contained' color='primary' onClick={handleAcceptClick}>Aceptar</Button>\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <Button color='primary' onClick={handleCancelClick}>Cancelar</Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </Box>\r\n        </Dialog>\r\n    );\r\n};\r\n","import React, { Fragment, useEffect, useState } from 'react';\r\nimport { Fab, Grid, GridSize, Icon, makeStyles } from '@material-ui/core';\r\nimport { ChallengePicture } from '../../types/Challenge';\r\nimport { PictureType } from '../../enums/PictureType';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { DialogPictureForm } from './DialogPictureSelector';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '99%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    fullHeight: {\r\n        height: '100%'\r\n    },\r\n    pic: {\r\n        maxWidth: '100%',\r\n        maxHeight: '100%'\r\n    }\r\n}));\r\n\r\ninterface PictureDialogState {\r\n    selectedPicture: ChallengePicture,\r\n    selectedPictureIdx: number,\r\n    openDialog: boolean\r\n}\r\n\r\ninterface ItemGridSize {\r\n    height: string,\r\n    width: GridSize\r\n}\r\n\r\ninterface PictureGridProps {\r\n    mode: ComponentMode,\r\n    pictures: ChallengePicture[],\r\n    onPicturesChange?: (newPictures: ChallengePicture[]) => void\r\n}\r\n\r\nexport const PictureGrid: React.FC<PictureGridProps> = (props: PictureGridProps) => {\r\n    const { mode, pictures, onPicturesChange } = props;\r\n\r\n    const [pictureDialogState, setPictureDialogState] = useState<PictureDialogState>();\r\n\r\n    const classes = useStyles();\r\n\r\n    const [pictureItemSize, setPictureItemSize] = useState<ItemGridSize>({ height: '100%', width: 8 });\r\n\r\n    useEffect(() => {\r\n        switch (pictures.length) {\r\n            case 9:\r\n            case 8:\r\n            case 7:\r\n                setPictureItemSize({ height: '33.3%', width: 4 });\r\n                break;\r\n            case 6:\r\n            case 5:\r\n                setPictureItemSize({ height: '50%', width: 4 });\r\n                break;\r\n            case 4:\r\n            case 3:\r\n                setPictureItemSize({ height: '50%', width: 6 });\r\n                break;\r\n            case 2:\r\n                setPictureItemSize({ height: '100%', width: 6 });\r\n                break;\r\n            default:\r\n                setPictureItemSize({ height: '100%', width: 12 });\r\n                break;\r\n        }\r\n    }, [pictures]);\r\n\r\n    const handleAddPictureClick = (picture: ChallengePicture, pictureIdx: number) => {\r\n        setPictureDialogState({\r\n            openDialog: true,\r\n            selectedPicture: picture,\r\n            selectedPictureIdx: pictureIdx\r\n        });\r\n    };\r\n\r\n    const handleAcceptPicture = (picture: ChallengePicture, pictureIdx: number) => {\r\n        if (onPicturesChange) {\r\n            onPicturesChange(\r\n                pictures.map((aPicture: ChallengePicture, idx: number) => idx !== pictureIdx ? {...aPicture} : {...picture})\r\n            );\r\n        }\r\n        setPictureDialogState({\r\n            openDialog: false,\r\n            selectedPicture: {\r\n                type: PictureType.None,\r\n                data: ''\r\n            },\r\n            selectedPictureIdx: -1\r\n        });\r\n    };\r\n\r\n    const handleCancelPicture = () => {\r\n        setPictureDialogState({\r\n            openDialog: false,\r\n            selectedPicture: {\r\n                type: PictureType.None,\r\n                data: ''\r\n            },\r\n            selectedPictureIdx: -1\r\n        });\r\n    };\r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            {\r\n                pictureDialogState && (\r\n                    <DialogPictureForm\r\n                        open={pictureDialogState.openDialog}\r\n                        picture={pictureDialogState.selectedPicture}\r\n                        onAccept={(newPic: ChallengePicture) => handleAcceptPicture(\r\n                            newPic, pictureDialogState.selectedPictureIdx\r\n                        )}\r\n                        onCancel={handleCancelPicture}\r\n                    />\r\n                )\r\n            }\r\n            <Grid container className={classes.root}>\r\n                {\r\n                    pictures.map((aPicture: ChallengePicture, pictureIdx: number) => (\r\n                        <Grid item\r\n                            key={`pic${pictureIdx.toString()}`}\r\n                            xs={pictureItemSize.width}\r\n                            style={{ height: pictureItemSize.height, border: mode === ComponentMode.Design ? 'solid 1px' : '0px' }}\r\n                        >\r\n                            <Grid container justify=\"center\" alignItems=\"center\" className={classes.fullHeight}>\r\n                                {\r\n                                    aPicture.type !== PictureType.None && (\r\n                                        <img className={classes.pic} src={aPicture.data} alt=\"\"/>\r\n                                    )\r\n                                }\r\n                                {\r\n                                    mode === ComponentMode.Design && (\r\n                                        <Fab\r\n                                            size=\"medium\"\r\n                                            color=\"primary\"\r\n                                            style={{position: 'absolute', color: '#ffffff'}}\r\n                                            onClick={() => { handleAddPictureClick(aPicture, pictureIdx); }}\r\n                                        >\r\n                                            <Icon>add_a_photo</Icon>\r\n                                        </Fab>\r\n                                    )\r\n                                }\r\n                            </Grid>\r\n                        </Grid>\r\n                    ))\r\n                }\r\n            </Grid>\r\n        </Fragment>\r\n    );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Box, CircularProgress, Grid, Typography } from '@material-ui/core';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\n\r\ninterface CountdownProps {\r\n    mode: ComponentMode,\r\n    time: number,\r\n    stopTimer?: boolean,\r\n    onTimeUp?: () => void\r\n}\r\n\r\n\r\nexport const Countdown: React.FC<CountdownProps> = (props: CountdownProps) => {\r\n    const { mode, time, stopTimer, onTimeUp } = props;\r\n\r\n    const [timeRemaining, setTimeRemaining] = useState<number>(time);\r\n    const [stop, setStop] = useState<boolean>(stopTimer || false);\r\n\r\n\r\n    useEffect(() => {\r\n        setTimeRemaining(time);\r\n    }, [time]);\r\n\r\n    useEffect(() => {\r\n        setStop(stopTimer || false);\r\n    }, [stopTimer]);\r\n\r\n    useEffect(() => {\r\n        let timeoutId: NodeJS.Timeout;\r\n        if (mode === ComponentMode.Play && !stop) {\r\n            timeoutId = setTimeout(() => {\r\n                if (timeRemaining === 0) {\r\n                    if (onTimeUp) {\r\n                        onTimeUp();\r\n                    }\r\n                } else {\r\n                    setTimeRemaining(timeRemaining - 1);\r\n                }\r\n            }, 1000);\r\n        }\r\n        return () => {\r\n            if (timeoutId != null) {\r\n                clearTimeout(timeoutId);\r\n            }\r\n        };\r\n    }, [timeRemaining, onTimeUp]);\r\n\r\n    return (\r\n        <Grid container justify=\"center\" alignItems=\"center\" style={{height: '100%'}}>\r\n            <Grid item>\r\n                <Box position=\"relative\" display=\"inline-flex\">\r\n                    <CircularProgress\r\n                        variant=\"determinate\"\r\n                        color={timeRemaining > 5 ? 'primary': 'secondary'}\r\n                        size=\"75px\"\r\n                        value={Math.round((timeRemaining * 100.0) / (time * 1.0))} />\r\n                    <Box\r\n                        top={0}\r\n                        left={0}\r\n                        bottom={0}\r\n                        right={0}\r\n                        position=\"absolute\"\r\n                        display=\"flex\"\r\n                        alignItems=\"center\"\r\n                        justifyContent=\"center\"\r\n                    >\r\n                        <Typography variant=\"h5\" component=\"div\" color=\"textSecondary\">{timeRemaining}</Typography>\r\n                    </Box>\r\n                </Box>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/correct.6415db46.wav\";","export default __webpack_public_path__ + \"static/media/incorrect.70fff5c7.wav\";","import React, { useState } from 'react';\r\nimport { Card, Fab, Grid, Icon, makeStyles } from '@material-ui/core';\r\nimport useSound from 'use-sound';\r\nimport { ChallengeQuestion } from '../common/ChallengeQuestion';\r\nimport { SelectableOption } from '../common/SelectableOption';\r\nimport { SelectAnswerChallenge, SelectAnswerChallengeAnswer } from '../../types/SelectAnswerChallenge';\r\nimport { PictureGrid } from '../common/PictureGrid';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { Countdown } from '../common/Countdown';\r\n\r\nimport correct from '../../assets/sounds/correct.wav';\r\nimport incorrect from '../../assets/sounds/incorrect.wav';\r\nimport { ChallengeOptions, ChallengePicture } from '../../types/Challenge';\r\nimport { Language } from '../../enums/Language';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        backgroundColor: '#f0f0f0'\r\n    },\r\n    titleContainer: {\r\n        height: '20%'\r\n    },\r\n    pictureContainer: {\r\n        height: '50%'\r\n    },\r\n    answerContainer: {\r\n        height: '30%',\r\n        paddingTop: '10px'\r\n    },\r\n    optionContainer: {\r\n        height: '50%'\r\n    },\r\n    centerAll: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    }\r\n}));\r\n\r\ninterface SelectAnswerChallengerProps {\r\n    mode: ComponentMode,\r\n    challenge: SelectAnswerChallenge,\r\n    options?: ChallengeOptions,\r\n    onChallengeChange?: (updatedChallenge: SelectAnswerChallenge) => void,\r\n    onSuccess?: () => void,\r\n    onError?: () => void\r\n}\r\n\r\nexport const SelectAnswerChallenger: React.FC<SelectAnswerChallengerProps> = (props: SelectAnswerChallengerProps) => {\r\n    const { mode, challenge, options, onChallengeChange, onSuccess, onError } = props;\r\n\r\n    const [stopTimer, setStopTimer] = useState<boolean>(false);\r\n    const [selectedAnswers, setSelectedAnswers] = useState<number[]>([]);\r\n    const [highlightResults, setHighlightResults] = useState<boolean>(false);\r\n\r\n    const [playCorrect] = useSound(correct);\r\n    const [playIncorrect] = useSound(incorrect);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleTitleChange = (newTitle: string) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                question: newTitle\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlePicturesChange = (newPictures: ChallengePicture[]) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                pictures: [...newPictures]\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleAnswerChange = (position: number, updatedAnswer: SelectAnswerChallengeAnswer) => {\r\n        const updatedAnswers = challenge.answers.map((anAnswer: SelectAnswerChallengeAnswer, idx: number) => {\r\n            if (idx !== position) {\r\n                if (!challenge.config.multiselect) {\r\n                    return {\r\n                        ...anAnswer,\r\n                        valid: false\r\n                    };\r\n                }\r\n                return { ...anAnswer };\r\n            }\r\n            return { ...updatedAnswer };\r\n        });\r\n\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                answers: updatedAnswers\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlerTimeUp = () => {\r\n        showResult(false);\r\n    };\r\n\r\n    const handlerOptionClick = (answerIdx: number) => {\r\n        if (mode === ComponentMode.Play) {\r\n            if (challenge.config.multiselect) {\r\n                const theIndex = selectedAnswers.findIndex((anAnswerIdx: number) => anAnswerIdx === answerIdx);\r\n                if (theIndex === -1) {\r\n                    setSelectedAnswers([...selectedAnswers, answerIdx]);\r\n                } else {\r\n                    setSelectedAnswers(selectedAnswers.filter((anAnswerIdx: number) => anAnswerIdx !== answerIdx));\r\n                }\r\n            } else {\r\n                if (challenge.answers[answerIdx].valid) {\r\n                    showResult(true);\r\n                } else {\r\n                    showResult(false);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleCheckClick = () => {\r\n        const wrongsSelected = selectedAnswers\r\n            .map((anAnswerIdx: number) => challenge.answers[anAnswerIdx])\r\n            .filter((anAnswer: SelectAnswerChallengeAnswer) => !anAnswer.valid);\r\n        if (wrongsSelected.length === 0) {\r\n            const validsNotSelected = challenge.answers\r\n                .filter((anAnswer: SelectAnswerChallengeAnswer, answerIdx: number) =>\r\n                    anAnswer.valid && selectedAnswers.indexOf(answerIdx) === -1\r\n                );\r\n            if (validsNotSelected.length === 0) {\r\n                showResult(true);\r\n                return;\r\n            }\r\n        }\r\n        showResult(false);\r\n    };\r\n\r\n    const showResult = (success: boolean) => {\r\n        setStopTimer(true);\r\n        setHighlightResults(true);\r\n\r\n        if (success) {\r\n            playCorrect();\r\n        } else {\r\n            playIncorrect();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (success) {\r\n                if (onSuccess) {\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                if (onError) {\r\n                    onError();\r\n                }\r\n            }\r\n        }, 2000);\r\n    };\r\n\r\n    return (\r\n        <Card variant='outlined' className={classes.root}>\r\n            <div className={classes.titleContainer}>\r\n                <ChallengeQuestion\r\n                    mode={mode}\r\n                    question={challenge.question}\r\n                    fontSize={challenge.config.questionFontSize}\r\n                    onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            <div className={classes.pictureContainer}>\r\n                <Grid container justify='center' style={{ height: '100%' }}>\r\n                    <Grid item xs={2} style={{ height: '100%' }}>\r\n                        {\r\n                            options != null && !options.ignoreTimeLimit && (\r\n                                <Countdown\r\n                                    mode={mode}\r\n                                    time={challenge.config.timeLimit}\r\n                                    stopTimer={stopTimer}\r\n                                    onTimeUp={handlerTimeUp}\r\n                                />\r\n                            )\r\n                        }\r\n                    </Grid>\r\n                    <Grid item xs={8} style={{ height: '100%' }}>\r\n                        <PictureGrid\r\n                            mode={mode}\r\n                            pictures={challenge.pictures}\r\n                            onPicturesChange={handlePicturesChange}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={2} style={{ height: '100%' }} className={classes.centerAll}>\r\n                        {\r\n                            challenge.config.multiselect && (\r\n                                <Fab\r\n                                    variant=\"extended\"\r\n                                    size=\"large\"\r\n                                    color=\"primary\"\r\n                                    disabled={mode === ComponentMode.Design || selectedAnswers.length === 0}\r\n                                    onClick={() => { handleCheckClick(); }}\r\n                                >\r\n                                    <Icon>check</Icon>&nbsp;{options?.language === Language.En ? 'Check' : 'Corregir'}\r\n                                </Fab>\r\n                            )\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n            <div className={classes.answerContainer}>\r\n                <Grid container justify='space-evenly' spacing={2} style={{ height: '100%' }}>\r\n                    <Grid item xs={5} className={classes.optionContainer}>\r\n                        <SelectableOption\r\n                            mode={mode}\r\n                            text={challenge.answers[0].text}\r\n                            icon=\"wb_sunny\"\r\n                            valid={challenge.answers[0].valid}\r\n                            selected={\r\n                                mode === ComponentMode.Play\r\n                                && selectedAnswers.indexOf(0) >= 0\r\n                            }\r\n                            color='#f44336'\r\n                            fontSize={challenge.config.answerFontSize}\r\n                            multiselect={challenge.config.multiselect}\r\n                            showResults={highlightResults}\r\n                            onTextChange={(newText: string) => {\r\n                                handleAnswerChange(0, { ...challenge.answers[0], text: newText });\r\n                            }}\r\n                            onValidChange={(valid: boolean) => {\r\n                                handleAnswerChange(0, { ...challenge.answers[0], valid });\r\n                            }}\r\n                            onClick={() => { handlerOptionClick(0); }}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={5} className={classes.optionContainer}>\r\n                        <SelectableOption\r\n                            mode={mode}\r\n                            text={challenge.answers[1].text}\r\n                            icon=\"brightness_2\"\r\n                            valid={challenge.answers[1].valid}\r\n                            selected={\r\n                                mode === ComponentMode.Play\r\n                                && selectedAnswers.indexOf(1) >= 0\r\n                            }\r\n                            color='#03a9f4'\r\n                            fontSize={challenge.config.answerFontSize}\r\n                            multiselect={challenge.config.multiselect}\r\n                            showResults={highlightResults}\r\n                            onTextChange={(newText: string) => {\r\n                                handleAnswerChange(1, { ...challenge.answers[1], text: newText });\r\n                            }}\r\n                            onValidChange={(valid: boolean) => {\r\n                                handleAnswerChange(1, { ...challenge.answers[1], valid });\r\n                            }}\r\n                            onClick={() => { handlerOptionClick(1); }}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={5} className={classes.optionContainer}>\r\n                        <SelectableOption\r\n                            mode={mode}\r\n                            text={challenge.answers[2].text}\r\n                            icon=\"flash_on\"\r\n                            valid={challenge.answers[2].valid}\r\n                            selected={\r\n                                mode === ComponentMode.Play\r\n                                && selectedAnswers.indexOf(2) >= 0\r\n                            }\r\n                            color='#ffc107'\r\n                            fontSize={challenge.config.answerFontSize}\r\n                            multiselect={challenge.config.multiselect}\r\n                            showResults={highlightResults}\r\n                            onTextChange={(newText: string) => {\r\n                                handleAnswerChange(2, { ...challenge.answers[2], text: newText });\r\n                            }}\r\n                            onValidChange={(valid: boolean) => {\r\n                                handleAnswerChange(2, { ...challenge.answers[2], valid });\r\n                            }}\r\n                            onClick={() => { handlerOptionClick(2); }}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={5} className={classes.optionContainer}>\r\n                        <SelectableOption\r\n                            mode={mode}\r\n                            text={challenge.answers[3].text}\r\n                            icon=\"cloud\"\r\n                            valid={challenge.answers[3].valid}\r\n                            selected={\r\n                                mode === ComponentMode.Play\r\n                                && selectedAnswers.indexOf(3) >= 0\r\n                            }\r\n                            color='#4caf50'\r\n                            fontSize={challenge.config.answerFontSize}\r\n                            multiselect={challenge.config.multiselect}\r\n                            showResults={highlightResults}\r\n                            onTextChange={(newText: string) => {\r\n                                handleAnswerChange(3, { ...challenge.answers[3], text: newText });\r\n                            }}\r\n                            onValidChange={(valid: boolean) => {\r\n                                handleAnswerChange(3, { ...challenge.answers[3], valid });\r\n                            }}\r\n                            onClick={() => { handlerOptionClick(3); }}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { FormControlLabel, Grid, makeStyles, Switch, TextField, Typography } from '@material-ui/core';\r\nimport { SelectAnswerChallengeConfig } from '../../types/SelectAnswerChallenge';\r\n\r\nconst useStyles = makeStyles({\r\n    fullWidth: {\r\n        width: '100%',\r\n    }\r\n});\r\n\r\ninterface SelectAnswerConfiguratorProps {\r\n    config: SelectAnswerChallengeConfig,\r\n    onConfigChange?: (config: SelectAnswerChallengeConfig) => void\r\n}\r\n\r\nexport const SelectAnswerConfigurator: React.FC<SelectAnswerConfiguratorProps> = (props: SelectAnswerConfiguratorProps) => {\r\n    const { config, onConfigChange } = props;\r\n\r\n    const [formData, setFormData] = useState<SelectAnswerChallengeConfig>(config);\r\n\r\n    const inputTimeLimit = useRef({} as HTMLInputElement);\r\n    const inputQuestionFontSize = useRef({} as HTMLInputElement);\r\n    const inputPictureCount = useRef({} as HTMLInputElement);\r\n    const checkPictureLabel = useRef({} as HTMLInputElement);\r\n    const inputAnswerFontSize = useRef({} as HTMLInputElement);\r\n    const checkMultiselect = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setFormData(config);\r\n    }, [config]);\r\n\r\n    const handleConfigParameterChange = (parameter: string, value: number | boolean) => {\r\n        const newConfig = {\r\n            ...formData,\r\n            [parameter]: value\r\n        };\r\n        setFormData(newConfig);\r\n        if (onConfigChange) {\r\n            onConfigChange(newConfig);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container direction='column' spacing={2}>\r\n            <Grid item>\r\n                <Typography variant='h5'>Configuracin</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputTimeLimit}\r\n                    type='number'\r\n                    label='Lmite de tiempo (segundos)'\r\n                    inputProps={{ min: 10 }}\r\n                    value={formData.timeLimit}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('timeLimit', parseInt(inputTimeLimit.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputQuestionFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra del ttulo'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.questionFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('questionFontSize', parseInt(inputQuestionFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputPictureCount}\r\n                    type='number'\r\n                    label='Nmero de imgenes'\r\n                    inputProps={{ min: 1, max: 9 }}\r\n                    value={formData.pictureCount}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('pictureCount', parseInt(inputPictureCount.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            inputRef={checkPictureLabel}\r\n                            name='checkPictureLabel'\r\n                            checked={formData.pictureLabel}\r\n                            color='secondary'\r\n                            onChange={() => { handleConfigParameterChange('pictureLabel', checkPictureLabel.current.checked); }}\r\n                        />}\r\n                    label='Numerar imgenes'\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputAnswerFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra de las respuestas'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.answerFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('answerFontSize', parseInt(inputAnswerFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            inputRef={checkMultiselect}\r\n                            name='checkMultiselect'\r\n                            checked={formData.multiselect}\r\n                            color='secondary'\r\n                            onChange={() => { handleConfigParameterChange('multiselect', checkMultiselect.current.checked); }}\r\n                        />\r\n                    }\r\n                    label='Respuesta mltiple'\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { SelectAnswerChallenge, SelectAnswerChallengeAnswer, SelectAnswerChallengeConfig } from '../../types/SelectAnswerChallenge';\r\nimport { SelectAnswerChallenger } from './SelectAnswerChallenger';\r\nimport { SelectAnswerConfigurator } from './SelectAnswerConfigurator';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { ChallengePicture } from '../../types/Challenge';\r\nimport { PictureType } from '../../enums/PictureType';\r\n\r\nconst useStyles = makeStyles({\r\n    fullHeight: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\ninterface SelectAnswerChallengeDesignerProps {\r\n    challenge: SelectAnswerChallenge,\r\n    onChallengeChange: (challenge: SelectAnswerChallenge) => void\r\n}\r\n\r\nexport const SelectAnswerChallengeDesigner: React.FC<SelectAnswerChallengeDesignerProps> = (\r\n    props: SelectAnswerChallengeDesignerProps\r\n) => {\r\n    const { challenge, onChallengeChange } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const readjustPictures = (pictureCount: number): ChallengePicture[] => {\r\n        let pictures = [...challenge.pictures];\r\n        if (pictureCount > pictures.length) {\r\n            const newPictures = Array.from(Array(pictureCount - pictures.length))\r\n                .map(() => ({ type: PictureType.None, data: ''}));\r\n            pictures = [...pictures, ...newPictures];\r\n        } else if (pictureCount < pictures.length) {\r\n            pictures = pictures.slice(0, pictureCount);\r\n        }\r\n        return pictures;\r\n    };\r\n\r\n    const readjustValidAnswers = (multiselect: boolean): SelectAnswerChallengeAnswer[] => {\r\n        let validPresent = false;\r\n        const answers: SelectAnswerChallengeAnswer[] = challenge.answers.map((anAnswer: SelectAnswerChallengeAnswer) => {\r\n            if (!multiselect) {\r\n                if (anAnswer.valid && !validPresent) {\r\n                    validPresent = true;\r\n                    return { ...anAnswer };\r\n                }\r\n                return { ...anAnswer, valid: false };\r\n            }\r\n            return { ...anAnswer };\r\n        });\r\n        return answers;\r\n    };\r\n\r\n    const handlerChallengeChange = (updatedChallenge: SelectAnswerChallenge) => {\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    const handleConfigChange = (config: SelectAnswerChallengeConfig) => {\r\n        const pictures = readjustPictures(config.pictureCount);\r\n        const answers = readjustValidAnswers(config.multiselect);\r\n        const updatedChallenge: SelectAnswerChallenge = {\r\n            ...challenge,\r\n            pictures: [...pictures],\r\n            answers: [...answers],\r\n            config\r\n        };\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    return (\r\n        <Grid container className={classes.fullHeight} spacing={2}>\r\n            <Grid item xs={10} className={classes.fullHeight}>\r\n                <SelectAnswerChallenger\r\n                    mode={ComponentMode.Design}\r\n                    challenge={challenge}\r\n                    onChallengeChange={handlerChallengeChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={2} className={classes.fullHeight}>\r\n                <SelectAnswerConfigurator config={challenge.config} onConfigChange={handleConfigChange} />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Card, Grid, makeStyles } from '@material-ui/core';\r\nimport useSound from 'use-sound';\r\nimport { ChallengeQuestion } from '../common/ChallengeQuestion';\r\nimport { SelectableOption } from '../common/SelectableOption';\r\nimport { TrueOrFalseChallenge } from '../../types/TrueOrFalseChallenge';\r\nimport { PictureGrid } from '../common/PictureGrid';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { Countdown } from '../common/Countdown';\r\n\r\nimport correct from '../../assets/sounds/correct.wav';\r\nimport incorrect from '../../assets/sounds/incorrect.wav';\r\nimport { ChallengeOptions, ChallengePicture } from '../../types/Challenge';\r\nimport { Language } from '../../enums/Language';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        backgroundColor: '#f0f0f0'\r\n    },\r\n    titleContainer: {\r\n        height: '20%'\r\n    },\r\n    pictureContainer: {\r\n        height: '60%'\r\n    },\r\n    answerContainer: {\r\n        height: '20%',\r\n        paddingTop: '10px'\r\n    },\r\n    optionContainer: {\r\n        height: '100%'\r\n    },\r\n    centerAll: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    }\r\n}));\r\n\r\ninterface TrueOrFalseChallengerProps {\r\n    mode: ComponentMode,\r\n    challenge: TrueOrFalseChallenge,\r\n    options?: ChallengeOptions,\r\n    onChallengeChange?: (updatedChallenge: TrueOrFalseChallenge) => void,\r\n    onSuccess?: () => void,\r\n    onError?: () => void\r\n}\r\n\r\nexport const TrueOrFalseChallenger: React.FC<TrueOrFalseChallengerProps> = (props: TrueOrFalseChallengerProps) => {\r\n    const { mode, challenge, options, onChallengeChange, onSuccess, onError } = props;\r\n\r\n    const [stopTimer, setStopTimer] = useState<boolean>(false);\r\n    const [highlightResults, setHighlightResults] = useState<boolean>(false);\r\n\r\n    const [playCorrect] = useSound(correct);\r\n    const [playIncorrect] = useSound(incorrect);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleTitleChange = (newTitle: string) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                question: newTitle\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlePicturesChange = (newPictures: ChallengePicture[]) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                pictures: [...newPictures]\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleAnswerChange = (updatedAnswer: boolean) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                answer: updatedAnswer\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlerTimeUp = () => {\r\n        showResult(false);\r\n    };\r\n\r\n    const handlerOptionClick = (answer: boolean) => {\r\n        if (mode === ComponentMode.Play) {\r\n            if (challenge.answer === answer) {\r\n                showResult(true);\r\n            } else {\r\n                showResult(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const showResult = (success: boolean) => {\r\n        setStopTimer(true);\r\n        setHighlightResults(true);\r\n\r\n        if (success) {\r\n            playCorrect();\r\n        } else {\r\n            playIncorrect();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (success) {\r\n                if (onSuccess) {\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                if (onError) {\r\n                    onError();\r\n                }\r\n            }\r\n        }, 2000);\r\n    };\r\n\r\n    return (\r\n        <Card variant='outlined' className={classes.root}>\r\n            <div className={classes.titleContainer}>\r\n                <ChallengeQuestion\r\n                    mode={mode}\r\n                    question={challenge.question}\r\n                    fontSize={challenge.config.questionFontSize}\r\n                    onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            <div className={classes.pictureContainer}>\r\n                <Grid container justify='center' style={{ height: '100%' }}>\r\n                    <Grid item xs={2} style={{ height: '100%' }}>\r\n                        {\r\n                            options != null && !options.ignoreTimeLimit && (\r\n                                <Countdown\r\n                                    mode={mode}\r\n                                    time={challenge.config.timeLimit}\r\n                                    stopTimer={stopTimer}\r\n                                    onTimeUp={handlerTimeUp}\r\n                                />\r\n                            )\r\n                        }\r\n                    </Grid>\r\n                    <Grid item xs={8} style={{ height: '100%' }}>\r\n                        <PictureGrid\r\n                            mode={mode}\r\n                            pictures={challenge.pictures}\r\n                            onPicturesChange={handlePicturesChange}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={2} style={{ height: '100%' }} className={classes.centerAll} />\r\n                </Grid>\r\n            </div>\r\n            <div className={classes.answerContainer}>\r\n                <Grid container justify='space-evenly' spacing={2} style={{ height: '100%' }}>\r\n                    <Grid item xs={5} className={classes.optionContainer}>\r\n                        <SelectableOption\r\n                            mode={mode}\r\n                            text={options?.language === Language.En ? 'True' : 'Verdadero'}\r\n                            icon=\"wb_sunny\"\r\n                            valid={challenge.answer}\r\n                            color='#4caf50'\r\n                            fontSize={42}\r\n                            showResults={highlightResults}\r\n                            onValidChange={(valid: boolean) => {\r\n                                handleAnswerChange(true);\r\n                            }}\r\n                            onClick={() => { handlerOptionClick(true); }}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={5} className={classes.optionContainer}>\r\n                        <SelectableOption\r\n                            mode={mode}\r\n                            text={options?.language === Language.En ? 'False' : 'Falso'}\r\n                            icon=\"brightness_2\"\r\n                            valid={!challenge.answer}\r\n                            color='#f44336'\r\n                            fontSize={42}\r\n                            showResults={highlightResults}\r\n                            onValidChange={(valid: boolean) => {\r\n                                handleAnswerChange(false);\r\n                            }}\r\n                            onClick={() => { handlerOptionClick(false); }}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { FormControlLabel, Grid, makeStyles, Switch, TextField, Typography } from '@material-ui/core';\r\nimport { TrueOrFalseChallengeConfig } from '../../types/TrueOrFalseChallenge';\r\n\r\nconst useStyles = makeStyles({\r\n    fullWidth: {\r\n        width: '100%',\r\n    }\r\n});\r\n\r\ninterface TrueOrFalseConfiguratorProps {\r\n    config: TrueOrFalseChallengeConfig,\r\n    onConfigChange?: (config: TrueOrFalseChallengeConfig) => void\r\n}\r\n\r\nexport const TrueOrFalseConfigurator: React.FC<TrueOrFalseConfiguratorProps> = (props: TrueOrFalseConfiguratorProps) => {\r\n    const { config, onConfigChange } = props;\r\n\r\n    const [formData, setFormData] = useState<TrueOrFalseChallengeConfig>(config);\r\n\r\n    const inputTimeLimit = useRef({} as HTMLInputElement);\r\n    const inputQuestionFontSize = useRef({} as HTMLInputElement);\r\n    const inputPictureCount = useRef({} as HTMLInputElement);\r\n    const checkPictureLabel = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setFormData(config);\r\n    }, [config]);\r\n\r\n    const handleConfigParameterChange = (parameter: string, value: number | boolean) => {\r\n        const newConfig = {\r\n            ...formData,\r\n            [parameter]: value\r\n        };\r\n        setFormData(newConfig);\r\n        if (onConfigChange) {\r\n            onConfigChange(newConfig);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container direction='column' spacing={2}>\r\n            <Grid item>\r\n                <Typography variant='h5'>Configuracin</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputTimeLimit}\r\n                    type='number'\r\n                    label='Lmite de tiempo (segundos)'\r\n                    inputProps={{ min: 10 }}\r\n                    value={formData.timeLimit}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('timeLimit', parseInt(inputTimeLimit.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputQuestionFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra del ttulo'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.questionFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('questionFontSize', parseInt(inputQuestionFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputPictureCount}\r\n                    type='number'\r\n                    label='Nmero de imgenes'\r\n                    inputProps={{ min: 1, max: 9 }}\r\n                    value={formData.pictureCount}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('pictureCount', parseInt(inputPictureCount.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            inputRef={checkPictureLabel}\r\n                            name='checkPictureLabel'\r\n                            checked={formData.pictureLabel}\r\n                            color='secondary'\r\n                            onChange={() => { handleConfigParameterChange('pictureLabel', checkPictureLabel.current.checked); }}\r\n                        />}\r\n                    label='Numerar imgenes'\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { TrueOrFalseChallenge, TrueOrFalseChallengeConfig } from '../../types/TrueOrFalseChallenge';\r\nimport { TrueOrFalseChallenger } from './TrueOrFalseChallenger';\r\nimport { TrueOrFalseConfigurator } from './TrueOrFalseConfigurator';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { ChallengePicture } from '../../types/Challenge';\r\nimport { PictureType } from '../../enums/PictureType';\r\n\r\nconst useStyles = makeStyles({\r\n    fullHeight: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\ninterface TrueOrFalseChallengeDesignerProps {\r\n    challenge: TrueOrFalseChallenge,\r\n    onChallengeChange: (challenge: TrueOrFalseChallenge) => void\r\n}\r\n\r\nexport const TrueOrFalseChallengeDesigner: React.FC<TrueOrFalseChallengeDesignerProps> = (\r\n    props: TrueOrFalseChallengeDesignerProps\r\n) => {\r\n    const { challenge, onChallengeChange } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const readjustPictures = (pictureCount: number): ChallengePicture[] => {\r\n        let pictures = [...challenge.pictures];\r\n        if (pictureCount > pictures.length) {\r\n            const newPictures = Array.from(Array(pictureCount - pictures.length))\r\n                .map(() => ({ type: PictureType.None, data: ''}));\r\n            pictures = [...pictures, ...newPictures];\r\n        } else if (pictureCount < pictures.length) {\r\n            pictures = pictures.slice(0, pictureCount);\r\n        }\r\n        return pictures;\r\n    };\r\n\r\n    const handlerChallengeChange = (updatedChallenge: TrueOrFalseChallenge) => {\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    const handleConfigChange = (config: TrueOrFalseChallengeConfig) => {\r\n        const pictures = readjustPictures(config.pictureCount);\r\n        const updatedChallenge: TrueOrFalseChallenge = {\r\n            ...challenge,\r\n            pictures: [...pictures],\r\n            config\r\n        };\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    return (\r\n        <Grid container className={classes.fullHeight} spacing={2}>\r\n            <Grid item xs={10} className={classes.fullHeight}>\r\n                <TrueOrFalseChallenger\r\n                    mode={ComponentMode.Design}\r\n                    challenge={challenge}\r\n                    onChallengeChange={handlerChallengeChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={2} className={classes.fullHeight}>\r\n                <TrueOrFalseConfigurator config={challenge.config} onConfigChange={handleConfigChange} />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\nimport React, { CSSProperties } from 'react';\r\nimport { useDrag } from 'react-dnd';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    item: {\r\n        borderRadius: '10em',\r\n        backgroundColor: theme.palette.primary.main,\r\n        color: theme.palette.primary.contrastText,\r\n        padding: '0.5rem 1rem',\r\n        cursor: 'move',\r\n    }\r\n}));\r\n\r\ninterface DragableItemProps {\r\n    name: string,\r\n    style?: CSSProperties,\r\n    iconButton?: React.ReactNode\r\n}\r\n\r\nexport const DragableItem: React.FC<DragableItemProps> = (props: DragableItemProps) => {\r\n    const  { name, style, iconButton } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const [{ opacity }, drag] = useDrag(\r\n        () => ({\r\n            type: 'dnd',\r\n            item: { name },\r\n            collect: (monitor) => ({\r\n                opacity: monitor.isDragging() ? 0.4 : 1,\r\n            }),\r\n        }),\r\n        [name],\r\n    );\r\n\r\n    return (\r\n        <div\r\n            ref={drag}\r\n            className={classes.item}\r\n            style={{\r\n                opacity,\r\n                ...style\r\n            }}\r\n        >\r\n            {name}\r\n            {\r\n                iconButton\r\n            }\r\n        </div>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Card, Chip, Grid, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { useDrop } from 'react-dnd';\r\nimport { DragableItem } from '../common/DragableItem';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n    },\r\n    fullWidth: {\r\n        width: '100%'\r\n    },\r\n    fullHeight: {\r\n        height: '100%'\r\n    },\r\n    titleContainer: {\r\n        width: '100%',\r\n        padding: '5px',\r\n        backgroundColor: theme.palette.primary.main,\r\n        color: theme.palette.primary.contrastText\r\n    },\r\n    itemsContainer: {\r\n        padding: '5px',\r\n        height: '100%'\r\n    }\r\n}));\r\n\r\ninterface GroupState {\r\n    title: string,\r\n    validItems: string[],\r\n    droppedItems: string[]\r\n}\r\n\r\ninterface DropGroupProps {\r\n    mode: ComponentMode,\r\n    title: string,\r\n    validItems: string[],\r\n    showResults: boolean,\r\n    fontSize?: number,\r\n    onTitleChange?: (newTitle: string) => void,\r\n    onItemsChange?: (newTitle: string[]) => void,\r\n    droppedItems?: string[],\r\n    onDrop?: (item: unknown) => void\r\n}\r\n\r\nexport const DropGroup: React.FC<DropGroupProps> = (props: DropGroupProps) => {\r\n    const {\r\n        mode,\r\n        title,\r\n        validItems,\r\n        showResults,\r\n        fontSize,\r\n        onTitleChange,\r\n        onItemsChange,\r\n        droppedItems,\r\n        onDrop\r\n    } = props;\r\n\r\n    const handleDrop = (item: unknown) => {\r\n        if(onDrop) {\r\n            onDrop(item);\r\n        }\r\n    };\r\n\r\n    const [{ isOver, canDrop }, drop] = useDrop({\r\n        accept: 'dnd',\r\n        drop: handleDrop,\r\n        collect: (monitor: { isOver: () => boolean, canDrop: () => boolean }) => ({\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop(),\r\n        })\r\n    });\r\n\r\n    const [groupState, setGroupState] = useState<GroupState>({\r\n        title: title || '',\r\n        validItems: validItems || [],\r\n        droppedItems: droppedItems || []\r\n    });\r\n\r\n    const inputTitle = useRef({} as HTMLInputElement);\r\n    const inputItem = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        if (droppedItems != null) {\r\n            setGroupState({\r\n                ...groupState,\r\n                droppedItems: [...droppedItems]\r\n            });\r\n        }\r\n    }, [droppedItems]);\r\n\r\n\r\n    const handleTitleChange = () => {\r\n        const newState = {\r\n            ...groupState,\r\n            title: inputTitle.current.value\r\n        };\r\n        setGroupState(newState);\r\n        if (onTitleChange) {\r\n            onTitleChange(inputTitle.current.value);\r\n        }\r\n    };\r\n\r\n    const handleValidItemKeyPress = (evt: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (evt.code === 'Enter' && inputItem.current.value !== '') {\r\n            addValidItem();\r\n        }\r\n    };\r\n\r\n    const addValidItem = () => {\r\n        const updatedItems = [...(groupState.validItems), inputItem.current.value];\r\n        const newState: GroupState = {\r\n            ...groupState,\r\n            validItems: updatedItems\r\n        };\r\n        setGroupState(newState);\r\n        if (onItemsChange) {\r\n            onItemsChange(updatedItems);\r\n        }\r\n        inputItem.current.value = '';\r\n    };\r\n\r\n    const handleRemoveValidItem = (itemIdx: number) => {\r\n        const updatedItems = groupState.validItems.filter((anItem: string, idx: number) => itemIdx !== idx);\r\n        const newState: GroupState = {\r\n            ...groupState,\r\n            validItems: updatedItems\r\n        };\r\n        setGroupState(newState);\r\n        if (onItemsChange) {\r\n            onItemsChange(updatedItems);\r\n        }\r\n    };\r\n\r\n    const getDragableItemStyle = (item: string) => showResults ? (\r\n        validItems.indexOf(item) >= 0 ? {\r\n            fontSize: `${fontSize}px`,\r\n            backgroundColor: '#4caf50'\r\n        } : {\r\n            fontSize: `${fontSize}px`,\r\n            backgroundColor: '#f44336'\r\n        }\r\n    ) : {fontSize: `${fontSize}px`};\r\n\r\n    return (\r\n        <Card\r\n            elevation={4}\r\n            className={classes.root}\r\n            style={{\r\n                backgroundColor: (isOver && canDrop) ? '#efefef' : '#ffffff'\r\n            }}\r\n        >\r\n            <Grid container direction=\"column\" className={`${classes.fullHeight} ${classes.fullWidth}`}>\r\n                <Grid item className={classes.titleContainer}>\r\n                    {\r\n                        mode === ComponentMode.Play ? (\r\n                            <Typography style={{ fontSize }}>\r\n                                { title}\r\n                            </Typography>\r\n                        ) : (\r\n                            <TextField\r\n                                inputRef={inputTitle}\r\n                                value={groupState.title}\r\n                                style={{\r\n                                    width: '100%'\r\n                                }}\r\n                                inputProps={\r\n                                    {\r\n                                        style: {\r\n                                            fontSize,\r\n                                            textAlign: 'center',\r\n                                            color: '#ffffff'\r\n\r\n                                        }\r\n                                    }\r\n                                }\r\n                                onInput={handleTitleChange}\r\n                            />\r\n                        )\r\n                    }\r\n                </Grid>\r\n                <Grid item xs>\r\n                    <Grid container direction=\"column\" alignItems=\"center\" className={classes.itemsContainer} spacing={2}>\r\n                        {\r\n                            mode === ComponentMode.Design\r\n                            && groupState.validItems.map((anItem: string, itemIdx: number) => (\r\n                                <Grid item key={`item_${itemIdx}`}>\r\n                                    <Chip\r\n                                        label={anItem}\r\n                                        color=\"secondary\"\r\n                                        size=\"medium\"\r\n                                        style={{ fontSize, color: '#ffffff' }}\r\n                                        onDelete={() => handleRemoveValidItem(itemIdx)}\r\n                                    />\r\n                                </Grid>\r\n                            ))\r\n                        }\r\n                        {\r\n                            mode === ComponentMode.Design && (\r\n                                <Grid item key=\"newItem\">\r\n                                    <TextField\r\n                                        inputRef={inputItem}\r\n                                        variant=\"outlined\"\r\n                                        InputProps={\r\n                                            {\r\n                                                style: {\r\n                                                    fontSize,\r\n                                                    color: '#000000'\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                        label=\"Nuevo elemento\"\r\n                                        onKeyPress={handleValidItemKeyPress}\r\n                                    />\r\n                                </Grid>\r\n                            )\r\n                        }\r\n                        {\r\n                            mode === ComponentMode.Play && (\r\n                                <Grid item key=\"dropItem\" xs className={`${classes.fullWidth} ${classes.fullHeight}`}>\r\n                                    <div\r\n                                        ref={drop}\r\n                                        className={`${classes.fullWidth} ${classes.fullHeight}`}\r\n                                    >\r\n                                        <Grid container direction=\"column\" alignItems=\"center\" spacing={1} className={classes.fullHeight}>\r\n                                            {\r\n                                                groupState.droppedItems.map((aDroppedItem: string) => (\r\n                                                    <Grid\r\n                                                        item\r\n                                                        key={`gridItem_${aDroppedItem}`}\r\n                                                    >\r\n                                                        <DragableItem\r\n                                                            key={aDroppedItem}\r\n                                                            name={aDroppedItem}\r\n                                                            style={getDragableItemStyle(aDroppedItem)}\r\n                                                        />\r\n                                                    </Grid>\r\n                                                ))\r\n                                            }\r\n                                        </Grid>\r\n                                    </div>\r\n                                </Grid>\r\n                            )\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </Card>\r\n    );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Card, Fab, Grid, Icon, makeStyles } from '@material-ui/core';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport useSound from 'use-sound';\r\nimport { ChallengeQuestion } from '../common/ChallengeQuestion';\r\nimport { ClassifyChallenge, ClassifyChallengeGroup } from '../../types/ClassifyChallenge';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { Countdown } from '../common/Countdown';\r\n\r\nimport correct from '../../assets/sounds/correct.wav';\r\nimport incorrect from '../../assets/sounds/incorrect.wav';\r\nimport { DropGroup } from './DropGroup';\r\nimport { DragableItem } from '../common/DragableItem';\r\nimport { ChallengeOptions } from '../../types/Challenge';\r\nimport { Language } from '../../enums/Language';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        backgroundColor: '#f0f0f0'\r\n    },\r\n    fullHeight: {\r\n        height: '100%'\r\n    },\r\n    titleContainer: {\r\n        height: '20%'\r\n    },\r\n    classifyContainer: {\r\n        height: '80%'\r\n    },\r\n    centerAll: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    optionsContainer: {\r\n        height: '20%',\r\n        border: 'solid 1px gray',\r\n        backgroundColor: '#ffffff'\r\n    },\r\n    groupsContainer: {\r\n        height: '80%'\r\n    },\r\n}));\r\n\r\ninterface dropState {\r\n    groupName: string,\r\n    items: string[]\r\n}\r\n\r\nconst initialClassifyState = (challenge: ClassifyChallenge): dropState[] => {\r\n    return challenge.groups.map((aGroup: ClassifyChallengeGroup) => (\r\n        {\r\n            groupName: aGroup.name,\r\n            items: []\r\n        }\r\n    ));\r\n};\r\n\r\nconst reorderItems = (groups: ClassifyChallengeGroup[], mode: ComponentMode): string[] => {\r\n    let list: string[] = groups.reduce((acc: string[], current: ClassifyChallengeGroup) => [...acc, ...current.items], []);\r\n    if (mode === ComponentMode.Play) {\r\n        list = list.sort(() => Math.random() - 0.5);\r\n    }\r\n    return list;\r\n};\r\n\r\ninterface ClassifyChallengerProps {\r\n    mode: ComponentMode,\r\n    challenge: ClassifyChallenge,\r\n    options?: ChallengeOptions,\r\n    onChallengeChange?: (updatedChallenge: ClassifyChallenge) => void,\r\n    onSuccess?: () => void,\r\n    onError?: () => void\r\n}\r\n\r\nexport const ClassifyChallenger: React.FC<ClassifyChallengerProps> = (props: ClassifyChallengerProps) => {\r\n    const { mode, challenge, options, onChallengeChange, onSuccess, onError } = props;\r\n\r\n    const [classifyState, setClassifyState] =useState<dropState[]>(initialClassifyState(challenge));\r\n\r\n    const [stopTimer, setStopTimer] = useState<boolean>(false);\r\n    const [highlightResults, setHighlightResults] = useState<boolean>(false);\r\n\r\n    const [draggableItems, setDragabbleItems] = useState<string[]>(reorderItems(challenge.groups, mode));\r\n\r\n    const [playCorrect] = useSound(correct);\r\n    const [playIncorrect] = useSound(incorrect);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setDragabbleItems(reorderItems(challenge.groups, mode));\r\n    }, [challenge.groups]);\r\n\r\n    const handleTitleChange = (newTitle: string) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                question: newTitle\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleNameChange = (groupIdx: number, updatedName: string) => {\r\n        const updatedGroups = challenge.groups.map((aGroup: ClassifyChallengeGroup, idx: number) => {\r\n            return {\r\n                ...aGroup,\r\n                name: idx !== groupIdx ? aGroup.name : updatedName\r\n            };\r\n        });\r\n\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                groups: updatedGroups\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleItemsChange = (groupIdx: number, updatedItems: string[]) => {\r\n        const updatedGroups = challenge.groups.map((aGroup: ClassifyChallengeGroup, idx: number) => {\r\n            if (idx !== groupIdx) {\r\n                return { ...aGroup };\r\n            }\r\n            return {\r\n                ...aGroup,\r\n                items: [...updatedItems]\r\n            };\r\n        });\r\n\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                groups: updatedGroups\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlerTimeUp = () => {\r\n        showResult(false);\r\n    };\r\n\r\n    const handleCheckClick = () => {\r\n        const correct = challenge.groups.reduce(\r\n            (accGroups: boolean, currentGroup: ClassifyChallengeGroup) => {\r\n                const correctItems = currentGroup.items.reduce(\r\n                    (accItems: boolean, currentItem: string) => {\r\n                        const theGroup = classifyState.find((aGroup: dropState) => aGroup.groupName === currentGroup.name);\r\n                        if (theGroup != null) {\r\n                            return accItems && theGroup.items.indexOf(currentItem) >= 0;\r\n                        }\r\n                        return false;\r\n                    },\r\n                    true\r\n                );\r\n                return accGroups && correctItems;\r\n            },\r\n            true\r\n        );\r\n        showResult(correct);\r\n    };\r\n\r\n    const showResult = (success: boolean) => {\r\n        setStopTimer(true);\r\n        setHighlightResults(true);\r\n\r\n        if (success) {\r\n            playCorrect();\r\n        } else {\r\n            playIncorrect();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (success) {\r\n                if (onSuccess) {\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                if (onError) {\r\n                    onError();\r\n                }\r\n            }\r\n        }, 2000);\r\n    };\r\n\r\n    const isDropped = (itemName: string) => classifyState.reduce(\r\n        (acc: boolean, current: dropState) => acc || current.items.indexOf(itemName) >= 0,\r\n        false\r\n    );\r\n\r\n    const completed = () => {\r\n        const optionCount = challenge.groups.reduce(\r\n            (acc: number, current: ClassifyChallengeGroup) => acc + current.items.length,\r\n            0\r\n        );\r\n        const dropCount = classifyState.reduce(\r\n            (acc: number, current: dropState) => acc + current.items.length,\r\n            0\r\n        );\r\n        return optionCount === dropCount;\r\n    };\r\n\r\n    const handleDrop = (groupName: string, droppedItem: any) => {\r\n        const newDroppedItems: dropState[] = classifyState.map((aGroup: { groupName: string, items: string[]}) => {\r\n            if (aGroup.groupName !== groupName) {\r\n                return {\r\n                    ...aGroup,\r\n                    items: aGroup.items.filter((anItem: string) => anItem !== droppedItem.name)\r\n                };\r\n            }\r\n\r\n            const idxItem = aGroup.items.findIndex((anItem: string) => anItem === droppedItem.name);\r\n            if (idxItem >= 0) {\r\n                return {...aGroup};\r\n            }\r\n            return {\r\n                ...aGroup,\r\n                items: [\r\n                    ...aGroup.items,\r\n                    droppedItem.name\r\n                ]\r\n            };\r\n        });\r\n        setClassifyState(newDroppedItems);\r\n    };\r\n\r\n    return (\r\n        <Card variant='outlined' className={classes.root}>\r\n            <div className={classes.titleContainer}>\r\n                <ChallengeQuestion\r\n                    mode={mode}\r\n                    question={challenge.question}\r\n                    fontSize={challenge.config.questionFontSize}\r\n                    onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            <div className={classes.classifyContainer}>\r\n                <Grid container justify='center' className={classes.fullHeight}>\r\n                    <Grid item xs={2} className={classes.fullHeight}>\r\n                        {\r\n                            options != null && !options.ignoreTimeLimit && (\r\n                                <Countdown\r\n                                    mode={mode}\r\n                                    time={challenge.config.timeLimit}\r\n                                    stopTimer={stopTimer}\r\n                                    onTimeUp={handlerTimeUp}\r\n                                />\r\n                            )\r\n                        }\r\n                    </Grid>\r\n                    <Grid item xs={8} className={classes.fullHeight}>\r\n                        <DndProvider backend={HTML5Backend}>\r\n                            <Grid container spacing={2} className={classes.fullHeight}>\r\n                                <Grid item xs={12} className={classes.optionsContainer}>\r\n                                    <Grid container spacing={2} justify=\"space-around\" alignItems=\"center\">\r\n                                        {\r\n                                            draggableItems.map((anItem: string, idx: number) => !isDropped(anItem) && (\r\n                                                !isDropped(anItem) && (\r\n                                                    <Grid item key={`gridItem_${idx}`}>\r\n                                                        <DragableItem\r\n                                                            name={anItem}\r\n                                                            key={`dragable_${idx}`}\r\n                                                            style={{fontSize: challenge.config.itemsFontSize}}\r\n                                                        />\r\n                                                    </Grid>\r\n                                                )\r\n                                            ))\r\n                                        }\r\n                                    </Grid>\r\n                                </Grid>\r\n                                <Grid item xs={12} className={classes.groupsContainer}>\r\n                                    <Grid container justify=\"space-evenly\" spacing={2} style={{ height: '100%' }}>\r\n                                        {\r\n                                            challenge.groups.map((aGroup: ClassifyChallengeGroup, idx: number) => (\r\n                                                <Grid\r\n                                                    item\r\n                                                    xs={4}\r\n                                                    key={`group_${idx}`}\r\n                                                >\r\n                                                    <DropGroup\r\n                                                        mode={mode}\r\n                                                        title={aGroup.name}\r\n                                                        validItems={aGroup.items}\r\n                                                        showResults={highlightResults}\r\n                                                        fontSize={challenge.config.itemsFontSize}\r\n                                                        onTitleChange={(newName: string) => handleNameChange(idx, newName)}\r\n                                                        onItemsChange={(newItems: string[]) => handleItemsChange(idx, newItems)}\r\n                                                        droppedItems={\r\n                                                            classifyState\r\n                                                                .find((auxGroup: dropState) => auxGroup.groupName === aGroup.name)\r\n                                                                ?.items\r\n                                                        }\r\n                                                        onDrop={(droppedItem: unknown) => handleDrop(aGroup.name, droppedItem)}\r\n                                                    />\r\n                                                </Grid>\r\n                                            ))\r\n                                        }\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </DndProvider>\r\n                    </Grid>\r\n                    <Grid item xs={2} style={{ height: '100%' }} className={classes.centerAll}>\r\n                        {\r\n                            <Fab\r\n                                variant=\"extended\"\r\n                                size=\"large\"\r\n                                color=\"primary\"\r\n                                disabled={mode === ComponentMode.Design || !completed()}\r\n                                onClick={() => { handleCheckClick(); }}\r\n                            >\r\n                                <Icon>check</Icon>&nbsp;{options?.language === Language.En ? 'Check' : 'Corregir'}\r\n                            </Fab>\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Grid, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { ClassifyChallengeConfig } from '../../types/ClassifyChallenge';\r\n\r\nconst useStyles = makeStyles({\r\n    fullWidth: {\r\n        width: '100%',\r\n    }\r\n});\r\n\r\ninterface ClassifyConfiguratorProps {\r\n    config: ClassifyChallengeConfig,\r\n    onConfigChange?: (config: ClassifyChallengeConfig) => void\r\n}\r\n\r\nexport const ClassifyConfigurator: React.FC<ClassifyConfiguratorProps> = (props: ClassifyConfiguratorProps) => {\r\n    const { config, onConfigChange } = props;\r\n\r\n    const [formData, setFormData] = useState<ClassifyChallengeConfig>(config);\r\n\r\n    const inputTimeLimit = useRef({} as HTMLInputElement);\r\n    const inputQuestionFontSize = useRef({} as HTMLInputElement);\r\n    const inputItemsFontSize = useRef({} as HTMLInputElement);\r\n    const inputGroupCount = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setFormData(config);\r\n    }, [config]);\r\n\r\n    const handleConfigParameterChange = (parameter: string, value: number | boolean) => {\r\n        const newConfig = {\r\n            ...formData,\r\n            [parameter]: value\r\n        };\r\n        setFormData(newConfig);\r\n        if (onConfigChange) {\r\n            onConfigChange(newConfig);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container direction='column' spacing={2}>\r\n            <Grid item>\r\n                <Typography variant='h5'>Configuracin</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputTimeLimit}\r\n                    type='number'\r\n                    label='Lmite de tiempo (segundos)'\r\n                    inputProps={{ min: 10 }}\r\n                    value={formData.timeLimit}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('timeLimit', parseInt(inputTimeLimit.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputQuestionFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra del ttulo'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.questionFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('questionFontSize', parseInt(inputQuestionFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputItemsFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra de los elementos'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.itemsFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('itemsFontSize', parseInt(inputItemsFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputGroupCount}\r\n                    type='number'\r\n                    label='Nmero de grupos'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.groupCount}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('groupCount', parseInt(inputGroupCount.current.value)); }}\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { ClassifyChallenge, ClassifyChallengeConfig, ClassifyChallengeGroup } from '../../types/ClassifyChallenge';\r\nimport { ClassifyChallenger } from './ClassifyChallenger';\r\nimport { ClassifyConfigurator } from './ClassifyConfigurator';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\n\r\nconst useStyles = makeStyles({\r\n    fullHeight: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\ninterface ClassifyChallengeDesignerProps {\r\n    challenge: ClassifyChallenge,\r\n    onChallengeChange: (challenge: ClassifyChallenge) => void\r\n}\r\n\r\nexport const ClassifyChallengeDesigner: React.FC<ClassifyChallengeDesignerProps> = (\r\n    props: ClassifyChallengeDesignerProps\r\n) => {\r\n    const { challenge, onChallengeChange } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const readjustGroups = (groupCount: number): ClassifyChallengeGroup[] => {\r\n        let groups = [...challenge.groups];\r\n        if (groupCount > groups.length) {\r\n            const newGroups = Array.from(Array(groupCount - groups.length))\r\n                .map(() => ({ name: '', items: []}));\r\n            groups = [...groups, ...newGroups];\r\n        } else if (groupCount < groups.length) {\r\n            groups = groups.slice(0, groupCount);\r\n        }\r\n        return groups;\r\n    };\r\n\r\n    const handlerChallengeChange = (updatedChallenge: ClassifyChallenge) => {\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    const handleConfigChange = (config: ClassifyChallengeConfig) => {\r\n        const groups = readjustGroups(config.groupCount);\r\n        const updatedChallenge: ClassifyChallenge = {\r\n            ...challenge,\r\n            groups,\r\n            config\r\n        };\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    return (\r\n        <Grid container className={classes.fullHeight} spacing={2}>\r\n            <Grid item xs={10} className={classes.fullHeight}>\r\n                <ClassifyChallenger\r\n                    mode={ComponentMode.Design}\r\n                    challenge={challenge}\r\n                    onChallengeChange={handlerChallengeChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={2} className={classes.fullHeight}>\r\n                <ClassifyConfigurator config={challenge.config} onConfigChange={handleConfigChange} />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Card, Fab, Grid, Icon, makeStyles } from '@material-ui/core';\r\nimport useSound from 'use-sound';\r\nimport { ChallengeQuestion } from '../common/ChallengeQuestion';\r\nimport { SortChallenge } from '../../types/SortChallenge';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { Countdown } from '../common/Countdown';\r\n\r\nimport correct from '../../assets/sounds/correct.wav';\r\nimport incorrect from '../../assets/sounds/incorrect.wav';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        backgroundColor: '#f0f0f0'\r\n    },\r\n    fullHeight: {\r\n        height: '100%'\r\n    },\r\n    titleContainer: {\r\n        height: '20%'\r\n    },\r\n    pictureContainer: {\r\n        height: '80%'\r\n    },\r\n    centerAll: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    optionsContainer: {\r\n        height: '20%',\r\n        border: 'solid 1px'\r\n    },\r\n    item: {\r\n        padding: '5px 10px',\r\n        backgroundColor: theme.palette.secondary.main,\r\n        color: theme.palette.primary.contrastText,\r\n        borderRadius: '20px'\r\n    },\r\n    groupsContainer: {\r\n        height: '80%'\r\n    },\r\n}));\r\n\r\ninterface SortChallengerProps {\r\n    mode: ComponentMode,\r\n    challenge: SortChallenge,\r\n    onChallengeChange?: (updatedChallenge: SortChallenge) => void,\r\n    onSuccess?: () => void,\r\n    onError?: () => void\r\n}\r\n\r\nexport const SortChallenger: React.FC<SortChallengerProps> = (props: SortChallengerProps) => {\r\n    const { mode, challenge, onChallengeChange, onSuccess, onError } = props;\r\n\r\n    const [stopTimer, setStopTimer] = useState<boolean>(false);\r\n    const [selectedAnswers /* , setSelectedAnswers */] = useState<number[]>([]);\r\n    const [highlightResults, setHighlightResults] = useState<boolean>(false);\r\n\r\n    const [playCorrect] = useSound(correct);\r\n    const [playIncorrect] = useSound(incorrect);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleTitleChange = (newTitle: string) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                question: newTitle\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlerTimeUp = () => {\r\n        showResult(false);\r\n    };\r\n\r\n    const handleCheckClick = () => {\r\n    //     const wrongsSelected = selectedAnswers\r\n    //         .map((anAnswerIdx: number) => challenge.answers[anAnswerIdx])\r\n    //         .filter((anAnswer: SelectAnswerChallengeAnswer) => !anAnswer.valid);\r\n    //     if (wrongsSelected.length === 0) {\r\n    //         const validsNotSelected = challenge.answers\r\n    //             .filter((anAnswer: SelectAnswerChallengeAnswer, answerIdx: number) =>\r\n    //                 anAnswer.valid && selectedAnswers.indexOf(answerIdx) === -1\r\n    //             );\r\n    //         if (validsNotSelected.length === 0) {\r\n    //             showResult(true);\r\n    //             return;\r\n    //         }\r\n    //     }\r\n    //     showResult(false);\r\n    };\r\n\r\n    const showResult = (success: boolean) => {\r\n        setStopTimer(true);\r\n        setHighlightResults(true);\r\n\r\n        if (success) {\r\n            playCorrect();\r\n        } else {\r\n            playIncorrect();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (success) {\r\n                if (onSuccess) {\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                if (onError) {\r\n                    onError();\r\n                }\r\n            }\r\n        }, 2000);\r\n    };\r\n\r\n    return (\r\n        <Card variant='outlined' className={classes.root}>\r\n            <div className={classes.titleContainer}>\r\n                <ChallengeQuestion\r\n                    mode={mode}\r\n                    question={challenge.question}\r\n                    fontSize={challenge.config.questionFontSize}\r\n                    onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            <div className={classes.pictureContainer}>\r\n                <Grid container justify='center' className={classes.fullHeight}>\r\n                    <Grid item xs={2} className={classes.fullHeight}>\r\n                        <Countdown\r\n                            mode={mode}\r\n                            time={challenge.config.timeLimit}\r\n                            stopTimer={stopTimer}\r\n                            onTimeUp={handlerTimeUp}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={8} className={classes.fullHeight}>\r\n                    </Grid>\r\n                    <Grid item xs={2} style={{ height: '100%' }} className={classes.centerAll}>\r\n                        {\r\n                            <Fab\r\n                                variant=\"extended\"\r\n                                size=\"large\"\r\n                                color=\"primary\"\r\n                                disabled={mode === ComponentMode.Design || selectedAnswers.length === 0}\r\n                                onClick={() => { handleCheckClick(); }}\r\n                            >\r\n                                <Icon>check</Icon>&nbsp;Corregir\r\n                            </Fab>\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Grid, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { SortChallengeConfig } from '../../types/SortChallenge';\r\n\r\nconst useStyles = makeStyles({\r\n    fullWidth: {\r\n        width: '100%',\r\n    }\r\n});\r\n\r\ninterface SortConfiguratorProps {\r\n    config: SortChallengeConfig,\r\n    onConfigChange?: (config: SortChallengeConfig) => void\r\n}\r\n\r\nexport const SortConfigurator: React.FC<SortConfiguratorProps> = (props: SortConfiguratorProps) => {\r\n    const { config, onConfigChange } = props;\r\n\r\n    const [formData, setFormData] = useState<SortChallengeConfig>(config);\r\n\r\n    const inputTimeLimit = useRef({} as HTMLInputElement);\r\n    const inputQuestionFontSize = useRef({} as HTMLInputElement);\r\n    const inputItemsFontSize = useRef({} as HTMLInputElement);\r\n    const inputItemCount = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setFormData(config);\r\n    }, [config]);\r\n\r\n    const handleConfigParameterChange = (parameter: string, value: number | boolean) => {\r\n        const newConfig = {\r\n            ...formData,\r\n            [parameter]: value\r\n        };\r\n        setFormData(newConfig);\r\n        if (onConfigChange) {\r\n            onConfigChange(newConfig);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container direction='column' spacing={2}>\r\n            <Grid item>\r\n                <Typography variant='h5'>Configuracin</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputTimeLimit}\r\n                    type='number'\r\n                    label='Lmite de tiempo (segundos)'\r\n                    inputProps={{ min: 10 }}\r\n                    value={formData.timeLimit}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('timeLimit', parseInt(inputTimeLimit.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputQuestionFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra del ttulo'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.questionFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('questionFontSize', parseInt(inputQuestionFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputItemsFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra de los elementos'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.itemsFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('itemsFontSize', parseInt(inputItemsFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputItemCount}\r\n                    type='number'\r\n                    label='Nmero de elementos'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.itemCount}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('groupCount', parseInt(inputItemCount.current.value)); }}\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { SortChallenge, SortChallengeConfig } from '../../types/SortChallenge';\r\nimport { SortChallenger } from './SortChallenger';\r\nimport { SortConfigurator } from './SortConfigurator';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\n\r\nconst useStyles = makeStyles({\r\n    fullHeight: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\ninterface SortChallengeDesignerProps {\r\n    challenge: SortChallenge,\r\n    onChallengeChange: (challenge: SortChallenge) => void\r\n}\r\n\r\nexport const SortChallengeDesigner: React.FC<SortChallengeDesignerProps> = (\r\n    props: SortChallengeDesignerProps\r\n) => {\r\n    const { challenge, onChallengeChange } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const readjustItems = (itemCount: number): string[] => {\r\n        let items = [...challenge.items];\r\n        if (itemCount > items.length) {\r\n            const newItems = Array.from(Array(itemCount - items.length))\r\n                .map(() => (''));\r\n            items = [...items, ...newItems];\r\n        } else if (itemCount < items.length) {\r\n            items = items.slice(0, itemCount);\r\n        }\r\n        return items;\r\n    };\r\n\r\n    const handlerChallengeChange = (updatedChallenge: SortChallenge) => {\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    const handleConfigChange = (config: SortChallengeConfig) => {\r\n        const items = readjustItems(config.itemCount);\r\n        const updatedChallenge: SortChallenge = {\r\n            ...challenge,\r\n            items,\r\n            config\r\n        };\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    return (\r\n        <Grid container className={classes.fullHeight} spacing={2}>\r\n            <Grid item xs={10} className={classes.fullHeight}>\r\n                <SortChallenger\r\n                    mode={ComponentMode.Design}\r\n                    challenge={challenge}\r\n                    onChallengeChange={handlerChallengeChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={2} className={classes.fullHeight}>\r\n                <SortConfigurator config={challenge.config} onConfigChange={handleConfigChange} />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { useRef, useState } from 'react';\r\nimport { Button, Grid, Icon, makeStyles, TextField } from '@material-ui/core';\r\nimport { FillTableChallengeCell } from '../../types/FillTableChallenge';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        height: '100%',\r\n        border: 'solid 1px gray'\r\n    },\r\n    fixed: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        color: '#ffffff'\r\n    },\r\n    valid: {\r\n        backgroundColor: '#4caf50',\r\n    },\r\n    invalid: {\r\n        backgroundColor: '#f44336',\r\n    }\r\n}));\r\n\r\ninterface TableCellProps {\r\n    mode: ComponentMode,\r\n    cell: FillTableChallengeCell,\r\n    fixed?: boolean,\r\n    fontSize?: number,\r\n    showResults?: boolean,\r\n    success?: boolean,\r\n    onCellChange: (newCell: FillTableChallengeCell) => void\r\n}\r\n\r\nexport const TableCell: React.FC<TableCellProps> = (props: TableCellProps) => {\r\n    const { mode, cell, fixed, fontSize, showResults, success, onCellChange } = props;\r\n\r\n    const [formData, setFormData] = useState<FillTableChallengeCell>(cell);\r\n    const inputText = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleTextChange = () => {\r\n        const newState = {\r\n            ...formData,\r\n            text: inputText.current.value\r\n        };\r\n        setFormData(newState);\r\n        onCellChange(newState);\r\n    };\r\n\r\n    const handleVisibilityChange = () => {\r\n        const newState ={\r\n            ...formData,\r\n            hidden: !formData.hidden\r\n        };\r\n        setFormData(newState);\r\n        onCellChange(newState);\r\n    };\r\n\r\n    return (\r\n        <Grid container alignItems=\"center\" className={`${classes.root} ${fixed ? classes.fixed : (showResults ? (success ? classes.valid : classes.invalid ) : '')}`}>\r\n            {\r\n                mode === ComponentMode.Design && !fixed && (\r\n                    <Grid item>\r\n                        <Button value=\"hidden\" onClick={handleVisibilityChange}>\r\n                            <Icon color={formData.hidden ? 'secondary' : 'primary'}>\r\n                                {\r\n                                    formData.hidden ? 'visibility_off' : 'visibility'\r\n                                }\r\n                            </Icon>\r\n                        </Button>\r\n                    </Grid>\r\n                )\r\n            }\r\n            <Grid item xs>\r\n                {\r\n                    (mode === ComponentMode.Design || formData.hidden) ? (\r\n                        <TextField\r\n                            inputRef={inputText}\r\n                            value={formData.text}\r\n                            color='secondary'\r\n                            style={{ marginLeft: '10px', width: 'calc(100% - 20px)' }}\r\n                            inputProps = {{\r\n                                style: {\r\n                                    textAlign: 'center',\r\n                                    fontSize: `${fontSize != null ? fontSize : 28}px`,\r\n                                    color: fixed || showResults ? '#ffffff': '#000000',\r\n                                    width: '100%'\r\n                                }\r\n                            }}\r\n                            onInput={handleTextChange}\r\n                        />\r\n                    ) : (\r\n                        <div\r\n                            style={{\r\n                                textAlign: 'center',\r\n                                fontSize: `${fontSize != null ? fontSize : 28}px`,\r\n                                color: fixed || showResults ? '#ffffff': '#000000'\r\n                            }}\r\n                        >\r\n                            {formData.text}\r\n                        </div>\r\n                    )\r\n                }\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Card, Fab, Grid, Icon, makeStyles } from '@material-ui/core';\r\nimport useSound from 'use-sound';\r\nimport { ChallengeQuestion } from '../common/ChallengeQuestion';\r\nimport { FillTableChallenge, FillTableChallengeCell } from '../../types/FillTableChallenge';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { Countdown } from '../common/Countdown';\r\n\r\nimport correct from '../../assets/sounds/correct.wav';\r\nimport incorrect from '../../assets/sounds/incorrect.wav';\r\nimport { TableCell } from './TableCell';\r\nimport { ChallengeOptions } from '../../types/Challenge';\r\nimport { Language } from '../../enums/Language';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        backgroundColor: '#f0f0f0'\r\n    },\r\n    titleContainer: {\r\n        height: '20%'\r\n    },\r\n    answerContainer: {\r\n        height: '80%'\r\n    },\r\n    optionContainer: {\r\n        height: '100%'\r\n    },\r\n    centerAll: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    cell: {\r\n        // border: 'solid 1px gray',\r\n        height: '60px'\r\n    }\r\n}));\r\n\r\nconst initialFillTableState = (challenge: FillTableChallenge): FillTableChallengeCell[][] => {\r\n    return challenge.items.map((aRow: FillTableChallengeCell[]) => {\r\n        const updatedColumns = aRow.map((aColumn: FillTableChallengeCell) => {\r\n            return aColumn.hidden ? {...aColumn, text: ''} : {...aColumn};\r\n        });\r\n        return updatedColumns;\r\n    });\r\n};\r\n\r\ninterface FillTableChallengerProps {\r\n    mode: ComponentMode,\r\n    challenge: FillTableChallenge,\r\n    options?: ChallengeOptions,\r\n    onChallengeChange?: (updatedChallenge: FillTableChallenge) => void,\r\n    onSuccess?: () => void,\r\n    onError?: () => void\r\n}\r\n\r\nexport const FillTableChallenger: React.FC<FillTableChallengerProps> = (props: FillTableChallengerProps) => {\r\n    const { mode, challenge, options, onChallengeChange, onSuccess, onError } = props;\r\n\r\n    const [fillTableState, setFillTableState] =useState<FillTableChallengeCell[][]>(initialFillTableState(challenge));\r\n\r\n    const [stopTimer, setStopTimer] = useState<boolean>(false);\r\n    const [highlightResults, setHighlightResults] = useState<boolean>(false);\r\n\r\n    const [playCorrect] = useSound(correct);\r\n    const [playIncorrect] = useSound(incorrect);\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleTitleChange = (newTitle: string) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                question: newTitle\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlerTimeUp = () => {\r\n        showResult(false);\r\n    };\r\n\r\n    const showResult = (success: boolean) => {\r\n        setStopTimer(true);\r\n        setHighlightResults(true);\r\n\r\n        if (success) {\r\n            playCorrect();\r\n        } else {\r\n            playIncorrect();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (success) {\r\n                if (onSuccess) {\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                if (onError) {\r\n                    onError();\r\n                }\r\n            }\r\n        }, 2000);\r\n    };\r\n\r\n    const handleCellChange = (newCell: FillTableChallengeCell, rowIdx: number, columnIdx: number) => {\r\n        const updatedItems = (mode === ComponentMode.Design ? challenge.items : fillTableState)\r\n            .map((aRow: FillTableChallengeCell[], auxRowIdx: number) => {\r\n                if (auxRowIdx !== rowIdx) {\r\n                    return [...aRow];\r\n                }\r\n                const updatedColumns = aRow.map((aColumn: FillTableChallengeCell, auxColumnIdx: number) => {\r\n                    return auxColumnIdx === columnIdx ? {...newCell} : {...aColumn};\r\n                });\r\n                return updatedColumns;\r\n            });\r\n        if (mode === ComponentMode.Play) {\r\n            setFillTableState(updatedItems);\r\n        } else if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                items: updatedItems\r\n            });\r\n        }\r\n    };\r\n\r\n    const completed = () => {\r\n        return fillTableState.reduce(\r\n            (accRow: boolean, currentRow: FillTableChallengeCell[], rowIdx: number) => (\r\n                accRow\r\n                && currentRow.reduce(\r\n                    (accColumn: boolean, currentColumn: FillTableChallengeCell, columnIdx: number) => (\r\n                        accColumn\r\n                        && (\r\n                            (\r\n                                challenge.config.firstRowFixed\r\n                                && rowIdx === 0\r\n                                && challenge.config.firstColumnFixed\r\n                                && columnIdx === 0\r\n                            )\r\n                            || currentColumn.text !== ''\r\n                        )\r\n                    ),\r\n                    true\r\n                )\r\n            ),\r\n            true\r\n        );\r\n    };\r\n\r\n    const handleCheckClick = () => {\r\n        const result = fillTableState.reduce(\r\n            (accRow: boolean, currentRow: FillTableChallengeCell[], rowIdx: number) => (\r\n                accRow\r\n                && currentRow.reduce(\r\n                    (accColumn: boolean, currentColumn: FillTableChallengeCell, columnIdx: number) => (\r\n                        accColumn\r\n                        && (\r\n                            (\r\n                                challenge.config.firstRowFixed\r\n                                && rowIdx === 0\r\n                                && challenge.config.firstColumnFixed\r\n                                && columnIdx === 0\r\n                            )\r\n                            || currentColumn.text === challenge.items[rowIdx][columnIdx].text\r\n                        )\r\n                    ),\r\n                    true\r\n                )\r\n            ),\r\n            true\r\n        );\r\n\r\n        showResult(result);\r\n    };\r\n\r\n    return (\r\n        <Card variant='outlined' className={classes.root}>\r\n            <div className={classes.titleContainer}>\r\n                <ChallengeQuestion\r\n                    mode={mode}\r\n                    question={challenge.question}\r\n                    fontSize={challenge.config.questionFontSize}\r\n                    onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            <div className={classes.answerContainer}>\r\n                <Grid container justify='center' style={{ height: '100%' }}>\r\n                    <Grid item xs={2} style={{ height: '100%' }}>\r\n                        {\r\n                            options != null && !options.ignoreTimeLimit && (\r\n                                <Countdown\r\n                                    mode={mode}\r\n                                    time={challenge.config.timeLimit}\r\n                                    stopTimer={stopTimer}\r\n                                    onTimeUp={handlerTimeUp}\r\n                                />\r\n                            )\r\n                        }\r\n                    </Grid>\r\n                    <Grid item xs={8} style={{ height: '100%' }}>\r\n                        <Grid container alignItems=\"center\" style={{ height: '100%' }}>\r\n                            <Grid item xs>\r\n                                <Grid container direction=\"column\">\r\n                                    {\r\n                                        (mode === ComponentMode.Design ? challenge.items : fillTableState)\r\n                                            .map((aRow: FillTableChallengeCell[], rowIdx: number) => (\r\n                                                <Grid item xs key={`row_${rowIdx}`}>\r\n                                                    <Grid container>\r\n                                                        {\r\n                                                            aRow.map((aColumn: FillTableChallengeCell, columnIdx: number) => (\r\n                                                                <Grid item xs key={`column_${columnIdx}`} className={classes.cell}>\r\n                                                                    {\r\n                                                                        // mode === ComponentMode.Design\r\n                                                                        // &&\r\n                                                                        !(\r\n                                                                            challenge.config.firstRowFixed\r\n                                                                            && challenge.config.firstColumnFixed\r\n                                                                            && rowIdx === 0\r\n                                                                            && columnIdx === 0\r\n                                                                        ) && (\r\n                                                                            <TableCell\r\n                                                                                mode={mode}\r\n                                                                                cell={aColumn}\r\n                                                                                fixed={\r\n                                                                                    (\r\n                                                                                        challenge.config.firstRowFixed\r\n                                                                                        && rowIdx === 0\r\n                                                                                    ) || (\r\n                                                                                        challenge.config.firstColumnFixed\r\n                                                                                        && columnIdx === 0\r\n                                                                                    )\r\n                                                                                }\r\n                                                                                fontSize={challenge.config.itemsFontSize}\r\n                                                                                showResults={highlightResults}\r\n                                                                                success={\r\n                                                                                    (\r\n                                                                                        !challenge.config.firstRowFixed\r\n                                                                                        || rowIdx !== 0\r\n                                                                                    ) && (\r\n                                                                                        !challenge.config.firstColumnFixed\r\n                                                                                        || columnIdx !== 0\r\n                                                                                    ) && (\r\n                                                                                        challenge.items[rowIdx][columnIdx].text === fillTableState[rowIdx][columnIdx].text\r\n                                                                                    )\r\n                                                                                }\r\n                                                                                onCellChange={(cell)=>{\r\n                                                                                    handleCellChange(cell, rowIdx, columnIdx);\r\n                                                                                }}\r\n                                                                            />\r\n                                                                        )\r\n                                                                    }\r\n                                                                </Grid>\r\n                                                            ))\r\n                                                        }\r\n                                                    </Grid>\r\n                                                </Grid>\r\n                                            ))\r\n                                    }\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid item xs={2} style={{ height: '100%' }} className={classes.centerAll}>\r\n                        {\r\n                            <Fab\r\n                                variant=\"extended\"\r\n                                size=\"large\"\r\n                                color=\"primary\"\r\n                                disabled={mode === ComponentMode.Design || !completed()}\r\n                                onClick={() => { handleCheckClick(); }}\r\n                            >\r\n                                <Icon>check</Icon>&nbsp;{options?.language === Language.En ? 'Check' : 'Corregir'}\r\n                            </Fab>\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { FormControlLabel, Grid, makeStyles, Switch, TextField, Typography } from '@material-ui/core';\r\nimport { FillTableChallengeConfig } from '../../types/FillTableChallenge';\r\n\r\nconst useStyles = makeStyles({\r\n    fullWidth: {\r\n        width: '100%',\r\n    }\r\n});\r\n\r\ninterface FillTableConfiguratorProps {\r\n    config: FillTableChallengeConfig,\r\n    onConfigChange?: (config: FillTableChallengeConfig) => void\r\n}\r\n\r\nexport const FillTableConfigurator: React.FC<FillTableConfiguratorProps> = (props: FillTableConfiguratorProps) => {\r\n    const { config, onConfigChange } = props;\r\n\r\n    const [formData, setFormData] = useState<FillTableChallengeConfig>(config);\r\n\r\n    const inputTimeLimit = useRef({} as HTMLInputElement);\r\n    const inputQuestionFontSize = useRef({} as HTMLInputElement);\r\n    const inputItemsFontSize = useRef({} as HTMLInputElement);\r\n    const inputRowCount = useRef({} as HTMLInputElement);\r\n    const checkFirstRowFixed = useRef({} as HTMLInputElement);\r\n    const inputColumnCount = useRef({} as HTMLInputElement);\r\n    const checkFirstColumnFixed = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setFormData(config);\r\n    }, [config]);\r\n\r\n    const handleConfigParameterChange = (parameter: string, value: number | boolean) => {\r\n        const newConfig = {\r\n            ...formData,\r\n            [parameter]: value\r\n        };\r\n        setFormData(newConfig);\r\n        if (onConfigChange) {\r\n            onConfigChange(newConfig);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container direction='column' spacing={2}>\r\n            <Grid item>\r\n                <Typography variant='h5'>Configuracin</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputTimeLimit}\r\n                    type='number'\r\n                    label='Lmite de tiempo (segundos)'\r\n                    inputProps={{ min: 10 }}\r\n                    value={formData.timeLimit}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('timeLimit', parseInt(inputTimeLimit.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputQuestionFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra del ttulo'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.questionFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('questionFontSize', parseInt(inputQuestionFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputItemsFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra de los elementos'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.itemsFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('itemsFontSize', parseInt(inputItemsFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputRowCount}\r\n                    type='number'\r\n                    label='Nmero de filas'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.rowCount}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('rowCount', parseInt(inputRowCount.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            inputRef={checkFirstRowFixed}\r\n                            name='checkMultiselect'\r\n                            checked={formData.firstRowFixed}\r\n                            color='secondary'\r\n                            onChange={() => { handleConfigParameterChange('firstRowFixed', checkFirstRowFixed.current.checked); }}\r\n                        />\r\n                    }\r\n                    label='Primera fila fija'\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputColumnCount}\r\n                    type='number'\r\n                    label='Nmero de columnas'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.columnCount}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('columnCount', parseInt(inputColumnCount.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            inputRef={checkFirstColumnFixed}\r\n                            name='checkFirstColumnFixed'\r\n                            checked={formData.firstColumnFixed}\r\n                            color='secondary'\r\n                            onChange={() => { handleConfigParameterChange('firstColumnFixed', checkFirstColumnFixed.current.checked); }}\r\n                        />\r\n                    }\r\n                    label='Primera columna fija'\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { FillTableChallenge, FillTableChallengeCell, FillTableChallengeConfig } from '../../types/FillTableChallenge';\r\nimport { FillTableChallenger } from './FillTableChallenger';\r\nimport { FillTableConfigurator } from './FillTableConfigurator';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\n\r\nconst useStyles = makeStyles({\r\n    fullHeight: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\ninterface FillTableChallengeDesignerProps {\r\n    challenge: FillTableChallenge,\r\n    onChallengeChange: (challenge: FillTableChallenge) => void\r\n}\r\n\r\nexport const FillTableChallengeDesigner: React.FC<FillTableChallengeDesignerProps> = (\r\n    props: FillTableChallengeDesignerProps\r\n) => {\r\n    const { challenge, onChallengeChange } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const readjustTable = (rowCount: number, columnCount: number): FillTableChallengeCell[][] => {\r\n        let items = [...challenge.items];\r\n        if (rowCount > items.length) {\r\n            const auxColumn = Array.from(Array(items[0].length)).map(() => ({ text: '', hidden: false}));\r\n            const newRows = Array.from(Array(rowCount - items.length))\r\n                .map(() => [...auxColumn]);\r\n            items = [...items, ...newRows];\r\n        } else if (rowCount < items.length) {\r\n            items = items.slice(0, rowCount);\r\n        }\r\n\r\n        if (columnCount > items[0].length) {\r\n            const newColumns = Array.from(Array(columnCount - items[0].length))\r\n                .map(() => ({ text: '', hidden: false}));\r\n            items = items.map((anItem: FillTableChallengeCell[]) => [...anItem, ...newColumns]);\r\n        } else if (columnCount < items[0].length) {\r\n            items = items.map((anItem: FillTableChallengeCell[]) => anItem.slice(0, columnCount));\r\n        }\r\n\r\n        return items;\r\n    };\r\n\r\n    const handlerChallengeChange = (updatedChallenge: FillTableChallenge) => {\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    const handleConfigChange = (config: FillTableChallengeConfig) => {\r\n        const items = readjustTable(config.rowCount, config.columnCount);\r\n        const updatedChallenge: FillTableChallenge = {\r\n            ...challenge,\r\n            items,\r\n            config\r\n        };\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    return (\r\n        <Grid container className={classes.fullHeight} spacing={2}>\r\n            <Grid item xs={10} className={classes.fullHeight}>\r\n                <FillTableChallenger\r\n                    mode={ComponentMode.Design}\r\n                    challenge={challenge}\r\n                    onChallengeChange={handlerChallengeChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={2} className={classes.fullHeight}>\r\n                <FillTableConfigurator config={challenge.config} onConfigChange={handleConfigChange} />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","export const splitSentence = (text: string): string[] => {\r\n    return text\r\n        .replace(/\\./g, ' .')\r\n        .replace(/,/g, ' ,')\r\n        .replace(/;/g, ' ;')\r\n        .replace(/:/g, ' :')\r\n        .split( ' ');\r\n};\r\n\r\nexport const joinSentence = (textParts: string[]): string => {\r\n    return textParts\r\n        .join(' ')\r\n        .replace(/ \\./g, '.')\r\n        .replace(/ ,/g, ',')\r\n        .replace(/ ;/g, ';')\r\n        .replace(/ :/g, ':');\r\n};\r\n\r\nexport const createQueryString = (params: Record<string, unknown>): string => (\r\n    Object.keys(params).reduce(\r\n        (acc: string, current: string, idx: number) => (\r\n            `${acc}${idx > 0 ? '&' : ''}${current}=${params[current]}`\r\n        ),\r\n        '?'\r\n    )\r\n);\r\n\r\nexport const parseQueryString = (qs: string): any => {\r\n    const qsAux = qs[0] === '?' ? qs.slice(1) : qs;\r\n    const result: any = {};\r\n    qsAux.split(/&/g).forEach((aParam: string) => {\r\n        const paramParts = aParam.split('=');\r\n        result[paramParts[0]] = (\r\n            paramParts[1] === 'true' || paramParts[1] === 'false' ? paramParts[1] === 'true' : paramParts[1]\r\n        );\r\n    });\r\n    return result;\r\n};\r\n\r\nexport const checkEqual = (\r\n    stringA: string,\r\n    stringB: string,\r\n    checkCapitalLetters: boolean,\r\n    checkAccentMarks: boolean\r\n): boolean => {\r\n    let strA = stringA;\r\n    let strB = stringB;\r\n\r\n    if (!checkCapitalLetters) {\r\n        strA = strA.toLowerCase();\r\n        strB = strB.toLowerCase();\r\n    }\r\n\r\n    if (!checkAccentMarks) {\r\n        strA = strA\r\n            .replace(//g, 'A')\r\n            .replace(//g, 'E')\r\n            .replace(//g, 'I')\r\n            .replace(//g, 'O')\r\n            .replace(//g, 'U')\r\n            .replace(//g, 'a')\r\n            .replace(//g, 'e')\r\n            .replace(//g, 'i')\r\n            .replace(//g, 'o')\r\n            .replace(//g, 'u');\r\n        strB = strB\r\n            .replace(//g, 'A')\r\n            .replace(//g, 'E')\r\n            .replace(//g, 'I')\r\n            .replace(//g, 'O')\r\n            .replace(//g, 'U')\r\n            .replace(//g, 'a')\r\n            .replace(//g, 'e')\r\n            .replace(//g, 'i')\r\n            .replace(//g, 'o')\r\n            .replace(//g, 'u');\r\n    }\r\n\r\n    return strA === strB;\r\n};\r\n","import { CSSProperties } from '@material-ui/styles';\r\nimport React from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport { colors } from '../../theme';\r\n\r\ninterface DropGapProps {\r\n    value: string,\r\n    style?: CSSProperties,\r\n    fontSize: number,\r\n    onDrop: (text: string) => void\r\n}\r\n\r\nexport const DropGap: React.FC<DropGapProps> = (props: DropGapProps) => {\r\n    const { value, style, fontSize, onDrop } = props;\r\n\r\n    const handleDrop = (item: any) => {\r\n        onDrop(item.name);\r\n    };\r\n\r\n    const [{ isOver, canDrop }, drop] = useDrop({\r\n        accept: 'dnd',\r\n        drop: handleDrop,\r\n        collect: (monitor: { isOver: () => boolean, canDrop: () => boolean }) => {\r\n            return ({\r\n                isOver: monitor.isOver(),\r\n                canDrop: monitor.canDrop()\r\n            });\r\n        }\r\n    });\r\n\r\n    return (\r\n        <div\r\n            ref={drop}\r\n            style={{\r\n                width: '150px',\r\n                height: '50px',\r\n                lineHeight: '50px',\r\n                textAlign: 'center',\r\n                borderBottom: `solid 1px ${colors.primary.main}`,\r\n                color: colors.primary.main,\r\n                fontSize: `${fontSize ? fontSize : 50}px`,\r\n                ...style\r\n            }}\r\n\r\n        >\r\n            {value}\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Grid, Icon, IconButton, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { FillMethod } from '../../enums/FillMethod';\r\nimport { FillGapsChallengeExpression, FillGapsChallengeSentence } from '../../types/FillGapsChallenge';\r\nimport { checkEqual, joinSentence, splitSentence } from '../../utils/utilStrings';\r\nimport { colors } from '../../theme';\r\nimport { DropGap } from './DropGap';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    word: {\r\n        padding: '2px',\r\n        // backgroundColor: '#f0f0f0',\r\n        '& :hover': {\r\n            backgroundColor: theme.palette.primary.light,\r\n            color:'#ffffff',\r\n            cursor: 'pointer',\r\n            borderRadius: '10px'\r\n        }\r\n    },\r\n    selected: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        borderRadius: '10px',\r\n        color:'#ffffff',\r\n    }\r\n}));\r\n\r\ninterface SentencePart {\r\n    type: 'text' | 'hidden',\r\n    hiddenIdx: number,\r\n    value: string,\r\n    answer: string\r\n}\r\n\r\nexport interface FillGapsSentenceAnswer {\r\n    hiddenIdx: number,\r\n    value: string\r\n}\r\n\r\nconst sentenceParts = (sentence: FillGapsChallengeSentence): SentencePart[] => {\r\n    const result: SentencePart[] = [];\r\n    let currentIdx = 0;\r\n    const words = splitSentence(sentence.text);\r\n    sentence.hiddenExpressions.forEach((anExp: FillGapsChallengeExpression, idx: number) => {\r\n        if (anExp.initPosition > currentIdx) {\r\n            result.push({\r\n                type: 'text',\r\n                hiddenIdx: -1,\r\n                value: joinSentence(words.slice(currentIdx, anExp.initPosition)),\r\n                answer: ''\r\n            });\r\n        }\r\n        result.push({\r\n            type: 'hidden',\r\n            hiddenIdx: idx,\r\n            value: joinSentence(words.slice(anExp.initPosition, anExp.initPosition + anExp.wordCount)),\r\n            answer: ''\r\n        });\r\n        currentIdx = anExp.initPosition + anExp.wordCount;\r\n    });\r\n    if (currentIdx < words.length - 1) {\r\n        result.push({\r\n            type: 'text',\r\n            hiddenIdx: -1,\r\n            value: joinSentence(words.slice(currentIdx)),\r\n            answer: ''\r\n        });\r\n    }\r\n    return result;\r\n};\r\n\r\ninterface FillGapsSentenceProps {\r\n    mode: ComponentMode,\r\n    sentence: FillGapsChallengeSentence,\r\n    fillMethod: FillMethod,\r\n    checkCapitalLetters: boolean,\r\n    checkAccentMarks: boolean,\r\n    showResults: boolean,\r\n    fontSize: number,\r\n    onSentenceChange: (newSentence: FillGapsChallengeSentence) => void,\r\n    onSentenceRemove: () => void,\r\n    onAnswersChange: (answers: FillGapsSentenceAnswer[]) => void\r\n}\r\n\r\nexport const FillGapsSentence: React.FC<FillGapsSentenceProps> = (props: FillGapsSentenceProps) => {\r\n    const {mode,\r\n        sentence,\r\n        fillMethod,\r\n        checkCapitalLetters,\r\n        checkAccentMarks,\r\n        showResults,\r\n        fontSize,\r\n        onSentenceChange,\r\n        onSentenceRemove,\r\n        onAnswersChange\r\n    } = props;\r\n\r\n    const [parts, setParts] = useState<SentencePart[]>(sentenceParts(sentence));\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleWordClick = (wordIdx: number) => {\r\n        let updatedHiddenExpressions: FillGapsChallengeExpression[] = [];\r\n\r\n        if (sentence.hiddenExpressions.length === 0) {\r\n            //Primera expresion\r\n            console.log('');\r\n            updatedHiddenExpressions.push({\r\n                initPosition: wordIdx,\r\n                wordCount: 1,\r\n                alternatives: []\r\n            });\r\n        }\r\n\r\n        sentence.hiddenExpressions.some((anExp: FillGapsChallengeExpression, idx: number) => {\r\n            let completeArrayFrom = -1;\r\n            if (idx === 0 && wordIdx < anExp.initPosition - 1) {\r\n                //Antes de la primera expresion y no contigua\r\n                // console.log('Antes de la primera expresion y no contigua');\r\n                updatedHiddenExpressions = [\r\n                    { initPosition: wordIdx, wordCount: 1, alternatives:[] },\r\n                    ...sentence.hiddenExpressions\r\n                ];\r\n                return true;\r\n            } else if (wordIdx === anExp.initPosition - 1) {\r\n                //Contigua a la expresion por delante\r\n                // console.log('Contigua a la expresion por delante');\r\n                updatedHiddenExpressions.push(\r\n                    { initPosition: wordIdx, wordCount: anExp.wordCount + 1, alternatives: [...anExp.alternatives] }\r\n                );\r\n                completeArrayFrom = idx;\r\n            } else if (wordIdx === anExp.initPosition) {\r\n                //Sobre la primera palabra de la expresion\r\n                // console.log('Sobre la primera palabra de la expresion');\r\n                if (anExp.wordCount === 1) {\r\n                    //Si la expresion solo tiene una palabra\r\n                    // console.log('Si la expresion solo tiene una palabra');\r\n                } else {\r\n                    //Si la expresion tiene ms de una palabra\r\n                    // console.log('Si la expresion tiene ms de una palabra');\r\n                    updatedHiddenExpressions.push(\r\n                        { initPosition: wordIdx + 1, wordCount: anExp.wordCount - 1, alternatives: [...anExp.alternatives] }\r\n                    );\r\n                }\r\n                completeArrayFrom = idx;\r\n            } else if (wordIdx > anExp.initPosition && wordIdx < anExp.initPosition + anExp.wordCount - 1) {\r\n                //Sobre una palabra interior de la expresion\r\n                // console.log('Sobre una palabra interior de la expresion');\r\n                updatedHiddenExpressions = [\r\n                    ...updatedHiddenExpressions,\r\n                    {\r\n                        initPosition: anExp.initPosition,\r\n                        wordCount: wordIdx - anExp.initPosition,\r\n                        alternatives: []\r\n                    },\r\n                    {\r\n                        initPosition: wordIdx + 1,\r\n                        wordCount: anExp.initPosition + anExp.wordCount - wordIdx - 1,\r\n                        alternatives: []\r\n                    }\r\n                ];\r\n                completeArrayFrom = idx;\r\n            } else if (wordIdx === anExp.initPosition + anExp.wordCount - 1) {\r\n                //Sobre la ultima palabra de la expresion\r\n                // console.log('Sobre la ultima palabra de la expresion');\r\n                if (anExp.wordCount === 1) {\r\n                    //Si la expresion solo tiene una palabra\r\n                    // console.log('Si la expresion solo tiene una palabra');\r\n                } else {\r\n                    //Si la expresion tiene ms de una palabra\r\n                    // console.log('Si la expresion tiene ms de una palabra');\r\n                    updatedHiddenExpressions.push(\r\n                        {\r\n                            initPosition: anExp.initPosition,\r\n                            wordCount: anExp.wordCount - 1,\r\n                            alternatives: [...anExp.alternatives]\r\n                        }\r\n                    );\r\n                }\r\n                completeArrayFrom = idx;\r\n            } else if (idx < sentence.hiddenExpressions.length - 1\r\n                && wordIdx > anExp.initPosition + anExp.wordCount\r\n                && wordIdx < sentence.hiddenExpressions[idx + 1].initPosition - 1) {\r\n                //Entre dos expresiones de manera no contigua\r\n                // console.log('Entre dos expresiones de manera no contigua');\r\n                updatedHiddenExpressions = [\r\n                    ...updatedHiddenExpressions,\r\n                    {...anExp},\r\n                    { initPosition: wordIdx, wordCount: 1, alternatives: [] }\r\n                ];\r\n                completeArrayFrom = idx;\r\n            } else if (idx < sentence.hiddenExpressions.length - 1\r\n                && wordIdx === anExp.initPosition + anExp.wordCount\r\n                && wordIdx === sentence.hiddenExpressions[idx + 1].initPosition - 1) {\r\n                //Entre dos expresiones de manera contigua a ambas\r\n                // console.log('Entre dos expresiones de manera contigua a ambas');\r\n                updatedHiddenExpressions.push({\r\n                    initPosition: anExp.initPosition,\r\n                    wordCount: anExp.wordCount + sentence.hiddenExpressions[idx + 1].wordCount + 1,\r\n                    alternatives: []\r\n                });\r\n                completeArrayFrom = idx + 1;\r\n            } else if (wordIdx === anExp.initPosition + anExp.wordCount) {\r\n                //Contigua a la expresion por detras\r\n                // console.log('Contigua a la expresion por detras');\r\n                updatedHiddenExpressions.push({\r\n                    initPosition: anExp.initPosition,\r\n                    wordCount: anExp.wordCount + 1,\r\n                    alternatives: [...anExp.alternatives]\r\n                });\r\n                completeArrayFrom = idx;\r\n            } else if (idx === sentence.hiddenExpressions.length - 1) {\r\n                //Despues de la ultima expresion y de manera no contigua\r\n                // console.log('Despues de la ultima expresion y de manera no contigua');\r\n                updatedHiddenExpressions = [\r\n                    ...updatedHiddenExpressions,\r\n                    {...anExp},\r\n                    { initPosition: wordIdx, wordCount: 1, alternatives: [] }\r\n                ];\r\n                return true;\r\n            }\r\n\r\n            if (completeArrayFrom !== -1) {\r\n                if (idx < sentence.hiddenExpressions.length - 1) {\r\n                    updatedHiddenExpressions = [\r\n                        ...updatedHiddenExpressions,\r\n                        ...sentence.hiddenExpressions.slice(completeArrayFrom + 1)\r\n                    ];\r\n                }\r\n                return true;\r\n            }\r\n\r\n            updatedHiddenExpressions.push({...anExp});\r\n            return false;\r\n        });\r\n\r\n        onSentenceChange({\r\n            ...sentence,\r\n            hiddenExpressions: updatedHiddenExpressions\r\n        });\r\n    };\r\n\r\n    const handleDeleteClick = () => {\r\n        if (onSentenceRemove) {\r\n            onSentenceRemove();\r\n        }\r\n    };\r\n\r\n    const selected = (wordIdx: number) => {\r\n        return sentence.hiddenExpressions.some(\r\n            (anExpression: FillGapsChallengeExpression) => (\r\n                wordIdx >= anExpression.initPosition\r\n                && wordIdx <= anExpression.initPosition + anExpression.wordCount - 1\r\n            )\r\n        );\r\n    };\r\n\r\n    const handlePartChange = (partIdx: number, text: string) => {\r\n        const updatedParts = parts.map((aPart: SentencePart, idx: number) => (\r\n            {\r\n                ...aPart,\r\n                answer: idx === partIdx ? text : aPart.answer\r\n            }\r\n        ));\r\n        setParts(updatedParts);\r\n        onAnswersChange(updatedParts.filter(\r\n            (aPart: SentencePart) => aPart.type === 'hidden'\r\n        ).map(\r\n            (aPart: SentencePart) => ({\r\n                hiddenIdx: aPart.hiddenIdx,\r\n                value: aPart.answer\r\n            }))\r\n        );\r\n    };\r\n\r\n    const getPartStyle = (validValues: string[], value: string) => showResults ? (\r\n        validValues.some(\r\n            (aValidValue: string) => checkEqual(\r\n                aValidValue,\r\n                value,\r\n                checkCapitalLetters,\r\n                checkAccentMarks\r\n            )\r\n        ) ? { color: '#4caf50' } : { color: '#f44336' }\r\n    ) : {};\r\n\r\n    return (\r\n        <Grid container alignItems=\"center\" spacing={1}>\r\n            <Grid item>\r\n                <Icon fontSize=\"small\" color=\"secondary\">navigate_next</Icon>\r\n            </Grid>\r\n            {\r\n                mode === ComponentMode.Design\r\n                && splitSentence(sentence.text).map((aWord: string, idx: number) => (\r\n                    <Grid\r\n                        item\r\n                        key={`word_${idx}`}\r\n                        className={`${classes.word} ${selected(idx) ? classes.selected : ''}`}\r\n                        onClick={() => { handleWordClick(idx); }}\r\n                    >\r\n                        <Typography style={{fontSize: `${fontSize ? fontSize: 50}px`}}>\r\n                            {aWord}\r\n                        </Typography>\r\n                    </Grid>\r\n                ))\r\n            }\r\n            {\r\n                mode === ComponentMode.Design && (\r\n                    <Grid item>\r\n                        <IconButton size=\"small\" onClick={handleDeleteClick}>\r\n                            <Icon>delete</Icon>\r\n                        </IconButton>\r\n                    </Grid>\r\n                )\r\n            }\r\n            {\r\n                mode === ComponentMode.Play && (\r\n                    parts.map((aPart: SentencePart, idx: number) => (\r\n                        aPart.type === 'text' ? (\r\n                            <Grid\r\n                                item\r\n                                key={`part_${idx}`}\r\n                                className={classes.word}\r\n                            >\r\n                                <Typography style={{fontSize: `${fontSize ? fontSize: 50}px`}}>\r\n                                    {aPart.value}\r\n                                </Typography>\r\n                            </Grid>\r\n                        ) : (\r\n                            <Grid\r\n                                item\r\n                                key={`part_${idx}`}\r\n                            >\r\n                                {\r\n                                    fillMethod === FillMethod.Writing ? (\r\n                                        <TextField\r\n                                            key={`input_${idx}`}\r\n                                            value={aPart.answer}\r\n                                            color=\"primary\"\r\n                                            inputProps={{\r\n                                                style: {\r\n                                                    fontSize: `${fontSize ? fontSize : 50}px`,\r\n                                                    textAlign: 'center',\r\n                                                    color: colors.primary.main,\r\n                                                    ...getPartStyle(\r\n                                                        [\r\n                                                            aPart.value,\r\n                                                            ...sentence.hiddenExpressions[aPart.hiddenIdx].alternatives\r\n                                                        ],\r\n                                                        aPart.answer\r\n                                                    )\r\n                                                }\r\n                                            }}\r\n                                            onInput={\r\n                                                (evt: React.FormEvent<HTMLInputElement>) => {\r\n                                                    handlePartChange(idx, (evt.target as any).value);\r\n                                                }\r\n                                            }\r\n                                        />\r\n                                    ) : (\r\n                                        <DropGap\r\n                                            key={`input_${idx}`}\r\n                                            value={aPart.answer}\r\n                                            style={getPartStyle(\r\n                                                [\r\n                                                    aPart.value,\r\n                                                    ...sentence.hiddenExpressions[aPart.hiddenIdx].alternatives\r\n                                                ],\r\n                                                aPart.answer\r\n                                            )}\r\n                                            fontSize={fontSize}\r\n                                            onDrop={(droppedText: string) => {\r\n                                                handlePartChange(idx, droppedText);\r\n                                            }}\r\n                                        />\r\n                                    )\r\n                                }\r\n                            </Grid>\r\n                        )\r\n                    ))\r\n                )\r\n            }\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Box, Button, Dialog, Grid, Icon, IconButton, List, ListItem, ListItemSecondaryAction, ListItemText, makeStyles, TextField, Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    dialogContainer: {\r\n        padding: '20px'\r\n    },\r\n}));\r\n\r\ninterface DialogFillGapsCandidatesProps {\r\n    open: boolean,\r\n    text: string,\r\n    candidates: string[],\r\n    onAccept: (alternatives: string[]) => void,\r\n    onCancel: () => void\r\n}\r\n\r\nexport const DialogFillGapsCandidates: React.FC<DialogFillGapsCandidatesProps> = (props: DialogFillGapsCandidatesProps) => {\r\n    const { open, text, candidates, onAccept, onCancel } = props;\r\n\r\n    const [formState, setFormState] = useState<string[]>(candidates);\r\n\r\n    const inputCandidate = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        if (candidates != null) {\r\n            setFormState(candidates);\r\n        }\r\n    }, [candidates]);\r\n\r\n    const addCandidate = () => {\r\n        setFormState([\r\n            ...formState,\r\n            inputCandidate.current.value\r\n        ]);\r\n        inputCandidate.current.value = '';\r\n    };\r\n\r\n    const handleCandidateKeyPress = (evt: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (evt.code === 'Enter' && inputCandidate.current.value !== '') {\r\n            addCandidate();\r\n        }\r\n    };\r\n\r\n    const handleDeleteCandidate = (candidateIdx: number) => {\r\n        setFormState(\r\n            formState.filter((aCandidate: string, idx: number) => idx !== candidateIdx)\r\n        );\r\n    };\r\n\r\n    const handleAcceptClick = () => {\r\n        onAccept(formState);\r\n    };\r\n\r\n    const handleCancelClick = () => {\r\n        onCancel();\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            fullWidth\r\n            maxWidth='sm'\r\n        >\r\n            <Box className={classes.dialogContainer}>\r\n                <Grid\r\n                    container\r\n                    direction='column'\r\n                    spacing={2}\r\n                >\r\n                    <Grid item xs={12}>\r\n                        <Typography variant=\"h6\">\r\n                            {`Otros textos validos para \"${text}\"`}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <List>\r\n                            {\r\n                                formState.map((aCandidate: string, candidateIdx: number) => (\r\n                                    <ListItem>\r\n                                        <ListItemText primary={aCandidate} />\r\n                                        <ListItemSecondaryAction>\r\n                                            <IconButton edge=\"end\" onClick={() => { handleDeleteCandidate(candidateIdx); }}>\r\n                                                <Icon>delete</Icon>\r\n                                            </IconButton>\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                ))\r\n                            }\r\n                        </List>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            inputRef={inputCandidate}\r\n                            variant=\"outlined\"\r\n                            style={{ width: '100%' }}\r\n                            label=\"Nuevo candidato\"\r\n                            onKeyPress={handleCandidateKeyPress}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Grid container justify='flex-end' spacing={1}>\r\n                            <Grid item>\r\n                                <Button variant='contained' color='primary' onClick={handleAcceptClick}>Aceptar</Button>\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <Button color='primary' onClick={handleCancelClick}>Cancelar</Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n            </Box>\r\n        </Dialog>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Card, Fab, Grid, Icon, IconButton, makeStyles, TextField } from '@material-ui/core';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport useSound from 'use-sound';\r\nimport { ChallengeQuestion } from '../common/ChallengeQuestion';\r\nimport { FillGapsChallenge, FillGapsChallengeExpression, FillGapsChallengeSentence } from '../../types/FillGapsChallenge';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { Countdown } from '../common/Countdown';\r\nimport correct from '../../assets/sounds/correct.wav';\r\nimport incorrect from '../../assets/sounds/incorrect.wav';\r\nimport { FillMethod } from '../../enums/FillMethod';\r\nimport { FillGapsSentence, FillGapsSentenceAnswer } from './FillGapsSentence';\r\nimport { DragableItem } from '../common/DragableItem';\r\nimport { checkEqual, joinSentence, splitSentence } from '../../utils/utilStrings';\r\nimport { DialogFillGapsCandidates } from './DialogFillGapsCandidates';\r\nimport { ChallengeOptions } from '../../types/Challenge';\r\nimport { Language } from '../../enums/Language';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        backgroundColor: '#f0f0f0'\r\n    },\r\n    fullHeight: {\r\n        height: '100%'\r\n    },\r\n    fullWidth: {\r\n        width: '100%'\r\n    },\r\n    titleContainer: {\r\n        height: '20%'\r\n    },\r\n    answerContainer: {\r\n        height: '80%',\r\n        width: '100%'\r\n    },\r\n    centerAll: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    optionsContainer: {\r\n        border: 'solid 1px gray',\r\n        backgroundColor: '#ffffff',\r\n        minHeight: '60px'\r\n    },\r\n    sentencesContainer: {\r\n        paddingLeft: '10px'\r\n    },\r\n}));\r\n\r\nconst initialFillGapsState = (challenge: FillGapsChallenge): FillGapsSentenceAnswer[][] => {\r\n    return challenge.sentences.map((aSentence: FillGapsChallengeSentence) => ([]));\r\n};\r\n\r\nconst reorderItems = (sentences: FillGapsChallengeSentence[], mode: ComponentMode): Item[] => {\r\n    let list: Item[] = [];\r\n    sentences.forEach((aSentence: FillGapsChallengeSentence, sentenceIdx: number) => {\r\n        aSentence.hiddenExpressions.forEach((aHiddenExpression: FillGapsChallengeExpression, hiddenExpressionIdx: number) => {\r\n            list.push({\r\n                sentenceText: aSentence.text,\r\n                sentenceIdx,\r\n                hiddenExpression: aHiddenExpression,\r\n                hiddenExpressionIdx\r\n            });\r\n        });\r\n    });\r\n    if (mode === ComponentMode.Play) {\r\n        list = list.sort(() => Math.random() - 0.5);\r\n    }\r\n    return list;\r\n};\r\n\r\ninterface FillGapsChallengerProps {\r\n    mode: ComponentMode,\r\n    challenge: FillGapsChallenge,\r\n    options?: ChallengeOptions,\r\n    onChallengeChange?: (updatedChallenge: FillGapsChallenge) => void,\r\n    onSuccess?: () => void,\r\n    onError?: () => void\r\n}\r\n\r\ninterface Item {\r\n    sentenceText: string,\r\n    sentenceIdx: number,\r\n    hiddenExpression: FillGapsChallengeExpression,\r\n    hiddenExpressionIdx: number\r\n}\r\n\r\nexport const FillGapsChallenger: React.FC<FillGapsChallengerProps> = (props: FillGapsChallengerProps) => {\r\n    const { mode, challenge, options, onChallengeChange, onSuccess, onError } = props;\r\n\r\n    const [stopTimer, setStopTimer] = useState<boolean>(false);\r\n    const [highlightResults, setHighlightResults] = useState<boolean>(false);\r\n\r\n    const inputSentence = useRef({} as HTMLInputElement);\r\n\r\n    const [fillGapsState, setFillGapsState] = useState<FillGapsSentenceAnswer[][]>(initialFillGapsState(challenge));\r\n    const [openCandidatesDialog, setOpenCandidatesDialog] = useState<boolean>(false);\r\n    const [selectedExpression, setSelectedExpression] = useState<number[]>();\r\n    const [draggableItems, setDragabbleItems] = useState<Item[]>(reorderItems(challenge.sentences, mode));\r\n\r\n    const [playCorrect] = useSound(correct);\r\n    const [playIncorrect] = useSound(incorrect);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setDragabbleItems(reorderItems(challenge.sentences, mode));\r\n    }, [challenge.sentences]);\r\n\r\n    const handleTitleChange = (newTitle: string) => {\r\n        if (onChallengeChange) {\r\n            onChallengeChange({\r\n                ...challenge,\r\n                question: newTitle\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlerTimeUp = () => {\r\n        showResult(false);\r\n    };\r\n\r\n    const showResult = (success: boolean) => {\r\n        setStopTimer(true);\r\n        setHighlightResults(true);\r\n\r\n        if (success) {\r\n            playCorrect();\r\n        } else {\r\n            playIncorrect();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (success) {\r\n                if (onSuccess) {\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                if (onError) {\r\n                    onError();\r\n                }\r\n            }\r\n        }, 2000);\r\n    };\r\n\r\n    const handleSentenceChange = (updatedSentence: FillGapsChallengeSentence, sentenceIdx: number) => {\r\n        if (onChallengeChange) {\r\n            const updatedSentences = challenge.sentences.map((\r\n                aSentence: FillGapsChallengeSentence,\r\n                idx: number\r\n            ) => idx === sentenceIdx ? updatedSentence : aSentence);\r\n            onChallengeChange({\r\n                ...challenge,\r\n                sentences: updatedSentences\r\n            });\r\n        }\r\n    };\r\n\r\n    const addSentence = () => {\r\n        if (onChallengeChange) {\r\n            const newSentence: FillGapsChallengeSentence = {\r\n                text: inputSentence.current.value,\r\n                hiddenExpressions: [] as FillGapsChallengeExpression[]\r\n            };\r\n            onChallengeChange({\r\n                ...challenge,\r\n                sentences: [...challenge.sentences, newSentence]\r\n            });\r\n            setFillGapsState([\r\n                ...fillGapsState,\r\n                []\r\n            ]);\r\n        }\r\n        inputSentence.current.value = '';\r\n    };\r\n\r\n    const handleSentenceKeyPress = (evt: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (evt.code === 'Enter' && inputSentence.current.value !== '') {\r\n            addSentence();\r\n        }\r\n    };\r\n\r\n    const handleSentenceRemove = (sentenceIdx: number) => {\r\n        if (onChallengeChange) {\r\n            const updatedSentences = challenge.sentences\r\n                .filter((aSentence: FillGapsChallengeSentence, idx: number) => idx !== sentenceIdx);\r\n            onChallengeChange({\r\n                ...challenge,\r\n                sentences: updatedSentences\r\n            });\r\n            setFillGapsState(fillGapsState.filter(\r\n                (aFillGapsState: FillGapsSentenceAnswer[], idx: number) => idx !== sentenceIdx\r\n            ));\r\n        }\r\n    };\r\n\r\n    const handleAddCandidateClick = (sentenceIdx: number, hiddenExpIdx: number) => {\r\n        setSelectedExpression([sentenceIdx, hiddenExpIdx]);\r\n        setOpenCandidatesDialog(true);\r\n    };\r\n\r\n    const handleCandidateAccept = (newCandidates: string[]) => {\r\n        if (onChallengeChange && selectedExpression) {\r\n            const updatedSentences = challenge.sentences.map((\r\n                aSentence: FillGapsChallengeSentence,\r\n                sentenceIdx: number\r\n            ) => sentenceIdx !== selectedExpression[0] ? aSentence : (\r\n                {\r\n                    ...aSentence,\r\n                    hiddenExpressions: aSentence.hiddenExpressions.map((\r\n                        aHiddenExpression: FillGapsChallengeExpression,\r\n                        hiddenExpresionIdx: number\r\n                    ) => hiddenExpresionIdx !== selectedExpression[1] ? aHiddenExpression : (\r\n                        {\r\n                            ...aHiddenExpression,\r\n                            alternatives: [...newCandidates]\r\n                        }\r\n                    ))\r\n                }\r\n            ));\r\n            onChallengeChange({\r\n                ...challenge,\r\n                sentences: updatedSentences\r\n            });\r\n        }\r\n        setOpenCandidatesDialog(false);\r\n    };\r\n\r\n    const expressionInSentence = (sentence: string, expression: FillGapsChallengeExpression): string => {\r\n        return joinSentence(\r\n            splitSentence(sentence)\r\n                .slice(expression.initPosition, expression.initPosition + expression.wordCount)\r\n        );\r\n    };\r\n\r\n    const handleSentenceAnswer = (sentenceIdx: number, answer: FillGapsSentenceAnswer[]) => {\r\n        console.log(answer);\r\n        const updatedState = fillGapsState.map((aFillGapsState: FillGapsSentenceAnswer[], idx: number) => (\r\n            idx === sentenceIdx ? [...answer] : [...aFillGapsState]\r\n        ));\r\n        setFillGapsState(updatedState);\r\n    };\r\n\r\n    const completed = () => {\r\n        return challenge.sentences\r\n            .reduce((acc: boolean, current: FillGapsChallengeSentence, sentenceIdx: number) => (\r\n                acc\r\n                && current.hiddenExpressions.length === fillGapsState[sentenceIdx].length\r\n                && fillGapsState[sentenceIdx].every((el: FillGapsSentenceAnswer) => (\r\n                    el.value != null && el.value !== ''\r\n                ))\r\n            ), true);\r\n    };\r\n\r\n    const isDropped = (item: Item): boolean => {\r\n        const text = expressionInSentence(\r\n            item.sentenceText,\r\n            item.hiddenExpression\r\n        );\r\n\r\n        return fillGapsState.some((sentencesAnswer: FillGapsSentenceAnswer[]) => (\r\n            sentencesAnswer.some((aSentenceAnswer: FillGapsSentenceAnswer) => (\r\n                aSentenceAnswer.value === text\r\n            ))\r\n        ));\r\n    };\r\n\r\n    const handleCheckClick = () => {\r\n        const correct = challenge.sentences.reduce(\r\n            (accSentences: boolean, currentSentence: FillGapsChallengeSentence, sentenceIdx: number) => {\r\n                const words: string[] = splitSentence(currentSentence.text);\r\n                const correctExpressions = currentSentence.hiddenExpressions.reduce(\r\n                    (accExpressions: boolean, currentExpression: FillGapsChallengeExpression, expressionIdx: number) => {\r\n                        const hiddenAnswer = fillGapsState[sentenceIdx]\r\n                            .find((anAnswer: FillGapsSentenceAnswer) => anAnswer.hiddenIdx === expressionIdx);\r\n\r\n                        return hiddenAnswer != null && accExpressions && (\r\n                            checkEqual(\r\n                                joinSentence(words.slice(\r\n                                    currentExpression.initPosition,\r\n                                    currentExpression.initPosition + currentExpression.wordCount\r\n                                )),\r\n                                hiddenAnswer.value,\r\n                                challenge.config.checkCapitalLetters,\r\n                                challenge.config.checkAccentMarks\r\n                            )\r\n                            || currentExpression.alternatives.some(\r\n                                (anAlternative: string) => checkEqual(\r\n                                    anAlternative,\r\n                                    hiddenAnswer.value,\r\n                                    challenge.config.checkCapitalLetters,\r\n                                    challenge.config.checkAccentMarks\r\n                                )\r\n                            )\r\n                        );\r\n                    },\r\n                    true\r\n                );\r\n                return accSentences && correctExpressions;\r\n            },\r\n            true\r\n        );\r\n        showResult(correct);\r\n    };\r\n\r\n    return (\r\n        <Card variant='outlined' className={classes.root}>\r\n            <div className={classes.titleContainer}>\r\n                <ChallengeQuestion\r\n                    mode={mode}\r\n                    question={challenge.question}\r\n                    fontSize={challenge.config.questionFontSize}\r\n                    onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            <div className={classes.answerContainer}>\r\n                <Grid container justify='center' className={classes.fullHeight}>\r\n                    <Grid item xs={2} className={classes.fullHeight}>\r\n                        {\r\n                            options != null && !options.ignoreTimeLimit && (\r\n                                <Countdown\r\n                                    mode={mode}\r\n                                    time={challenge.config.timeLimit}\r\n                                    stopTimer={stopTimer}\r\n                                    onTimeUp={handlerTimeUp}\r\n                                />\r\n                            )\r\n                        }\r\n                    </Grid>\r\n                    <Grid item xs={8} className={classes.fullHeight}>\r\n                        {\r\n                            selectedExpression && (\r\n                                <DialogFillGapsCandidates\r\n                                    open={openCandidatesDialog}\r\n                                    text={\r\n                                        expressionInSentence(\r\n                                            challenge.sentences[selectedExpression[0]].text,\r\n                                            challenge.sentences[selectedExpression[0]].hiddenExpressions[selectedExpression[1]]\r\n                                        )\r\n                                    }\r\n                                    candidates={\r\n                                        challenge.sentences[selectedExpression[0]]\r\n                                            .hiddenExpressions[selectedExpression[1]].alternatives\r\n                                    }\r\n                                    onAccept={handleCandidateAccept}\r\n                                    onCancel={() => { setOpenCandidatesDialog(false); }}\r\n                                />\r\n                            )\r\n                        }\r\n                        <DndProvider backend={HTML5Backend}>\r\n                            <Grid\r\n                                container\r\n                                spacing={2}\r\n                                direction=\"column\"\r\n                                className={classes.fullHeight}\r\n                            >\r\n                                {\r\n                                    (\r\n                                        mode === ComponentMode.Design ||\r\n                                        challenge.config.fillMethod === FillMethod.Dragging\r\n                                    ) && (\r\n                                        <Grid\r\n                                            item\r\n                                            // xs={12}\r\n                                            className={classes.optionsContainer}\r\n                                        >\r\n                                            <Grid container spacing={2} justify=\"space-around\" alignItems=\"center\">\r\n                                                {\r\n                                                    draggableItems.map((anItem: Item) => !isDropped(anItem) && (\r\n                                                        <Grid item key={`gridItem_${anItem.sentenceIdx}_${anItem.hiddenExpression.initPosition}`}>\r\n                                                            <DragableItem\r\n                                                                name={expressionInSentence(\r\n                                                                    anItem.sentenceText,\r\n                                                                    anItem.hiddenExpression\r\n                                                                )}\r\n                                                                key={`dragable_${anItem.sentenceIdx}_${anItem.hiddenExpression.initPosition}`}\r\n                                                                style={{fontSize: challenge.config.textFontSize}}\r\n                                                                iconButton={\r\n                                                                    mode === ComponentMode.Design ? (\r\n                                                                        <IconButton\r\n                                                                            size=\"small\"\r\n                                                                            onClick={() => {\r\n                                                                                handleAddCandidateClick(\r\n                                                                                    anItem.sentenceIdx,\r\n                                                                                    anItem.hiddenExpressionIdx\r\n                                                                                );\r\n                                                                            }}\r\n                                                                        >\r\n                                                                            <Icon>add_circle</Icon>\r\n                                                                        </IconButton>\r\n                                                                    ) : undefined\r\n                                                                }\r\n                                                            />\r\n                                                        </Grid>\r\n                                                    ))\r\n                                                }\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                    )\r\n                                }\r\n                                <Grid\r\n                                    item\r\n                                    xs\r\n                                >\r\n                                    <Grid container direction=\"column\" justify=\"space-around\" className={`${classes.fullWidth} ${classes.fullHeight}`}>\r\n                                        {\r\n                                            challenge.sentences.map((\r\n                                                aSentence: FillGapsChallengeSentence,\r\n                                                sentenceIdx: number\r\n                                            ) => (\r\n                                                <Grid\r\n                                                    item\r\n                                                    key={`sentence_${sentenceIdx}`}\r\n                                                >\r\n                                                    <FillGapsSentence\r\n                                                        mode={mode}\r\n                                                        sentence={aSentence}\r\n                                                        fillMethod={challenge.config.fillMethod}\r\n                                                        checkCapitalLetters={challenge.config.checkCapitalLetters}\r\n                                                        checkAccentMarks={challenge.config.checkAccentMarks}\r\n                                                        showResults={highlightResults}\r\n                                                        fontSize={challenge.config.textFontSize}\r\n                                                        onSentenceChange={(\r\n                                                            updatedSentence: FillGapsChallengeSentence\r\n                                                        ) => handleSentenceChange(updatedSentence, sentenceIdx)}\r\n                                                        onSentenceRemove={() => { handleSentenceRemove(sentenceIdx); }}\r\n                                                        onAnswersChange={(answer: FillGapsSentenceAnswer[]) => {\r\n                                                            handleSentenceAnswer(sentenceIdx, answer);\r\n                                                        }}\r\n                                                    />\r\n                                                </Grid>\r\n                                            ))\r\n                                        }\r\n                                    </Grid>\r\n                                </Grid>\r\n                                {\r\n                                    mode === ComponentMode.Design && (\r\n                                        <Grid item>\r\n                                            <TextField\r\n                                                inputRef={inputSentence}\r\n                                                variant=\"outlined\"\r\n                                                style={{width: '100%'}}\r\n                                                InputProps={\r\n                                                    {\r\n                                                        style: {\r\n                                                            fontSize: challenge.config.textFontSize,\r\n                                                            color: '#000000'\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n                                                label=\"Nueva frase\"\r\n                                                onKeyPress={handleSentenceKeyPress}\r\n                                            />\r\n                                        </Grid>\r\n                                    )\r\n                                }\r\n                            </Grid>\r\n                        </DndProvider>\r\n                    </Grid>\r\n                    <Grid item xs={2} style={{ height: '100%' }} className={classes.centerAll}>\r\n                        {\r\n                            <Fab\r\n                                variant=\"extended\"\r\n                                size=\"large\"\r\n                                color=\"primary\"\r\n                                disabled={mode === ComponentMode.Design || !completed()}\r\n                                onClick={() => { handleCheckClick(); }}\r\n                            >\r\n                                <Icon>check</Icon>&nbsp;{options?.language === Language.En ? 'Check' : 'Corregir'}\r\n                            </Fab>\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { FormControl, FormControlLabel, Grid, InputLabel, makeStyles, MenuItem, Select, Switch, TextField, Typography } from '@material-ui/core';\r\nimport { FillGapsChallengeConfig } from '../../types/FillGapsChallenge';\r\nimport { FillMethod } from '../../enums/FillMethod';\r\n\r\nconst useStyles = makeStyles({\r\n    fullWidth: {\r\n        width: '100%',\r\n    }\r\n});\r\n\r\ninterface FillGapsConfiguratorProps {\r\n    config: FillGapsChallengeConfig,\r\n    onConfigChange?: (config: FillGapsChallengeConfig) => void\r\n}\r\n\r\nexport const FillGapsConfigurator: React.FC<FillGapsConfiguratorProps> = (props: FillGapsConfiguratorProps) => {\r\n    const { config, onConfigChange } = props;\r\n\r\n    const [formData, setFormData] = useState<FillGapsChallengeConfig>(config);\r\n\r\n    const inputTimeLimit = useRef({} as HTMLInputElement);\r\n    const inputQuestionFontSize = useRef({} as HTMLInputElement);\r\n    const inputTextFontSize = useRef({} as HTMLInputElement);\r\n    const inputFillMethod = useRef({} as HTMLSelectElement);\r\n    const checkCapitalLetters = useRef({} as HTMLInputElement);\r\n    const checkAccentMarks = useRef({} as HTMLInputElement);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setFormData(config);\r\n    }, [config]);\r\n\r\n    const handleConfigParameterChange = (parameter: string, value: number | boolean | string) => {\r\n        const newConfig = {\r\n            ...formData,\r\n            [parameter]: value\r\n        };\r\n        setFormData(newConfig);\r\n        if (onConfigChange) {\r\n            onConfigChange(newConfig);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container direction='column' spacing={2}>\r\n            <Grid item>\r\n                <Typography variant='h5'>Configuracin</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputTimeLimit}\r\n                    type='number'\r\n                    label='Lmite de tiempo (segundos)'\r\n                    inputProps={{ min: 10 }}\r\n                    value={formData.timeLimit}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('timeLimit', parseInt(inputTimeLimit.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputQuestionFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra del ttulo'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.questionFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('questionFontSize', parseInt(inputQuestionFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <TextField\r\n                    inputRef={inputTextFontSize}\r\n                    type='number'\r\n                    label='Tamao de letra de los elementos'\r\n                    inputProps={{ min: 1 }}\r\n                    value={formData.textFontSize}\r\n                    color='secondary'\r\n                    className={classes.fullWidth}\r\n                    onInput={() => { handleConfigParameterChange('textFontSize', parseInt(inputTextFontSize.current.value)); }}\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <FormControl className={classes.fullWidth}>\r\n                    <InputLabel>Modo de rellenado</InputLabel>\r\n                    <Select\r\n                        inputRef={inputFillMethod}\r\n                        label=\"Modo de rellenado\"\r\n                        value={formData.fillMethod}\r\n                        color='secondary'\r\n                        className={classes.fullWidth}\r\n                        onChange={(evt: React.ChangeEvent<{name?: string | undefined, value: unknown}>) => {\r\n                            handleConfigParameterChange('fillMethod', evt.target.value as string);\r\n                        }}\r\n                    >\r\n                        <MenuItem value={FillMethod.Writing}>Escribiendo</MenuItem>\r\n                        <MenuItem value={FillMethod.Dragging}>Arrastrando</MenuItem>\r\n                    </Select>\r\n                </FormControl>\r\n            </Grid>\r\n            <Grid item>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            inputRef={checkCapitalLetters}\r\n                            name='checkMultiselect'\r\n                            checked={formData.checkCapitalLetters}\r\n                            color='secondary'\r\n                            onChange={() => { handleConfigParameterChange('checkCapitalLetters', checkCapitalLetters.current.checked); }}\r\n                        />\r\n                    }\r\n                    label='Comprobar maysculas/minsculas'\r\n                />\r\n            </Grid>\r\n            <Grid item>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            inputRef={checkAccentMarks}\r\n                            name='checkAccentMarks'\r\n                            checked={formData.checkAccentMarks}\r\n                            color='secondary'\r\n                            onChange={() => { handleConfigParameterChange('checkAccentMarks', checkAccentMarks.current.checked); }}\r\n                        />\r\n                    }\r\n                    label='Comprobar tildes'\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { FillGapsChallenge, FillGapsChallengeConfig } from '../../types/FillGapsChallenge';\r\nimport { FillGapsChallenger } from './FillGapsChallenger';\r\nimport { FillGapsConfigurator } from './FillGapsConfigurator';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\n\r\nconst useStyles = makeStyles({\r\n    fullHeight: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\ninterface FillGapsChallengeDesignerProps {\r\n    challenge: FillGapsChallenge,\r\n    onChallengeChange: (challenge: FillGapsChallenge) => void\r\n}\r\n\r\nexport const FillGapsChallengeDesigner: React.FC<FillGapsChallengeDesignerProps> = (\r\n    props: FillGapsChallengeDesignerProps\r\n) => {\r\n    const { challenge, onChallengeChange } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const handlerChallengeChange = (updatedChallenge: FillGapsChallenge) => {\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    const handleConfigChange = (config: FillGapsChallengeConfig) => {\r\n        const updatedChallenge: FillGapsChallenge = {\r\n            ...challenge,\r\n            config\r\n        };\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    return (\r\n        <Grid container className={classes.fullHeight} spacing={2}>\r\n            <Grid item xs={10} className={classes.fullHeight}>\r\n                <FillGapsChallenger\r\n                    mode={ComponentMode.Design}\r\n                    challenge={challenge}\r\n                    onChallengeChange={handlerChallengeChange}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={2} className={classes.fullHeight}>\r\n                <FillGapsConfigurator config={challenge.config} onConfigChange={handleConfigChange} />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { Challenge } from '../../types/Challenge';\r\nimport { ChallengeType } from '../../enums/ChallengeType';\r\nimport { SelectAnswerChallengeDesigner } from '../SelectAnswerChallenge/SelectAnswerChallengeDesigner';\r\nimport { SelectAnswerChallenge } from '../../types/SelectAnswerChallenge';\r\nimport { TrueOrFalseChallengeDesigner } from '../TrueOrFalseChallenge/TrueOrFalseChallengeDesigner';\r\nimport { TrueOrFalseChallenge } from '../../types/TrueOrFalseChallenge';\r\nimport { ClassifyChallengeDesigner } from '../ClassifyChallenge/ClassifyChallengeDesigner';\r\nimport { ClassifyChallenge } from '../../types/ClassifyChallenge';\r\nimport { SortChallenge } from '../../types/SortChallenge';\r\nimport { SortChallengeDesigner } from '../SortChallenge/SortChallengeDesigner';\r\nimport { FillTableChallengeDesigner } from '../FillTableChallenge/FillTableChallengeDesigner';\r\nimport { FillTableChallenge } from '../../types/FillTableChallenge';\r\nimport { FillGapsChallengeDesigner } from '../FillGapsChallenge/FillGapsChallengeDesigner';\r\nimport { FillGapsChallenge } from '../../types/FillGapsChallenge';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    fullHeight: {\r\n        height: '100%'\r\n    }\r\n}));\r\n\r\ninterface ChallengeDesignerProps {\r\n    challenge: Challenge,\r\n    onChallengeChange: (challenge: Challenge) => void\r\n}\r\n\r\nexport const ChallengeDesigner: React.FC<ChallengeDesignerProps> = (props: ChallengeDesignerProps) => {\r\n    const { challenge, onChallengeChange } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleChallengeChange = (updatedChallenge: Challenge) => {\r\n        onChallengeChange(updatedChallenge);\r\n    };\r\n\r\n    return (\r\n        <Grid container className={classes.fullHeight}>\r\n            <Grid item xs={12}>\r\n                {\r\n                    challenge?.type === ChallengeType.SelectAnswer\r\n                    && (\r\n                        <SelectAnswerChallengeDesigner\r\n                            challenge={challenge as SelectAnswerChallenge}\r\n                            onChallengeChange={handleChallengeChange}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.TrueOrFalse\r\n                    && (\r\n                        <TrueOrFalseChallengeDesigner\r\n                            challenge={challenge as TrueOrFalseChallenge}\r\n                            onChallengeChange={handleChallengeChange}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.FillGaps\r\n                    && (\r\n                        <FillGapsChallengeDesigner\r\n                            challenge={challenge as FillGapsChallenge}\r\n                            onChallengeChange={handleChallengeChange}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.Sort\r\n                    && (\r\n                        <SortChallengeDesigner\r\n                            challenge={challenge as SortChallenge}\r\n                            onChallengeChange={handleChallengeChange}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.Classify\r\n                    && (\r\n                        <ClassifyChallengeDesigner\r\n                            challenge={challenge as ClassifyChallenge}\r\n                            onChallengeChange={handleChallengeChange}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.FillTable\r\n                    && (\r\n                        <FillTableChallengeDesigner\r\n                            challenge={challenge as FillTableChallenge}\r\n                            onChallengeChange={handleChallengeChange}\r\n                        />\r\n                    )\r\n                }\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { Fragment, useEffect, useState } from 'react';\r\nimport { Grid, Icon, IconButton, ListItemIcon, makeStyles, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { useProjects } from '../../hooks/useProjects';\r\nimport { Project } from '../../types/Project';\r\nimport { Test } from '../../types/Test';\r\nimport { ChallengeSelector } from './ChallengeSelector';\r\nimport { ChallengeDesigner } from './ChallengeDesigner';\r\nimport { Challenge } from '../../types/Challenge';\r\nimport { ChallengeType } from '../../enums/ChallengeType';\r\nimport { getChallengeTypeDescription, getChallengeTypeIcon, getDefaultChallenge } from '../../utils/utilChallenges';\r\nimport { colors } from '../../theme';\r\nimport { DialogConfirm } from '../common/DialogConfirm';\r\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\r\nimport { Language } from '../../enums/Language';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    fullHeight: {\r\n        height: '100%'\r\n    },\r\n    fullWidth: {\r\n        width: '100%'\r\n    },\r\n    listContainer: {\r\n        paddingRight: '10px',\r\n        height: '100%',\r\n        width: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    challengesContainer: {\r\n        height: 'calc(100% - 50px)',\r\n        width: '100%',\r\n        overflowY: 'auto',\r\n        overflowX: 'hidden',\r\n        listStyle: 'none',\r\n        '&::-webkit-scrollbar': {\r\n            width: '0.2em'\r\n        },\r\n        '&::-webkit-scrollbar-track': {\r\n            boxShadow: 'inset 0 0 6px rgba(255,0,0,0.00)',\r\n            webkitBoxShadow: 'inset 0 0 6px rgba(255,0,0,0.00)'\r\n        },\r\n        '&::-webkit-scrollbar-thumb': {\r\n            backgroundColor: colors.primary.light,\r\n            outline: '1px solid slategrey'\r\n        }\r\n    },\r\n    challengeSelector: {\r\n        flexGrow: 1\r\n    }\r\n}));\r\n\r\ninterface TestDesignerProps {\r\n    projectId: string,\r\n    testId: string\r\n}\r\n\r\nexport const TestDesigner: React.FC<TestDesignerProps> = (props: TestDesignerProps) => {\r\n    const { projectId, testId } = props;\r\n\r\n    const { projects, setProjects } = useProjects();\r\n\r\n    const [test, setTest] = useState<Test>({\r\n        id: uuidv4(),\r\n        name: 'Nuevo cuestionario',\r\n        description: '',\r\n        language: Language.Es,\r\n        challenges: []\r\n    });\r\n\r\n    const [compactList, setCompactList] = useState<boolean>(false);\r\n    const [selectedChallenge, setSelectedChallenge] = useState<Challenge>();\r\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n    const [deletedChallenge, setDeletedChallenge] = useState<Challenge>();\r\n    const [openRemoveChallengeConfirm, setOpenRemoveChallengeConfirm] = useState<boolean>(false);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        const project = projects.find((aProject: Project) => aProject.id === projectId);\r\n        if (project != null) {\r\n            const test = project.tests.find((aTest: Test) => aTest.id === testId);\r\n            if (test != null) {\r\n                setTest(test);\r\n                if (test.challenges.length > 0) {\r\n                    if (selectedChallenge == null) {\r\n                        setSelectedChallenge(test.challenges[0]);\r\n                    } else {\r\n                        setSelectedChallenge({ ...selectedChallenge });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, [projects, projectId, testId]);\r\n\r\n    const handleSelectChallenge = (challenge: Challenge) => {\r\n        setSelectedChallenge(challenge);\r\n    };\r\n\r\n    const handleDeleteChallenge = (challenge: Challenge) => {\r\n        setDeletedChallenge(challenge);\r\n        setOpenRemoveChallengeConfirm(true);\r\n    };\r\n\r\n    const handleClickNewChallengeMenu = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleNewChallengeOptionClick = (type: ChallengeType) => {\r\n        const newChallenge: Challenge = getDefaultChallenge(type);\r\n        const updatedProjects = projects.map((aProject: Project) => {\r\n            if (aProject.id !== projectId) {\r\n                return { ...aProject };\r\n            }\r\n            const updatedTests = aProject.tests.map((aTest: Test) => {\r\n                if (aTest.id !== testId) {\r\n                    return { ...aTest };\r\n                }\r\n                return {\r\n                    ...aTest,\r\n                    challenges: [...aTest.challenges, newChallenge]\r\n                };\r\n            });\r\n            return {\r\n                ...aProject,\r\n                tests: [...updatedTests]\r\n            };\r\n        });\r\n        setProjects(updatedProjects);\r\n        setSelectedChallenge(newChallenge);\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleCloseNewChallengeMenu = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleChallengeChange = (updatedChallenge: Challenge) => {\r\n        const updatedProjects = projects.map((aProject: Project) => {\r\n            if (aProject.id !== projectId) {\r\n                return aProject;\r\n            }\r\n            const updatedTests = aProject.tests.map((aTest: Test) => {\r\n                if (aTest.id !== testId) {\r\n                    return { ...aTest };\r\n                }\r\n                const updatedChallenges = aTest.challenges.map((aChallenge: Challenge) => {\r\n                    if (aChallenge.id !== updatedChallenge.id) {\r\n                        return { ...aChallenge };\r\n                    }\r\n                    return { ...updatedChallenge };\r\n                });\r\n                return {\r\n                    ...aTest,\r\n                    challenges: [...updatedChallenges]\r\n                };\r\n            });\r\n            return {\r\n                ...aProject,\r\n                tests: [...updatedTests]\r\n            };\r\n        });\r\n        setProjects(updatedProjects);\r\n        setSelectedChallenge({ ...updatedChallenge });\r\n    };\r\n\r\n    const handleConfirmRemoveChallenge = () => {\r\n        const updatedProjects = projects.map((aProject: Project) => {\r\n            if (aProject.id !== projectId) {\r\n                return aProject;\r\n            }\r\n            const updatedTests = aProject.tests.map((aTest: Test) => {\r\n                if (aTest.id !== testId) {\r\n                    return aTest;\r\n                }\r\n                if (deletedChallenge?.id === selectedChallenge?.id) {\r\n                    setSelectedChallenge(aTest.challenges.find(\r\n                        (aChallenge: Challenge) => aChallenge.id !== deletedChallenge?.id\r\n                    ));\r\n                }\r\n                const updatedChallenges = aTest.challenges.filter((\r\n                    aChallenge: Challenge\r\n                ) => aChallenge.id !== deletedChallenge?.id);\r\n                return {\r\n                    ...aTest,\r\n                    challenges: [...updatedChallenges]\r\n                };\r\n            });\r\n            return {\r\n                ...aProject,\r\n                tests: [...updatedTests]\r\n            };\r\n        });\r\n        setProjects(updatedProjects);\r\n        setOpenRemoveChallengeConfirm(false);\r\n    };\r\n\r\n    const handleRefuseRemoveChallenge = () => {\r\n        setOpenRemoveChallengeConfirm(false);\r\n    };\r\n\r\n    const handleListModeChange = (event: React.MouseEvent<HTMLElement>, newListMode: boolean) => {\r\n        setCompactList(newListMode);\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <DialogConfirm\r\n                open={openRemoveChallengeConfirm}\r\n                text='Seguro que deseas eliminar la pregunta?'\r\n                width='xs'\r\n                onConfirm={handleConfirmRemoveChallenge}\r\n                onRefuse={handleRefuseRemoveChallenge}\r\n            />\r\n            <Grid container className={classes.fullHeight} spacing={2}>\r\n                <Grid item xs={2} className={classes.listContainer}>\r\n                    <Grid container direction='column' className={classes.fullHeight}>\r\n                        <Grid item className={classes.fullWidth}>\r\n                            <Grid container justify='space-between' alignItems='center'>\r\n                                <Grid item>\r\n                                    <Typography variant='h5'>Preguntas</Typography>\r\n                                </Grid>\r\n                                <Grid item>\r\n                                    <Grid container justify='flex-end' alignItems='center'>\r\n                                        <Grid item>\r\n                                            <ToggleButtonGroup size=\"small\" value={compactList} exclusive onChange={handleListModeChange}>\r\n                                                <ToggleButton value={false}>\r\n                                                    <Icon>crop_din</Icon>\r\n                                                </ToggleButton>\r\n                                                <ToggleButton value={true}>\r\n                                                    <Icon>reorder</Icon>\r\n                                                </ToggleButton>\r\n                                            </ToggleButtonGroup>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton onClick={handleClickNewChallengeMenu}>\r\n                                                <Icon color='primary'>add_circle</Icon>\r\n                                            </IconButton>\r\n                                            <Menu\r\n                                                id='new-challenge-menu'\r\n                                                anchorEl={anchorEl}\r\n                                                keepMounted\r\n                                                open={Boolean(anchorEl)}\r\n                                                onClose={handleCloseNewChallengeMenu}\r\n                                            >\r\n                                                <MenuItem onClick={() => {\r\n                                                    handleNewChallengeOptionClick(ChallengeType.SelectAnswer);\r\n                                                }}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.SelectAnswer, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.SelectAnswer)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                                <MenuItem onClick={() => {\r\n                                                    handleNewChallengeOptionClick(ChallengeType.TrueOrFalse);\r\n                                                }}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.TrueOrFalse, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.TrueOrFalse)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                                <MenuItem onClick={() => {\r\n                                                    handleNewChallengeOptionClick(ChallengeType.FillGaps);\r\n                                                }}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.FillGaps, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.FillGaps)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                                <MenuItem disabled onClick={handleCloseNewChallengeMenu}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.Match, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.Match)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                                <MenuItem disabled onClick={handleCloseNewChallengeMenu}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.Sort, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.Sort)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                                <MenuItem onClick={() => {\r\n                                                    handleNewChallengeOptionClick(ChallengeType.Classify);\r\n                                                }}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.Classify, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.Classify)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                                <MenuItem onClick={() => {\r\n                                                    handleNewChallengeOptionClick(ChallengeType.FillTable);\r\n                                                }}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.FillTable, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.FillTable)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                                <MenuItem disabled onClick={handleCloseNewChallengeMenu}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.TheOddOne, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.TheOddOne)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                                <MenuItem disabled onClick={handleCloseNewChallengeMenu}>\r\n                                                    <ListItemIcon>{getChallengeTypeIcon(ChallengeType.Crossword, 'large')}</ListItemIcon>\r\n                                                    <Typography variant='button'>\r\n                                                        {getChallengeTypeDescription(ChallengeType.Crossword)}\r\n                                                    </Typography>\r\n                                                </MenuItem>\r\n                                            </Menu>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid item className={classes.challengesContainer}>\r\n                            <ChallengeSelector\r\n                                challenges={test.challenges}\r\n                                compactList={compactList}\r\n                                selected={selectedChallenge}\r\n                                onSelect={handleSelectChallenge}\r\n                                onDelete={handleDeleteChallenge}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={10}>\r\n                    {\r\n                        selectedChallenge && (\r\n                            <ChallengeDesigner\r\n                                challenge={selectedChallenge}\r\n                                onChallengeChange={handleChallengeChange}\r\n                            />\r\n                        )\r\n                    }\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { useParams } from \"react-router\";\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { TestDesigner } from '../../components/Designer/TestDesigner';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    fullHeight: {\r\n        height: '100%'\r\n    }\r\n}));\r\n\r\nexport const Designer = () => {\r\n    const { projectId, testId } = useParams() as any;\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Grid\r\n            container\r\n            justify=\"center\"\r\n            className={classes.fullHeight}\r\n        >\r\n            <Grid item xs={12} className={classes.fullHeight}>\r\n                <TestDesigner\r\n                    projectId={projectId}\r\n                    testId={testId}\r\n                />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Grid, makeStyles } from '@material-ui/core';\r\nimport { ComponentMode } from '../../enums/ComponentMode';\r\nimport { Challenge, ChallengeOptions } from '../../types/Challenge';\r\nimport { ChallengeType } from '../../enums/ChallengeType';\r\nimport { SelectAnswerChallenger } from '../SelectAnswerChallenge/SelectAnswerChallenger';\r\nimport { SelectAnswerChallenge } from '../../types/SelectAnswerChallenge';\r\nimport { TrueOrFalseChallenge } from '../../types/TrueOrFalseChallenge';\r\nimport { TrueOrFalseChallenger } from '../TrueOrFalseChallenge/TrueOrFalseChallenger';\r\nimport { ClassifyChallenger } from '../ClassifyChallenge/ClassifyChallenger';\r\nimport { ClassifyChallenge } from '../../types/ClassifyChallenge';\r\nimport { FillTableChallenger } from '../FillTableChallenge/FillTableChallenger';\r\nimport { FillTableChallenge } from '../../types/FillTableChallenge';\r\nimport { FillGapsChallenger } from '../FillGapsChallenge/FillGapsChallenger';\r\nimport { FillGapsChallenge } from '../../types/FillGapsChallenge';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    fullHeight: {\r\n        height: '100%'\r\n    }\r\n}));\r\n\r\ninterface ChallengeEvaluatorProps {\r\n    challenge: Challenge,\r\n    options: ChallengeOptions,\r\n    onSuccess?: () => void,\r\n    onError?: () => void\r\n}\r\n\r\nexport const ChallengeEvaluator: React.FC<ChallengeEvaluatorProps> = (props: ChallengeEvaluatorProps) => {\r\n    const { challenge, options, onSuccess, onError } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const handlerSucessChallenge = () => {\r\n        if (onSuccess) {\r\n            onSuccess();\r\n        }\r\n    };\r\n\r\n    const handlerErrorChallenge = () => {\r\n        if (onError) {\r\n            onError();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container className={classes.fullHeight}>\r\n            <Grid item xs={12}>\r\n                {\r\n                    challenge?.type === ChallengeType.SelectAnswer\r\n                    && (\r\n                        <SelectAnswerChallenger\r\n                            mode={ComponentMode.Play}\r\n                            challenge={challenge as SelectAnswerChallenge}\r\n                            options={options}\r\n                            onSuccess={handlerSucessChallenge}\r\n                            onError={handlerErrorChallenge}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.TrueOrFalse\r\n                    && (\r\n                        <TrueOrFalseChallenger\r\n                            mode={ComponentMode.Play}\r\n                            challenge={challenge as TrueOrFalseChallenge}\r\n                            options={options}\r\n                            onSuccess={handlerSucessChallenge}\r\n                            onError={handlerErrorChallenge}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.FillGaps\r\n                    && (\r\n                        <FillGapsChallenger\r\n                            mode={ComponentMode.Play}\r\n                            challenge={challenge as FillGapsChallenge}\r\n                            options={options}\r\n                            onSuccess={handlerSucessChallenge}\r\n                            onError={handlerErrorChallenge}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.Classify\r\n                    && (\r\n                        <ClassifyChallenger\r\n                            mode={ComponentMode.Play}\r\n                            challenge={challenge as ClassifyChallenge}\r\n                            options={options}\r\n                            onSuccess={handlerSucessChallenge}\r\n                            onError={handlerErrorChallenge}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    challenge?.type === ChallengeType.FillTable\r\n                    && (\r\n                        <FillTableChallenger\r\n                            mode={ComponentMode.Play}\r\n                            challenge={challenge as FillTableChallenge}\r\n                            options={options}\r\n                            onSuccess={handlerSucessChallenge}\r\n                            onError={handlerErrorChallenge}\r\n                        />\r\n                    )\r\n                }\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import { Divider, Grid, LinearProgress, makeStyles, Typography } from '@material-ui/core';\r\nimport React, { useEffect } from 'react';\r\nimport { ChallengeType } from '../../enums/ChallengeType';\r\nimport { Language } from '../../enums/Language';\r\nimport { getChallengeTypeDescription } from '../../utils/utilChallenges';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        height: '100%',\r\n        border: 'solid 1px',\r\n        backgroundColor: theme.palette.primary.light,\r\n    }\r\n}));\r\n\r\ninterface ChallengeLauncherProps {\r\n    challengeType: ChallengeType,\r\n    challengeNumber: number,\r\n    challengeTotalCount: number,\r\n    language: Language,\r\n    delay: number,\r\n    onEnd: () => void\r\n}\r\n\r\nexport const ChallengeLauncher: React.FC<ChallengeLauncherProps> = (props: ChallengeLauncherProps) => {\r\n    const { challengeType, challengeNumber, challengeTotalCount, language, delay, onEnd } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => { onEnd(); }, delay * 1000);\r\n    }, []);\r\n\r\n    return (\r\n        <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\" spacing={2} className={classes.root}>\r\n            <Grid item>\r\n                <Typography variant=\"h2\">\r\n                    {\r\n                        getChallengeTypeDescription(challengeType, language)\r\n                    }\r\n                </Typography>\r\n            </Grid>\r\n            <Grid item style={{width: '100%'}}>\r\n                <LinearProgress color=\"secondary\" />\r\n            </Grid>\r\n            <Grid item>\r\n                <Typography variant=\"h4\">\r\n                    {\r\n                        language === Language.En ? (\r\n                            `Question ${challengeNumber.toString()} of ${challengeTotalCount.toString()}`\r\n                        ) : (\r\n                            `Pregunta ${challengeNumber.toString()} de ${challengeTotalCount.toString()}`\r\n                        )\r\n                    }\r\n                </Typography>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Button, Grid, Icon, makeStyles, Typography } from '@material-ui/core';\r\nimport { Test } from '../../types/Test';\r\nimport { Language } from '../../enums/Language';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        border: 'solid 1px'\r\n    },\r\n    timeline: {\r\n        transform: 'rotate(-90deg)'\r\n    },\r\n    timelineContentContainer: {\r\n        textAlign: 'left',\r\n        padding: '0px'\r\n    },\r\n    timelineContent: {\r\n        transform: 'rotate(90deg)',\r\n        padding: '0px 5px'\r\n    },\r\n    timelineIcon: {\r\n        transform: 'rotate(90deg)'\r\n    }\r\n}));\r\n\r\ninterface TestResultProps {\r\n    test: Test,\r\n    results: boolean[],\r\n    onBackHome: () => void,\r\n    onRepeatTest: () => void\r\n}\r\n\r\nexport const TestResult: React.FC<TestResultProps> = (props: TestResultProps) => {\r\n    const { test, results, onBackHome, onRepeatTest } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Grid container\r\n            direction=\"column\"\r\n            className={classes.root}\r\n            justify=\"center\"\r\n            alignItems=\"center\"\r\n            spacing={4}\r\n        >\r\n            <Grid item>\r\n                <Typography variant=\"h2\">\r\n                    {test.name}\r\n                </Typography>\r\n            </Grid>\r\n            <Grid item>\r\n                <Typography variant=\"h3\">\r\n                    {test.description}\r\n                </Typography>\r\n            </Grid>\r\n            <Grid item>\r\n                <Typography variant=\"h4\">\r\n                    {\r\n                        `${test.language === Language.En ? 'Correct answers' : 'Respuestas correctas'}: ${results.filter((aResult: boolean) => aResult).length}/${results.length}`\r\n                    }\r\n                </Typography>\r\n            </Grid>\r\n            <Grid item container justify=\"center\" alignItems=\"center\" spacing={4}>\r\n                <Grid item>\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={onBackHome}>\r\n                        <Icon>navigate_before</Icon>\r\n                        &nbsp;\r\n                        { test.language === Language.En ? 'Go back to home' : 'Volver a la pantalla principal' }\r\n                    </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={onRepeatTest}>\r\n                        <Icon>replay</Icon>\r\n                        &nbsp;\r\n                        { test.language === Language.En ? 'repeat test' : 'Repetir cuestionario' }\r\n                    </Button>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useHistory, useParams } from \"react-router\";\r\nimport { Fab, Grid, Icon, makeStyles } from '@material-ui/core';\r\nimport { Test, TestOptions } from '../../types/Test';\r\nimport { useProjects } from '../../hooks/useProjects';\r\nimport { Project } from '../../types/Project';\r\nimport { ChallengeEvaluator } from '../../components/Evaluator/ChallengeEvaluator';\r\nimport { ChallengeLauncher } from '../../components/Evaluator/ChallengeLauncher';\r\nimport { TestResult } from '../../components/Evaluator/TestResult';\r\nimport { parseQueryString } from '../../utils/utilStrings';\r\nimport { Language } from '../../enums/Language';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    fullHeight: {\r\n        height: '100%'\r\n    },\r\n    centerAll: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    }\r\n}));\r\n\r\ninterface IParams {\r\n    projectId: string,\r\n    testId: string\r\n}\r\n\r\ninterface ChallengeState {\r\n    idx: number,\r\n    launching: boolean\r\n}\r\n\r\nexport const Evaluator: React.FC = () => {\r\n    const { projectId, testId } = useParams() as IParams;\r\n    const history = useHistory();\r\n\r\n    const { projects } = useProjects();\r\n    const [testOptions] = useState<TestOptions>(parseQueryString(history.location.search));\r\n    const [test, setTest] = useState<Test>();\r\n    const [currentChallengeState, setCurrentChallengeState] = useState<ChallengeState>({idx: -1, launching: false});\r\n    const [results, setResults] = useState<boolean[]>([]);\r\n    const [showResult, setShowResult] = useState<boolean>(false);\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        if (projectId != null && testId != null) {\r\n            const theProject: Project = projects.find((aProject: Project) => aProject.id === projectId);\r\n            if (theProject != null) {\r\n                const theTest: Test | undefined = theProject.tests.find((aTest: Test) => aTest.id === testId);\r\n                if (theTest != null) {\r\n                    setTest(theTest);\r\n                    setCurrentChallengeState({idx: 0, launching: true});\r\n                }\r\n            }\r\n        }\r\n    }, [projectId, testId]);\r\n\r\n    const next = () => {\r\n        if (test != null) {\r\n            if (currentChallengeState.launching) {\r\n                setCurrentChallengeState({\r\n                    ...currentChallengeState,\r\n                    launching: false\r\n                });\r\n            } else {\r\n                if (currentChallengeState.idx < test.challenges.length - 1) {\r\n                    setCurrentChallengeState({\r\n                        idx: currentChallengeState.idx + 1,\r\n                        launching: true\r\n                    });\r\n                } else {\r\n                    setCurrentChallengeState({\r\n                        idx: -1,\r\n                        launching: false\r\n                    });\r\n                    setShowResult(true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleResponse = (success: boolean) => {\r\n        setResults([...results, success]);\r\n        if (testOptions.autoNext) {\r\n            next();\r\n        }\r\n    };\r\n\r\n    const handleBackHome = () => {\r\n        history.push('/');\r\n    };\r\n\r\n    const handleRepeatTest = () => {\r\n        setCurrentChallengeState({idx: 0, launching: true});\r\n        setResults([]);\r\n        setShowResult(false);\r\n    };\r\n\r\n    return (\r\n        <Grid\r\n            container\r\n            justify=\"center\"\r\n            className={classes.fullHeight}\r\n        >\r\n            <Grid item xs={2}></Grid>\r\n            <Grid item xs={8} className={classes.fullHeight}>\r\n                {\r\n                    test != null && currentChallengeState.launching && currentChallengeState.idx >= 0 && (\r\n                        <ChallengeLauncher\r\n                            challengeType={test.challenges[currentChallengeState.idx].type}\r\n                            challengeNumber={currentChallengeState.idx + 1}\r\n                            challengeTotalCount={test.challenges.length}\r\n                            language={test.language}\r\n                            delay={3}\r\n                            onEnd={next}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    test != null && !currentChallengeState.launching && currentChallengeState.idx >= 0 && (\r\n                        <ChallengeEvaluator\r\n                            challenge={test.challenges[currentChallengeState.idx]}\r\n                            options={{\r\n                                language: test.language,\r\n                                ignoreTimeLimit: testOptions.ignoreTimeLimit\r\n                            }}\r\n                            onSuccess={() => { handleResponse(true); }}\r\n                            onError={() => { handleResponse(false); }}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    test != null && showResult && (\r\n                        <TestResult\r\n                            test={test}\r\n                            results={results}\r\n                            onBackHome={handleBackHome}\r\n                            onRepeatTest={handleRepeatTest}\r\n                        />\r\n                    )\r\n                }\r\n            </Grid>\r\n            <Grid item xs={2} className={`${classes.fullHeight} ${classes.centerAll}`}>\r\n                {\r\n                    !testOptions.autoNext\r\n                    && currentChallengeState.idx === results.length - 1\r\n                    && (\r\n                        <Fab\r\n                            variant=\"extended\"\r\n                            size=\"large\"\r\n                            color=\"primary\"\r\n                            onClick={next}\r\n                        >\r\n                            {test?.language === Language.En ? 'Next' : 'Siguiente'}&nbsp;<Icon>navigate_next</Icon>\r\n                        </Fab>\r\n                    )\r\n                }\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport { ProjectContextProvider } from './context/ProjectContext';\r\nimport {\r\n    HashRouter as Router,\r\n    Switch,\r\n    Route\r\n} from \"react-router-dom\";\r\nimport { theme } from \"./theme\";\r\nimport { MainHeader } from \"./components/common/MainHeader\";\r\nimport { Home } from \"./views/Home\";\r\nimport { Designer } from \"./views/Designer\";\r\nimport { Evaluator } from \"./views/Evaluator\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    mainContainer: {\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    },\r\n    headerContainer: {\r\n        width: '100%',\r\n        height: '75px'\r\n    },\r\n    content: {\r\n        margin: '30px',\r\n        height: 'calc(100% - 135px)'\r\n    }\r\n}));\r\n\r\nexport default function App() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Router>\r\n            <ThemeProvider theme={theme}>\r\n                <ProjectContextProvider>\r\n                    <div className={classes.mainContainer}>\r\n                        <div className={classes.headerContainer}>\r\n                            <MainHeader></MainHeader>\r\n                        </div>\r\n                        <div className={classes.content}>\r\n                            <Switch>\r\n                                <Route exact path=\"/\">\r\n                                    <Home />\r\n                                </Route>\r\n                                <Route path=\"/designer/:projectId/:testId\">\r\n                                    <Designer />\r\n                                </Route>\r\n                                <Route path=\"/play/:projectId/:testId\">\r\n                                    <Evaluator />\r\n                                </Route>\r\n                            </Switch>\r\n                        </div>\r\n                    </div>\r\n                </ProjectContextProvider>\r\n            </ThemeProvider>\r\n        </Router >\r\n    );\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n    if (onPerfEntry && onPerfEntry instanceof Function) {\r\n        import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n            getCLS(onPerfEntry);\r\n            getFID(onPerfEntry);\r\n            getFCP(onPerfEntry);\r\n            getLCP(onPerfEntry);\r\n            getTTFB(onPerfEntry);\r\n        });\r\n    }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}