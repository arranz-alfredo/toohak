(this.webpackJsonptoohak=this.webpackJsonptoohak||[]).push([[0],{126:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var c,i,a=n(0),r=n.n(a),o=n(17),s=n.n(o),l=(n(126),n(188)),u=n(212),j=n(6),d=n(1),b=r.a.createContext([]),h=function(e){var t=e.children,n=Object(a.useState)([]),c=Object(j.a)(n,2),i=c[0],r=c[1];return Object(d.jsx)(b.Provider,{value:{projects:i,setProjects:r},children:t})},f=n(51),O=n(18),m=n(106),x={main:"#2196f3",light:"#6ec6ff",dark:"#0069c0"},p={main:"#e91e63",light:"#ff6090",dark:"#b0003a"},g="#f44336",v={main:"#2196f3",light:"#ffffff",dark:"#0069c0"},C={main:"#000000",mainContrast:"#ffffff",light:"#000000",dark:"#888888",contrast:"#6ec6ff",errorContrast:"#ffffff"},y="#4caf50",S=Object(m.a)({palette:{primary:{main:x.main,contrastText:C.mainContrast,light:x.light},secondary:{main:p.main,contrastText:C.main,light:p.light},background:{default:v.main,paper:v.light},error:{main:g},text:{primary:C.main,secondary:C.dark}},typography:{fontSize:12}}),w=n(173),N=n(176),k=function(){return Object(d.jsx)(w.a,{position:"static",children:Object(d.jsx)(N.a,{children:Object(d.jsx)(f.b,{to:"/",style:{color:"#ffffff",textDecoration:"none",fontWeight:"bold"},children:"!toohaK"})})})},I=n(177),R="projects",E=function(){var e=Object(a.useContext)(b),t=e.projects,n=e.setProjects;Object(a.useEffect)((function(){if(null==t||0===t.length){var e=localStorage.getItem(R);n(null!=e&&""!==e?JSON.parse(e):[])}}));return{projects:t,setProjects:function(e){localStorage.setItem(R,JSON.stringify(e)),n(e)}}},P=n(3),T=n(8),F=n(221),z=n(189),A=n(213),D=n(227),H=n(192),W=n(193),L=n(38),_=n(185),q=n(196),M=n(222),U=n(197),B=n(110),G=n(198),V=n(107),J=n(184),K=n(183),Y=n(139),$=n(194),Q=n(195);!function(e){e.SelectAnswer="SA",e.TrueOrFalse="TF",e.FillGaps="FG",e.Match="MT",e.Sort="SO",e.Classify="CL",e.FillTable="FT",e.TheOddOne="OO",e.Crossword="CW"}(c||(c={})),function(e){e.None="NONE",e.Url="URL",e.Base64="BASE64"}(i||(i={}));var X,Z=function(e){var t=[];null!=(null===e||void 0===e?void 0:e.id)&&null!=(null===e||void 0===e?void 0:e.type)||t.push("Datos internos incorrectos");var n=function(e,t){var n=[];switch((null==(null===t||void 0===t?void 0:t.timeLimit)||(null===t||void 0===t?void 0:t.timeLimit)<=0)&&n.push("El tiempo l\xedmite debe ser mayor de 0"),(null==(null===t||void 0===t?void 0:t.questionFontSize)||(null===t||void 0===t?void 0:t.questionFontSize)<=0)&&n.push("El tama\xf1o de fuente del titulo debe ser mayor de 0"),e){case c.SelectAnswer:var i=t;(null==(null===i||void 0===i?void 0:i.pictureCount)||(null===i||void 0===i?void 0:i.pictureCount)<=0)&&n.push("El n\xfamero de im\xe1genes debe ser mayor de 0"),null==(null===i||void 0===i?void 0:i.pictureLabel)&&n.push("Error en indicador de etiquetado de im\xe1genes"),null==(null===i||void 0===i?void 0:i.multiselect)&&n.push("Error en indicador de seleccion m\xfaltiple");break;case c.TrueOrFalse:case c.FillGaps:case c.Match:case c.Sort:case c.Classify:case c.FillTable:case c.Crossword:}return{valid:0===n.length,errorMessage:n}}(null===e||void 0===e?void 0:e.type,null===e||void 0===e?void 0:e.config);switch(n.valid||(t=[].concat(Object(T.a)(t),Object(T.a)(n.errorMessage))),null!=(null===e||void 0===e?void 0:e.question)&&""!==(null===e||void 0===e?void 0:e.question)||t.push("Se debe rellenar el enunciado / pregunta"),e.type){case c.SelectAnswer:var a=e;a.config.pictureCount>1&&a.pictures.some((function(e){return e.type===i.None}))&&t.push("Hay im\xe1genes vac\xedas"),a.answers.reduce((function(e,t){return e&&null!=t.text&&""!==t.text}),!0)||t.push("Hay alguna respuesta vac\xeda"),a.answers.some((function(e){return e.valid}))||t.push("Debe marcarse al menos una respuesta como v\xe1lida");break;case c.TrueOrFalse:break;case c.FillGaps:var r=e;r.sentences.reduce((function(e,t){return e&&null!=t&&""!==t.text}),!0)||t.push("Hay elementos sin texto"),0===r.sentences.length&&t.push("Debe haber al menos una frase"),r.sentences.reduce((function(e,t){return e&&null!=t&&t.hiddenExpressions.length>0}),!0)||t.push("Hay frases sin palabras ocultas");break;case c.Match:e.pairs.reduce((function(e,t){return e&&null!=t.source&&""!==t.source&&null!=t.destination&&""!==t.destination}),!0)||t.push("Hay elementos sin texto");break;case c.Sort:e.items.reduce((function(e,t){return e&&null!=t&&""!==t}),!0)||t.push("Hay elementos sin texto");break;case c.Classify:e.groups.reduce((function(e,t){return e&&null!=t.name&&""!==t.name}),!0)||t.push("Todos los grupos deben tener un t\xedtulo");break;case c.FillTable:var o=e;o.items.reduce((function(e,t,n){return e&&t.reduce((function(e,t,c){return e&&(o.config.firstRowFixed&&0===n&&o.config.firstColumnFixed&&0===c||""!==t.text)}),!0)}),!0)||t.push("Todas las celdas deben estar rellenas");break;case c.Crossword:}return{valid:0===t.length,errorMessage:t}},ee=function(e){return null!=e&&null!=e.id&&null!=e.name&&null!=e.challenges&&e.challenges.reduce((function(e,t){return e&&Z(t).valid}),!0)},te=n(224),ne=n(226),ce=n(218),ie=n(217);!function(e){e.Es="ES",e.En="EN"}(X||(X={}));var ae,re=function(e){var t=e.test,n=e.onAccept,c=e.onCancel,i=Object(a.useState)(function(e){return null!=e?{name:e.name,description:e.description||"",language:e.language||X.Es}:{name:"",description:"",language:X.Es}}(t)),r=Object(j.a)(i,2),o=r[0],s=r[1],l=Object(a.useRef)({}),u=Object(a.useRef)({});return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:4,children:[Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(te.a,{inputRef:l,id:"newTestNameInput",label:"Nombre",fullWidth:!0,value:o.name,onInput:function(){s(Object(P.a)(Object(P.a)({},o),{},{name:l.current.value}))}})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(te.a,{inputRef:u,id:"newTestNameInput",label:"Descripci\xf3n",fullWidth:!0,value:o.description,onInput:function(){s(Object(P.a)(Object(P.a)({},o),{},{description:u.current.value}))}})}),Object(d.jsxs)(I.a,{item:!0,xs:12,children:[Object(d.jsx)(ne.a,{shrink:!0,id:"label-language",children:"Idioma"}),Object(d.jsxs)(ce.a,{labelId:"label-language",id:"newTestLanguageInput",label:"Idioma",fullWidth:!0,value:o.language.toString(),onChange:function(e){var t=e.target.value===X.Es.toString()?X.Es:X.En;s(Object(P.a)(Object(P.a)({},o),{},{language:t}))},children:[Object(d.jsx)(J.a,{value:X.Es.toString(),children:"Espa\xf1ol"}),Object(d.jsx)(J.a,{value:X.En.toString(),children:"Ingl\xe9s"})]})]}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsxs)(I.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){var e=t?Object(P.a)(Object(P.a)({},t),{},{name:o.name,description:o.description,language:o.language}):{id:Object(ie.a)(),name:o.name,description:o.description,language:o.language,challenges:[]};n(e)},children:"Aceptar"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{color:"primary",onClick:function(){c()},children:"Cancelar"})})]})})]})},oe=n(186),se=n(187),le=function(e){var t=e.open,n=e.text,c=e.acceptButtonText,i=e.cancelButtonText,a=e.width,r=e.onConfirm,o=e.onRefuse;return Object(d.jsxs)(F.a,{open:t,fullWidth:!0,maxWidth:a||"sm",children:[Object(d.jsx)(oe.a,{children:Object(d.jsx)(I.a,{container:!0,justify:"center",children:Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"button",children:n})})})}),Object(d.jsxs)(se.a,{children:[Object(d.jsx)(_.a,{autoFocus:!0,onClick:r,color:"primary",variant:"contained",children:c||"Aceptar"}),Object(d.jsx)(_.a,{onClick:o,color:"primary",children:i||"Cancelar"})]})]})},ue=n(20),je=n(190),de=n(191),be=Object(l.a)((function(){return{dialogContainer:{padding:"20px"}}})),he=function(e){var t=e.open,n=e.onAccept,c=e.onCancel,i=Object(a.useState)({ignoreTimeLimit:!1,autoNext:!0}),r=Object(j.a)(i,2),o=r[0],s=r[1],l=Object(a.useRef)({}),u=Object(a.useRef)({}),b=be(),h=function(e,t){s(Object(P.a)(Object(P.a)({},o),{},Object(ue.a)({},e,t)))};return Object(d.jsxs)(F.a,{open:t,fullWidth:!0,maxWidth:"sm",children:[Object(d.jsx)(z.a,{children:"Opciones del cuestionario"}),Object(d.jsx)(A.a,{className:b.dialogContainer,children:Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:l,name:"checkMultiselect",checked:o.ignoreTimeLimit,color:"secondary",onChange:function(){h("ignoreTimeLimit",l.current.checked)}}),label:"Desactivar tiempo l\xedmite de las preguntas"})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:u,name:"checkMultiselect",checked:o.autoNext,color:"secondary",onChange:function(){h("autoNext",u.current.checked)}}),label:"Avanzar autom\xe1ticamente a la siguiente pregunta"})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsxs)(I.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){n(o)},children:"Aceptar"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{color:"primary",onClick:function(){c()},children:"Cancelar"})})]})})]})})]})},fe=Object(l.a)((function(e){return{uploadInput:{display:"none"}}})),Oe=function(e){var t=e.label,n=e.onDataLoaded,c=e.onError,i=Object(a.useRef)({}),r=fe(),o=Object(ie.a)();return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)("input",{ref:i,accept:"text",className:r.uploadInput,id:o,multiple:!0,type:"file",onInput:function(e){try{var t,a=e;if(null!=(null===a||void 0===a||null===(t=a.target)||void 0===t?void 0:t.files)){var r=a.target.files[0],o=new FileReader;o.readAsText(r),o.onloadend=function(e){try{var t=JSON.parse(o.result);n(t)}catch(i){c&&c()}}}}catch(s){c&&c()}i.current.value=""}}),Object(d.jsx)(_.a,{style:{color:x.dark},children:Object(d.jsx)("label",{htmlFor:o,children:t})})]})},me=Object(l.a)((function(e){return{inline:{display:"inline"},listItemSecondaryAction:{visibility:"hidden"},listItem:{"&:hover $listItemSecondaryAction":{visibility:"inherit"}},bottomContainer:{marginTop:"10px"},play:{color:y},dialogContainer:{padding:"20px"},messageControl:{backgroundColor:g,color:C.errorContrast}}})),xe=function(e){var t=e.project,n=e.onCreateTest,c=e.onDeleteTest,i=Object(O.f)(),o=r.a.useState(),s=Object(j.a)(o,2),l=s[0],u=s[1],b=r.a.useState(null),h=Object(j.a)(b,2),m=h[0],x=h[1],p=Object(a.useState)(!1),g=Object(j.a)(p,2),v=g[0],C=g[1],y=Object(a.useState)(!1),S=Object(j.a)(y,2),w=S[0],N=S[1],k=Object(a.useState)(),R=Object(j.a)(k,2),E=R[0],P=R[1],T=Object(a.useState)(!1),M=Object(j.a)(T,2),U=M[0],G=M[1],X=Object(a.useState)(""),Z=Object(j.a)(X,2),te=Z[0],ne=Z[1],ce=me();return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsxs)(V.a,{id:"addNewMenu",anchorEl:m,keepMounted:!0,open:Boolean(m),onClose:function(){x(null)},children:[Object(d.jsx)(J.a,{onClick:function(){x(null),C(!0)},children:Object(d.jsx)(L.a,{variant:"subtitle2",children:"Editar datos generales"})}),Object(d.jsx)(J.a,{component:f.b,to:"/designer/".concat(t.id,"/").concat(null===l||void 0===l?void 0:l.id),children:Object(d.jsx)(L.a,{variant:"subtitle2",children:"Editar preguntas"})})]}),Object(d.jsxs)(F.a,{open:v,fullWidth:!0,maxWidth:"sm",children:[Object(d.jsx)(z.a,{children:"Cuestionario"}),Object(d.jsx)(A.a,{className:ce.dialogContainer,children:Object(d.jsx)(re,{test:l,onAccept:function(e){n(t.id,e,!0),u(void 0),C(!1)},onCancel:function(){u(void 0),C(!1)}})})]}),Object(d.jsx)(le,{open:w,text:"\xbfSeguro que deseas eliminar el proyecto?",width:"xs",onConfirm:function(){null!=l&&c(t.id,l),u(void 0),N(!1)},onRefuse:function(){u(void 0),N(!1)}}),Object(d.jsx)(D.a,{open:U,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){G(!1)},children:Object(d.jsx)(H.a,{message:Object(d.jsxs)(I.a,{container:!0,spacing:4,children:[Object(d.jsx)(I.a,{item:!0,xs:1,children:Object(d.jsx)(W.a,{children:"error"})}),Object(d.jsx)(I.a,{item:!0,xs:10,children:Object(d.jsx)(L.a,{children:te})})]}),className:ce.messageControl})}),Object(d.jsx)(I.a,{container:!0,children:Object(d.jsxs)(I.a,{item:!0,xs:12,children:[0===t.tests.length&&Object(d.jsx)(L.a,{children:"No hay cuestionarios"}),t.tests.length>0&&Object(d.jsx)(K.a,{children:t.tests.map((function(e){return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsxs)(Y.a,{button:!0,alignItems:"flex-start",classes:{container:ce.listItem},children:[Object(d.jsxs)(I.a,{container:!0,children:[Object(d.jsx)(I.a,{item:!0,xs:6,children:Object(d.jsx)($.a,{primary:e.name,secondary:Object(d.jsx)(L.a,{component:"span",variant:"body2",className:ce.inline,color:"textPrimary",children:e.description})})}),Object(d.jsx)(I.a,{item:!0,xs:2,children:Object(d.jsx)($.a,{secondary:"".concat(e.challenges.length," pregunta").concat(1!==e.challenges.length?"s":"")})})]}),Object(d.jsx)(Q.a,{className:ce.listItemSecondaryAction,children:Object(d.jsxs)(I.a,{container:!0,children:[Object(d.jsx)(I.a,{item:!0,children:ee(e)?Object(d.jsx)(B.a,{title:"Jugar!",onClick:function(){var n,c;n=t.id,c=e.id,P({projectId:n,testId:c,openOptions:!0})},children:Object(d.jsx)(W.a,{className:ce.play,children:"play_circle_filled"})}):Object(d.jsx)(B.a,{title:"Errores en el cuestionario",children:Object(d.jsx)(W.a,{color:"error",children:"error"})})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(B.a,{title:"Editar cuestionario",onClick:function(t){t.stopPropagation(),function(e,t){u(t),x(e.currentTarget)}(t,e)},children:Object(d.jsx)(W.a,{color:"primary",children:"edit"})})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(B.a,{title:"Descargar cuestionario",onClick:function(t){t.stopPropagation(),function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),t.setAttribute("download",e.name.replace(/ /g,"_")),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(e)},children:Object(d.jsx)(W.a,{children:"download"})})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(B.a,{title:"Eliminar cuestionario",onClick:function(t){t.stopPropagation(),u(e),N(!0)},children:Object(d.jsx)(W.a,{children:"delete"})})})]})})]},e.id),Object(d.jsx)(q.a,{variant:"inset",component:"li"})]},"fragment_".concat(e.id))}))}),Object(d.jsx)(I.a,{item:!0,xs:12,className:ce.bottomContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){C(!0)},children:"Nuevo cuestionario"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(Oe,{label:"Importar cuestionario",onDataLoaded:function(e){var c=e;ee(c)||(ne("El proyecto es inv\xe1lido"),G(!0)),null!=t.tests.find((function(e){return e.id===c.id}))?(ne("El proyecto ya existe"),G(!0)):n(t.id,c,!1)},onError:function(){ne("Se produjo un error en la importaci\xf3n"),G(!0)}})})]})})]})}),E&&Object(d.jsx)(he,{open:E.openOptions,onAccept:function(e){i.push("/play/".concat(null===E||void 0===E?void 0:E.projectId,"/").concat(null===E||void 0===E?void 0:E.testId,"?ignoreTimeLimit=").concat(e.ignoreTimeLimit,"&autoNext=").concat(e.autoNext),E),P({openOptions:!1})},onCancel:function(){P({openOptions:!1})}})]})},pe=function(e){var t=e.project,n=e.onAccept,c=e.onCancel,i=Object(a.useState)(function(e){return null!=e?{name:e.name,description:e.description||""}:{name:"",description:""}}(t)),r=Object(j.a)(i,2),o=r[0],s=r[1],l=Object(a.useRef)({}),u=Object(a.useRef)({});return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(te.a,{inputRef:l,label:"Nombre",fullWidth:!0,value:o.name,onInput:function(){s(Object(P.a)(Object(P.a)({},o),{},{name:l.current.value}))}})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(te.a,{inputRef:u,label:"Descripci\xf3n",fullWidth:!0,value:o.description,onInput:function(){s(Object(P.a)(Object(P.a)({},o),{},{description:u.current.value}))}})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsxs)(I.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){var e=t?Object(P.a)(Object(P.a)({},t),{},{name:l.current.value,description:u.current.value}):{id:Object(ie.a)(),name:l.current.value,description:u.current.value,tests:[]};n(e)},children:"Aceptar"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{color:"primary",onClick:function(){c()},children:"Cancelar"})})]})})]})},ge=Object(l.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:p.main},gridContainer:{padding:"0px 10px"},gridItems:{flexGrow:1},messageControl:{backgroundColor:g,color:C.errorContrast},dialogContainer:{padding:"20px"}}})),ve=function(e){var t=e.projects,n=e.setProjects,c=Object(O.f)(),i=r.a.useState(!1),o=Object(j.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(!1),b=Object(j.a)(u,2),h=b[0],f=b[1],m=Object(a.useState)(!1),p=Object(j.a)(m,2),g=p[0],v=p[1],C=Object(a.useState)(),y=Object(j.a)(C,2),S=y[0],w=y[1],N=Object(a.useState)(!1),k=Object(j.a)(N,2),R=k[0],E=k[1],V=Object(a.useState)(""),J=Object(j.a)(V,2),K=J[0],Y=J[1],$=ge(),Q=function(e,i,a){var r=t.find((function(t){return t.id===e})),o=null!=r&&r.tests.some((function(e){return e.id===i.id})),s=t.map((function(t){if(t.id!==e)return Object(P.a)({},t);if(o){var n=t.tests.map((function(e){return e.id===i.id?Object(P.a)({},i):Object(P.a)({},e)}));return Object(P.a)(Object(P.a)({},t),{},{tests:Object(T.a)(n)})}return Object(P.a)(Object(P.a)({},t),{},{tests:[].concat(Object(T.a)(t.tests),[i])})}));n(s),!o&&a&&c.push("/designer/".concat(e,"/").concat(i.id))},X=function(e,c){var i=t.map((function(t){if(t.id!==e)return Object(P.a)({},t);var n=t.tests.filter((function(e){return e.id!==c.id}));return Object(P.a)(Object(P.a)({},t),{},{tests:Object(T.a)(n)})}));n(i)};return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsxs)(F.a,{open:h,fullWidth:!0,maxWidth:"sm",children:[Object(d.jsx)(z.a,{children:"Proyecto"}),Object(d.jsx)(A.a,{className:$.dialogContainer,children:Object(d.jsx)(pe,{project:S,onAccept:function(e){n(null!=S?t.map((function(t){return t.id===e.id?e:t})):[].concat(Object(T.a)(t),[Object(P.a)({},e)])),w(void 0),f(!1)},onCancel:function(){w(void 0),f(!1)}})})]}),Object(d.jsx)(le,{open:g,text:"\xbfSeguro que deseas eliminar el proyecto?",width:"xs",onConfirm:function(){null!=S&&n(t.filter((function(e){return e.id!==S.id}))),v(!1)},onRefuse:function(){v(!1)}}),Object(d.jsx)(D.a,{open:R,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){E(!1)},children:Object(d.jsx)(H.a,{message:Object(d.jsxs)(I.a,{container:!0,spacing:4,children:[Object(d.jsx)(I.a,{item:!0,xs:1,children:Object(d.jsx)(W.a,{children:"error"})}),Object(d.jsx)(I.a,{item:!0,xs:10,children:Object(d.jsx)(L.a,{children:K})})]}),className:$.messageControl})}),Object(d.jsxs)(I.a,{container:!0,children:[Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsxs)(I.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2,className:$.gridContainer,children:[Object(d.jsx)(I.a,{item:!0,className:$.gridItems,children:Object(d.jsx)(L.a,{variant:"h6",children:"Proyectos"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{style:{color:x.dark},onClick:function(){f(!0)},children:"Nuevo proyecto"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(Oe,{label:"Importar proyecto",onDataLoaded:function(e){var c=e;(function(e){return null!=e&&null!=e.id&&null!=e.name&&null!=e.tests&&e.tests.reduce((function(e,t){return e&&ee(t)}),!0)})(c)||(Y("El proyecto es inv\xe1lido"),E(!0)),null!=t.find((function(e){return e.id===c.id}))?(Y("El proyecto ya existe"),E(!0)):n([].concat(Object(T.a)(t),[Object(P.a)({},c)]))},onError:function(){Y("Se produjo un error en la importaci\xf3n"),E(!0)}})})]})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(q.a,{})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:t.map((function(e){return Object(d.jsxs)(M.a,{expanded:s===e.id,onChange:function(t,n){!function(e,t){l(!!t&&e.id)}(e,n)},children:[Object(d.jsx)(U.a,{title:e.description,children:Object(d.jsxs)(I.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(d.jsx)(I.a,{item:!0,xs:3,children:Object(d.jsx)(L.a,{className:$.heading,children:e.name})}),Object(d.jsx)(I.a,{item:!0,xs:7,children:Object(d.jsx)(L.a,{className:$.secondaryHeading,children:"".concat(e.tests.length," cuestionario").concat(1!==e.tests.length?"s":"")})}),Object(d.jsxs)(I.a,{item:!0,children:[Object(d.jsx)(B.a,{title:"Descargar proyecto",color:"primary",onClick:function(t){t.stopPropagation(),function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),t.setAttribute("download",e.name.replace(/ /g,"_")),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(e)},children:Object(d.jsx)(W.a,{children:"download"})}),Object(d.jsx)(B.a,{title:"Editar proyecto",color:"primary",onClick:function(t){t.stopPropagation(),w(e),f(!0)},children:Object(d.jsx)(W.a,{children:"edit"})}),Object(d.jsx)(B.a,{title:"Eliminar proyecto",onClick:function(t){t.stopPropagation(),w(e),v(!0)},children:Object(d.jsx)(W.a,{children:"delete"})})]})]})}),Object(d.jsx)(G.a,{children:Object(d.jsx)(xe,{project:e,onCreateTest:Q,onDeleteTest:X})})]},e.id)}))})]})]})},Ce=function(){var e=E(),t=e.projects,n=e.setProjects;return Object(d.jsx)(I.a,{container:!0,justify:"center",children:Object(d.jsx)(I.a,{item:!0,xs:7,children:Object(d.jsx)(ve,{projects:t,setProjects:n})})})},ye=n(210),Se=n(200),we=n(201),Ne=n(202),ke=n(223),Ie=n(203),Re=n(204),Ee=n(228);!function(e){e.Writing="W",e.Dragging="D"}(ae||(ae={}));var Pe,Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.Es;switch(e){case c.SelectAnswer:return t===X.Es?"Selecciona la respuesta correcta":"Choose the correct answer";case c.TrueOrFalse:return t===X.Es?"Verdadero o falso":"True or false";case c.Match:return t===X.Es?"Une las opciones":"Match the options";case c.FillGaps:return t===X.Es?"Rellena los huecos":"Fill in the gaps";case c.Sort:return t===X.Es?"Ordena los elementos":"Order the elements";case c.Classify:return t===X.Es?"Clasifica los elementos":"Classify the elements";case c.FillTable:return t===X.Es?"Completa la tabla":"Complete the table";case c.TheOddOne:return t===X.Es?"Busca el que sobra":"Find the odd one";case c.Crossword:return t===X.Es?"Crucigrama":"Crossword";default:return t===X.Es?"Sin definir":"Undefined"}},Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(d.jsx)(W.a,{fontSize:t,style:n,children:e===c.SelectAnswer?"widgets":e===c.TrueOrFalse?"check":e===c.FillGaps?"space_bar":e===c.Match?"shuffle":e===c.Sort?"swap_vert":e===c.Classify?"category":e===c.FillTable?"grid_on":e===c.TheOddOne?"touch_app":e===c.Crossword?"font_download":""})},ze=function(e){var t={timeLimit:30,questionFontSize:28};switch(e){case c.SelectAnswer:return Object(P.a)(Object(P.a)({},t),{},{answerFontSize:22,pictureCount:1,pictureLabel:!1,multiselect:!1});case c.TrueOrFalse:return Object(P.a)(Object(P.a)({},t),{},{pictureCount:1,pictureLabel:!1});case c.Match:return Object(P.a)(Object(P.a)({},t),{},{answerFontSize:22,pairsCount:4});case c.FillGaps:return Object(P.a)(Object(P.a)({},t),{},{textFontSize:18,fillMethod:ae.Writing});case c.Sort:return Object(P.a)(Object(P.a)({},t),{},{itemsFontSize:18,itemCount:5});case c.Classify:return Object(P.a)(Object(P.a)({},t),{},{itemsFontSize:18,groupCount:3});case c.FillTable:return Object(P.a)(Object(P.a)({},t),{},{itemsFontSize:18,rowCount:3,columnCount:3,firstRowFixed:!1,firstColumnFixed:!1});default:return t}},Ae=n(214),De=n(215),He=n(101),We=Object(l.a)({fullWidth:{width:"100%"},fullHeight:{height:"100%"},headerContainer:{overflow:"hidden"},contentContainer:{overflow:"hidden"},actionContainer:{marginTop:"8px"},descriptionContainer:{width:"100%"},description:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tooltipRow:{fontSize:"12px"},statusContainer:{display:"flex",justifyContent:"space-between"}}),Le=function(e){var t=e.challenge,n=e.index,c=e.selected,i=e.compact,r=e.onChallengeMove,o=e.onClick,s=e.onDelete,l=Object(a.useRef)(null),u=Object(a.useState)({valid:!0,errorMessage:[]}),b=Object(j.a)(u,2),h=b[0],f=b[1],O=We(),m=Object(Ae.a)({accept:"challengeThumbnail",hover:function(e,t){if(l.current){var c=e.index,i=n;if(c!==i){var a=l.current.getBoundingClientRect(),o=(a.bottom-a.top)/2,s=t.getClientOffset().y-a.top;c<i&&s<o||c>i&&s>o||(r(c,i),e.index=i)}}}}),p=Object(j.a)(m,2)[1],g=Object(De.a)({type:"challengeThumbnail",item:{type:"challengeThumbnail",challenge:t,index:n},collect:function(e){return{isDragging:e.isDragging()}}}),v=Object(j.a)(g,3),C=v[0].isDragging,y=v[1],S=v[2];Object(a.useEffect)((function(){S(Object(He.a)(),{captureDraggingState:!0})}),[]);var w=C?{opacity:5,backgroundColor:x.light}:{opacity:1};y(p(l));return Object(a.useEffect)((function(){f(Z(t))}),[t]),Object(d.jsx)(I.a,{item:!0,className:O.fullWidth,children:Object(d.jsxs)(Se.a,{ref:l,style:Object(P.a)({},w),variant:c?"elevation":"outlined",elevation:10,className:O.fullWidth,children:[Object(d.jsxs)(we.a,{className:O.fullWidth,onMouseDown:function(){o&&o(t)},children:[Object(d.jsx)(Ne.a,{classes:{root:O.headerContainer,content:O.contentContainer},avatar:i?Fe(t.type,"small"):void 0,subheader:Object(d.jsx)(L.a,{variant:"subtitle2",color:c?"secondary":"textPrimary",className:O.description,children:i?t.question:"#".concat(n+1," ").concat(Te(t.type))}),action:i?Object(d.jsx)(I.a,{container:!0,alignItems:"center",className:O.actionContainer,children:h.valid?Object(d.jsx)(W.a,{color:"primary",fontSize:"small",children:"check"}):Object(d.jsx)(ke.a,{arrow:!0,title:Object(d.jsx)(d.Fragment,{children:h.errorMessage.map((function(e,t){return Object(d.jsx)("li",{className:O.tooltipRow,children:e},"li_".concat(t))}))}),children:Object(d.jsx)(W.a,{color:"secondary",fontSize:"small",children:"priority_high"})})}):void 0}),!i&&Object(d.jsx)(Ie.a,{children:Object(d.jsx)(L.a,{noWrap:!0,children:t.question})})]}),!i&&Object(d.jsxs)(Re.a,{className:O.statusContainer,children:[h.valid?Object(d.jsx)(Ee.a,{label:"completo",color:"primary",size:"small",icon:Object(d.jsx)(W.a,{fontSize:"small",children:"check"})}):Object(d.jsx)(ke.a,{arrow:!0,title:Object(d.jsx)(d.Fragment,{children:h.errorMessage.map((function(e,t){return Object(d.jsx)("li",{className:O.tooltipRow,children:e},"li_".concat(t))}))}),children:Object(d.jsx)(Ee.a,{label:"error",color:"secondary",size:"small",style:{color:"#ffffff"},icon:Object(d.jsx)(W.a,{fontSize:"small",children:"priority_high"})})}),Object(d.jsx)(B.a,{onClick:function(){s&&s(t)},children:Object(d.jsx)(W.a,{children:"delete"})})]})]})})},_e=Object(l.a)({root:{width:"100%",overflowY:"auto"},fullWidth:{width:"100%"}}),qe=function(e){var t=e.challenges,n=e.compactList,c=e.selected,i=e.onChallengeReorder,r=e.onSelect,o=e.onDelete,s=Object(a.useState)(t),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useState)(c||void 0),f=Object(j.a)(h,2),O=f[0],m=f[1],x=_e();Object(a.useEffect)((function(){console.log(t),b(t)}),[t]),Object(a.useEffect)((function(){m(c)}),[c]);var p=function(e){m(e),r&&r(e)},g=function(e){o&&o(e)},v=function(e,n){if(i){var c=t.filter((function(t,n){return n!==e})),a=[].concat(Object(T.a)(c.slice(0,n)),[t[e]],Object(T.a)(c.slice(n)));b(a),i(a)}};return Object(d.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",spacing:2,className:x.root,children:u.map((function(e,t){return Object(d.jsx)(Le,{challenge:e,index:t,selected:(null===O||void 0===O?void 0:O.id)===e.id,compact:n,onChallengeMove:v,onClick:p,onDelete:g},e.id)}))})},Me=n(206),Ue=n(19);!function(e){e[e.Design=0]="Design",e[e.Play=1]="Play"}(Pe||(Pe={}));var Be,Ge=Object(l.a)({root:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},inputContainer:{width:"90%",height:"80%",display:"flex",justifyContent:"center",alignItems:"center"},input:{width:"90%"}}),Ve=function(e){var t=e.mode,n=e.question,c=e.fontSize,i=e.onChange,r=Object(a.useState)(n),o=Object(j.a)(r,2),s=o[0],l=o[1],u=Object(a.useRef)({}),b=Ge();Object(a.useEffect)((function(){l(n)}),[n]);return Object(d.jsx)("div",{className:b.root,children:Object(d.jsx)(Se.a,{className:b.inputContainer,children:Object(d.jsx)(te.a,{inputRef:u,variant:"standard",className:b.input,inputProps:{style:{textAlign:"center",fontSize:"".concat(null!=c?c:28,"px"),lineHeight:"32px"}},InputProps:{readOnly:t===Pe.Play,disableUnderline:t===Pe.Play},placeholder:"Escribe aqu\xed el enunciado o pregunta",multiline:!0,rowsMax:2,value:s,onInput:function(){l(u.current.value),i&&i(u.current.value)}})})})},Je=n(205),Ke=n(220),Ye=n(216),$e=Object(l.a)((function(){return{option:{width:"100%",height:"100%"},optionActionArea:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},optionInput:{width:"90%",color:"#ffffff"},optionInnerInput:{cursor:"pointer"},optionIcon:{color:"#ffffff"},selector:{color:"#ffffff","&$checked":{color:"#ffffff"}},checked:{}}})),Qe=function(e){var t=e.mode,n=e.text,c=e.icon,i=e.valid,r=e.selected,o=e.color,s=e.fontSize,l=e.multiselect,u=e.showResults,b=e.onClick,h=e.onTextChange,f=e.onValidChange,O=Object(a.useState)({text:n||"",valid:i||!1}),m=Object(j.a)(O,2),p=m[0],g=m[1],v=Object(a.useRef)({}),C=Object(a.useRef)({}),y=Object(a.useRef)({}),S=$e();Object(a.useEffect)((function(){g({text:n||"",valid:i||!1})}),[n,i]);return Object(d.jsx)(Se.a,{className:S.option,style:{backgroundColor:o||x.main,borderStyle:"solid",borderWidth:u&&i||r?"3px":"0px",borderColor:u?i?"#00ff00":"#ff0000":"#323232"},children:t===Pe.Design?Object(d.jsx)("div",{className:S.optionActionArea,children:Object(d.jsx)(te.a,{inputRef:v,value:p.text,placeholder:"Escribe aqu\xed una respuesta",className:S.optionInput,InputProps:{style:{color:"#ffffff",fontSize:"".concat(s||22,"px")},startAdornment:Object(d.jsx)(Je.a,{position:"start",children:Object(d.jsx)(W.a,{className:S.optionIcon,children:c})}),endAdornment:l?Object(d.jsx)(Ke.a,{inputRef:y,checked:p.valid,classes:{root:S.selector,checked:S.checked},onChange:function(){var e=Object(P.a)(Object(P.a)({},p),{},{selected:y.current.checked});g(e),f&&f(y.current.checked)}}):Object(d.jsx)(Ye.a,{inputRef:C,checked:p.valid,classes:{root:S.selector,checked:S.checked},onChange:function(){var e=Object(P.a)(Object(P.a)({},p),{},{selected:C.current.checked});g(e),f&&f(C.current.checked)}})},onInput:function(){var e=Object(P.a)(Object(P.a)({},p),{},{text:v.current.value});g(e),h&&h(v.current.value)},onClick:function(e){e.preventDefault()}})}):Object(d.jsx)(we.a,{className:S.optionActionArea,onClick:function(){b&&b()},children:Object(d.jsxs)(I.a,{container:!0,className:S.optionInput,spacing:2,alignItems:"center",children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(W.a,{className:S.optionIcon,children:c})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)("label",{style:{color:"#ffffff",fontSize:"".concat(s||22,"px"),justifySelf:"left"},children:p.text})})]})})})},Xe=Object(l.a)((function(){return{dialogContainer:{padding:"20px"}}})),Ze=function(e){var t=e.open,n=e.picture,c=e.onAccept,r=e.onCancel,o=Object(a.useState)(n),s=Object(j.a)(o,2),l=s[0],u=s[1],b=Object(a.useRef)({}),h=Xe();Object(a.useEffect)((function(){null!=n&&u(n)}),[n]);return Object(d.jsxs)(F.a,{open:t,fullWidth:!0,maxWidth:"sm",children:[Object(d.jsx)(z.a,{children:"Imagen"}),Object(d.jsx)(A.a,{className:h.dialogContainer,children:Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(te.a,{inputRef:b,label:"URL de la imagen",fullWidth:!0,value:l.data,onInput:function(){u(Object(P.a)(Object(P.a)({},l),{},{data:b.current.value}))}})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsxs)(I.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){var e={type:i.Url,data:b.current.value};c(e)},children:"Aceptar"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{color:"primary",onClick:function(){r()},children:"Cancelar"})})]})})]})})]})},et=Object(l.a)((function(e){return{root:{height:"99%",justifyContent:"center",alignItems:"center"},fullHeight:{height:"100%"},pic:{maxWidth:"100%",maxHeight:"100%"}}})),tt=function(e){var t=e.mode,n=e.pictures,c=e.onPicturesChange,r=Object(a.useState)(),o=Object(j.a)(r,2),s=o[0],l=o[1],u=et(),b=Object(a.useState)({height:"100%",width:8}),h=Object(j.a)(b,2),f=h[0],O=h[1];Object(a.useEffect)((function(){switch(n.length){case 9:case 8:case 7:O({height:"33.3%",width:4});break;case 6:case 5:O({height:"50%",width:4});break;case 4:case 3:O({height:"50%",width:6});break;case 2:O({height:"100%",width:6});break;default:O({height:"100%",width:12})}}),[n]);return Object(d.jsxs)(a.Fragment,{children:[s&&Object(d.jsx)(Ze,{open:s.openDialog,picture:s.selectedPicture,onAccept:function(e){return t=e,a=s.selectedPictureIdx,c&&c(n.map((function(e,n){return n!==a?Object(P.a)({},e):Object(P.a)({},t)}))),void l({openDialog:!1,selectedPicture:{type:i.None,data:""},selectedPictureIdx:-1});var t,a},onCancel:function(){l({openDialog:!1,selectedPicture:{type:i.None,data:""},selectedPictureIdx:-1})}}),Object(d.jsx)(I.a,{container:!0,className:u.root,children:n.map((function(e,n){return Object(d.jsx)(I.a,{item:!0,xs:f.width,style:{height:f.height,border:t===Pe.Design?"solid 1px":"0px"},children:Object(d.jsxs)(I.a,{container:!0,justify:"center",alignItems:"center",className:u.fullHeight,children:[e.type!==i.None&&Object(d.jsx)("img",{className:u.pic,src:e.data,alt:""}),t===Pe.Design&&Object(d.jsx)(Me.a,{size:"medium",color:"primary",style:{position:"absolute",color:"#ffffff"},onClick:function(){!function(e,t){l({openDialog:!0,selectedPicture:e,selectedPictureIdx:t})}(e,n)},children:Object(d.jsx)(W.a,{children:"add_a_photo"})})]})},"pic".concat(n.toString()))}))})]})},nt=n(207),ct=function(e){var t=e.mode,n=e.time,c=e.stopTimer,i=e.onTimeUp,r=Object(a.useState)(n),o=Object(j.a)(r,2),s=o[0],l=o[1],u=Object(a.useState)(c||!1),b=Object(j.a)(u,2),h=b[0],f=b[1];return Object(a.useEffect)((function(){l(n)}),[n]),Object(a.useEffect)((function(){f(c||!1)}),[c]),Object(a.useEffect)((function(){var e;return t!==Pe.Play||h||(e=setTimeout((function(){0===s?i&&i():l(s-1)}),1e3)),function(){null!=e&&clearTimeout(e)}}),[s,i]),Object(d.jsx)(I.a,{container:!0,justify:"center",alignItems:"center",style:{height:"100%"},children:Object(d.jsx)(I.a,{item:!0,children:Object(d.jsxs)(A.a,{position:"relative",display:"inline-flex",children:[Object(d.jsx)(nt.a,{variant:"determinate",color:s>5?"primary":"secondary",size:"75px",value:Math.round(100*s/(1*n))}),Object(d.jsx)(A.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(d.jsx)(L.a,{variant:"h5",component:"div",color:"textSecondary",children:s})})]})})})},it=n.p+"static/media/correct.6415db46.wav",at=n.p+"static/media/incorrect.70fff5c7.wav",rt=Object(l.a)((function(e){return{root:{height:"100%",backgroundColor:"#f0f0f0"},titleContainer:{height:"20%"},pictureContainer:{height:"50%"},answerContainer:{height:"30%",paddingTop:"10px"},optionContainer:{height:"50%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"}}})),ot=function(e){var t=e.mode,n=e.challenge,c=e.options,i=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(a.useState)(!1),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useState)([]),f=Object(j.a)(h,2),O=f[0],m=f[1],x=Object(a.useState)(!1),p=Object(j.a)(x,2),g=p[0],v=p[1],C=Object(Ue.a)(it),y=Object(j.a)(C,1)[0],S=Object(Ue.a)(at),w=Object(j.a)(S,1)[0],N=rt(),k=function(e,t){var c=n.answers.map((function(c,i){return i!==e?n.config.multiselect?Object(P.a)({},c):Object(P.a)(Object(P.a)({},c),{},{valid:!1}):Object(P.a)({},t)}));i&&i(Object(P.a)(Object(P.a)({},n),{},{answers:c}))},R=function(e){if(t===Pe.Play)if(n.config.multiselect){var c=O.findIndex((function(t){return t===e}));m(-1===c?[].concat(Object(T.a)(O),[e]):O.filter((function(t){return t!==e})))}else n.answers[e].valid?E(!0):E(!1)},E=function(e){b(!0),v(!0),e?y():w(),setTimeout((function(){e?r&&r():o&&o()}),2e3)};return Object(d.jsxs)(Se.a,{variant:"outlined",className:N.root,children:[Object(d.jsx)("div",{className:N.titleContainer,children:Object(d.jsx)(Ve,{mode:t,question:n.question,fontSize:n.config.questionFontSize,onChange:function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{question:e}))}})}),Object(d.jsx)("div",{className:N.pictureContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"center",style:{height:"100%"},children:[Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},children:null!=c&&!c.ignoreTimeLimit&&Object(d.jsx)(ct,{mode:t,time:n.config.timeLimit,stopTimer:u,onTimeUp:function(){E(!1)}})}),Object(d.jsx)(I.a,{item:!0,xs:8,style:{height:"100%"},children:Object(d.jsx)(tt,{mode:t,pictures:n.pictures,onPicturesChange:function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{pictures:Object(T.a)(e)}))}})}),Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},className:N.centerAll,children:n.config.multiselect&&Object(d.jsxs)(Me.a,{variant:"extended",size:"large",color:"primary",disabled:t===Pe.Design||0===O.length,onClick:function(){!function(){if(0===O.map((function(e){return n.answers[e]})).filter((function(e){return!e.valid})).length&&0===n.answers.filter((function(e,t){return e.valid&&-1===O.indexOf(t)})).length)return void E(!0);E(!1)}()},children:[Object(d.jsx)(W.a,{children:"check"}),"\xa0",(null===c||void 0===c?void 0:c.language)===X.En?"Check":"Corregir"]})})]})}),Object(d.jsx)("div",{className:N.answerContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"space-evenly",spacing:2,style:{height:"100%"},children:[Object(d.jsx)(I.a,{item:!0,xs:5,className:N.optionContainer,children:Object(d.jsx)(Qe,{mode:t,text:n.answers[0].text,icon:"wb_sunny",valid:n.answers[0].valid,selected:t===Pe.Play&&O.indexOf(0)>=0,color:"#f44336",fontSize:n.config.answerFontSize,multiselect:n.config.multiselect,showResults:g,onTextChange:function(e){k(0,Object(P.a)(Object(P.a)({},n.answers[0]),{},{text:e}))},onValidChange:function(e){k(0,Object(P.a)(Object(P.a)({},n.answers[0]),{},{valid:e}))},onClick:function(){R(0)}})}),Object(d.jsx)(I.a,{item:!0,xs:5,className:N.optionContainer,children:Object(d.jsx)(Qe,{mode:t,text:n.answers[1].text,icon:"brightness_2",valid:n.answers[1].valid,selected:t===Pe.Play&&O.indexOf(1)>=0,color:"#03a9f4",fontSize:n.config.answerFontSize,multiselect:n.config.multiselect,showResults:g,onTextChange:function(e){k(1,Object(P.a)(Object(P.a)({},n.answers[1]),{},{text:e}))},onValidChange:function(e){k(1,Object(P.a)(Object(P.a)({},n.answers[1]),{},{valid:e}))},onClick:function(){R(1)}})}),Object(d.jsx)(I.a,{item:!0,xs:5,className:N.optionContainer,children:Object(d.jsx)(Qe,{mode:t,text:n.answers[2].text,icon:"flash_on",valid:n.answers[2].valid,selected:t===Pe.Play&&O.indexOf(2)>=0,color:"#ffc107",fontSize:n.config.answerFontSize,multiselect:n.config.multiselect,showResults:g,onTextChange:function(e){k(2,Object(P.a)(Object(P.a)({},n.answers[2]),{},{text:e}))},onValidChange:function(e){k(2,Object(P.a)(Object(P.a)({},n.answers[2]),{},{valid:e}))},onClick:function(){R(2)}})}),Object(d.jsx)(I.a,{item:!0,xs:5,className:N.optionContainer,children:Object(d.jsx)(Qe,{mode:t,text:n.answers[3].text,icon:"cloud",valid:n.answers[3].valid,selected:t===Pe.Play&&O.indexOf(3)>=0,color:"#4caf50",fontSize:n.config.answerFontSize,multiselect:n.config.multiselect,showResults:g,onTextChange:function(e){k(3,Object(P.a)(Object(P.a)({},n.answers[3]),{},{text:e}))},onValidChange:function(e){k(3,Object(P.a)(Object(P.a)({},n.answers[3]),{},{valid:e}))},onClick:function(){R(3)}})})]})})]})},st=Object(l.a)({fullWidth:{width:"100%"}}),lt=function(e){var t=e.config,n=e.onConfigChange,c=Object(a.useState)(t),i=Object(j.a)(c,2),r=i[0],o=i[1],s=Object(a.useRef)({}),l=Object(a.useRef)({}),u=Object(a.useRef)({}),b=Object(a.useRef)({}),h=Object(a.useRef)({}),f=Object(a.useRef)({}),O=st();Object(a.useEffect)((function(){o(t)}),[t]);var m=function(e,t){var c=Object(P.a)(Object(P.a)({},r),{},Object(ue.a)({},e,t));o(c),n&&n(c)};return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:s,type:"number",label:"L\xedmite de tiempo (segundos)",inputProps:{min:10},value:r.timeLimit,color:"secondary",className:O.fullWidth,onInput:function(){m("timeLimit",parseInt(s.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:l,type:"number",label:"Tama\xf1o de letra del t\xedtulo",inputProps:{min:1},value:r.questionFontSize,color:"secondary",className:O.fullWidth,onInput:function(){m("questionFontSize",parseInt(l.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:u,type:"number",label:"N\xfamero de im\xe1genes",inputProps:{min:1,max:9},value:r.pictureCount,color:"secondary",className:O.fullWidth,onInput:function(){m("pictureCount",parseInt(u.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:b,name:"checkPictureLabel",checked:r.pictureLabel,color:"secondary",onChange:function(){m("pictureLabel",b.current.checked)}}),label:"Numerar im\xe1genes"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:h,type:"number",label:"Tama\xf1o de letra de las respuestas",inputProps:{min:1},value:r.answerFontSize,color:"secondary",className:O.fullWidth,onInput:function(){m("answerFontSize",parseInt(h.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:f,name:"checkMultiselect",checked:r.multiselect,color:"secondary",onChange:function(){m("multiselect",f.current.checked)}}),label:"Respuesta m\xfaltiple"})})]})},ut=Object(l.a)({fullHeight:{height:"100%"}}),jt=function(e){var t=e.challenge,n=e.onChallengeChange,c=ut();return Object(d.jsxs)(I.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:10,className:c.fullHeight,children:Object(d.jsx)(ot,{mode:Pe.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(d.jsx)(I.a,{item:!0,xs:2,className:c.fullHeight,children:Object(d.jsx)(lt,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(T.a)(t.pictures);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return{type:i.None,data:""}}));n=[].concat(Object(T.a)(n),Object(T.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.pictureCount),a=function(e){var n=!1;return t.answers.map((function(t){return e?Object(P.a)({},t):t.valid&&!n?(n=!0,Object(P.a)({},t)):Object(P.a)(Object(P.a)({},t),{},{valid:!1})}))}(e.multiselect),r=Object(P.a)(Object(P.a)({},t),{},{pictures:Object(T.a)(c),answers:Object(T.a)(a),config:e});n(r)}})})]})},dt=Object(l.a)((function(e){return{root:{height:"100%",backgroundColor:"#f0f0f0"},titleContainer:{height:"20%"},pictureContainer:{height:"60%"},answerContainer:{height:"20%",paddingTop:"10px"},optionContainer:{height:"100%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"}}})),bt=function(e){var t=e.mode,n=e.challenge,c=e.options,i=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(a.useState)(!1),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useState)(!1),f=Object(j.a)(h,2),O=f[0],m=f[1],x=Object(Ue.a)(it),p=Object(j.a)(x,1)[0],g=Object(Ue.a)(at),v=Object(j.a)(g,1)[0],C=dt(),y=function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{answer:e}))},S=function(e){t===Pe.Play&&(n.answer===e?w(!0):w(!1))},w=function(e){b(!0),m(!0),e?p():v(),setTimeout((function(){e?r&&r():o&&o()}),2e3)};return Object(d.jsxs)(Se.a,{variant:"outlined",className:C.root,children:[Object(d.jsx)("div",{className:C.titleContainer,children:Object(d.jsx)(Ve,{mode:t,question:n.question,fontSize:n.config.questionFontSize,onChange:function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{question:e}))}})}),Object(d.jsx)("div",{className:C.pictureContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"center",style:{height:"100%"},children:[Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},children:null!=c&&!c.ignoreTimeLimit&&Object(d.jsx)(ct,{mode:t,time:n.config.timeLimit,stopTimer:u,onTimeUp:function(){w(!1)}})}),Object(d.jsx)(I.a,{item:!0,xs:8,style:{height:"100%"},children:Object(d.jsx)(tt,{mode:t,pictures:n.pictures,onPicturesChange:function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{pictures:Object(T.a)(e)}))}})}),Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},className:C.centerAll})]})}),Object(d.jsx)("div",{className:C.answerContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"space-evenly",spacing:2,style:{height:"100%"},children:[Object(d.jsx)(I.a,{item:!0,xs:5,className:C.optionContainer,children:Object(d.jsx)(Qe,{mode:t,text:(null===c||void 0===c?void 0:c.language)===X.En?"True":"Verdadero",icon:"wb_sunny",valid:n.answer,color:"#4caf50",fontSize:42,showResults:O,onValidChange:function(e){y(!0)},onClick:function(){S(!0)}})}),Object(d.jsx)(I.a,{item:!0,xs:5,className:C.optionContainer,children:Object(d.jsx)(Qe,{mode:t,text:(null===c||void 0===c?void 0:c.language)===X.En?"False":"Falso",icon:"brightness_2",valid:!n.answer,color:"#f44336",fontSize:42,showResults:O,onValidChange:function(e){y(!1)},onClick:function(){S(!1)}})})]})})]})},ht=Object(l.a)({fullWidth:{width:"100%"}}),ft=function(e){var t=e.config,n=e.onConfigChange,c=Object(a.useState)(t),i=Object(j.a)(c,2),r=i[0],o=i[1],s=Object(a.useRef)({}),l=Object(a.useRef)({}),u=Object(a.useRef)({}),b=Object(a.useRef)({}),h=ht();Object(a.useEffect)((function(){o(t)}),[t]);var f=function(e,t){var c=Object(P.a)(Object(P.a)({},r),{},Object(ue.a)({},e,t));o(c),n&&n(c)};return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:s,type:"number",label:"L\xedmite de tiempo (segundos)",inputProps:{min:10},value:r.timeLimit,color:"secondary",className:h.fullWidth,onInput:function(){f("timeLimit",parseInt(s.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:l,type:"number",label:"Tama\xf1o de letra del t\xedtulo",inputProps:{min:1},value:r.questionFontSize,color:"secondary",className:h.fullWidth,onInput:function(){f("questionFontSize",parseInt(l.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:u,type:"number",label:"N\xfamero de im\xe1genes",inputProps:{min:1,max:9},value:r.pictureCount,color:"secondary",className:h.fullWidth,onInput:function(){f("pictureCount",parseInt(u.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:b,name:"checkPictureLabel",checked:r.pictureLabel,color:"secondary",onChange:function(){f("pictureLabel",b.current.checked)}}),label:"Numerar im\xe1genes"})})]})},Ot=Object(l.a)({fullHeight:{height:"100%"}}),mt=function(e){var t=e.challenge,n=e.onChallengeChange,c=Ot();return Object(d.jsxs)(I.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:10,className:c.fullHeight,children:Object(d.jsx)(bt,{mode:Pe.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(d.jsx)(I.a,{item:!0,xs:2,className:c.fullHeight,children:Object(d.jsx)(ft,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(T.a)(t.pictures);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return{type:i.None,data:""}}));n=[].concat(Object(T.a)(n),Object(T.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.pictureCount),a=Object(P.a)(Object(P.a)({},t),{},{pictures:Object(T.a)(c),config:e});n(a)}})})]})},xt=n(208),pt=n(44),gt=Object(l.a)((function(e){return{item:{borderRadius:"10em",backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:"0.5rem 1rem",cursor:"move"}}})),vt=function(e){var t=e.name,n=e.style,c=e.iconButton,i=gt(),a=Object(De.a)((function(){return{type:"dnd",item:{name:t},collect:function(e){return{opacity:e.isDragging()?.4:1}}}}),[t]),r=Object(j.a)(a,2),o=r[0].opacity,s=r[1];return Object(d.jsxs)("div",{ref:s,className:i.item,style:Object(P.a)({opacity:o},n),children:[t,c]})},Ct=Object(l.a)((function(e){return{root:{height:"100%",width:"100%"},fullWidth:{width:"100%"},fullHeight:{height:"100%"},titleContainer:{width:"100%",padding:"5px",backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},itemsContainer:{padding:"5px",height:"100%"}}})),yt=function(e){var t=e.mode,n=e.title,c=e.validItems,i=e.showResults,r=e.fontSize,o=e.onTitleChange,s=e.onItemsChange,l=e.droppedItems,u=e.onDrop,b=Object(Ae.a)({accept:"dnd",drop:function(e){u&&u(e)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),h=Object(j.a)(b,2),f=h[0],O=f.isOver,m=f.canDrop,x=h[1],p=Object(a.useState)({title:n||"",validItems:c||[],droppedItems:l||[]}),g=Object(j.a)(p,2),v=g[0],C=g[1],y=Object(a.useRef)({}),S=Object(a.useRef)({}),w=Ct();Object(a.useEffect)((function(){null!=l&&C(Object(P.a)(Object(P.a)({},v),{},{droppedItems:Object(T.a)(l)}))}),[l]);var N=function(){var e=[].concat(Object(T.a)(v.validItems),[S.current.value]),t=Object(P.a)(Object(P.a)({},v),{},{validItems:e});C(t),s&&s(e),S.current.value=""};return Object(d.jsx)(Se.a,{elevation:4,className:w.root,style:{backgroundColor:O&&m?"#efefef":"#ffffff"},children:Object(d.jsxs)(I.a,{container:!0,direction:"column",className:"".concat(w.fullHeight," ").concat(w.fullWidth),children:[Object(d.jsx)(I.a,{item:!0,className:w.titleContainer,children:t===Pe.Play?Object(d.jsx)(L.a,{style:{fontSize:r},children:n}):Object(d.jsx)(te.a,{inputRef:y,value:v.title,style:{width:"100%"},inputProps:{style:{fontSize:r,textAlign:"center",color:"#ffffff"}},onInput:function(){var e=Object(P.a)(Object(P.a)({},v),{},{title:y.current.value});C(e),o&&o(y.current.value)}})}),Object(d.jsx)(I.a,{item:!0,xs:!0,children:Object(d.jsxs)(I.a,{container:!0,direction:"column",alignItems:"center",className:w.itemsContainer,spacing:2,children:[t===Pe.Design&&v.validItems.map((function(e,t){return Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(Ee.a,{label:e,color:"secondary",size:"medium",style:{fontSize:r,color:"#ffffff"},onDelete:function(){return function(e){var t=v.validItems.filter((function(t,n){return e!==n})),n=Object(P.a)(Object(P.a)({},v),{},{validItems:t});C(n),s&&s(t)}(t)}})},"item_".concat(t))})),t===Pe.Design&&Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:S,variant:"outlined",InputProps:{style:{fontSize:r,color:"#000000"}},label:"Nuevo elemento",onKeyPress:function(e){"Enter"===e.code&&""!==S.current.value&&N()}})},"newItem"),t===Pe.Play&&Object(d.jsx)(I.a,{item:!0,xs:!0,className:"".concat(w.fullWidth," ").concat(w.fullHeight),children:Object(d.jsx)("div",{ref:x,className:"".concat(w.fullWidth," ").concat(w.fullHeight),children:Object(d.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",spacing:1,className:w.fullHeight,children:v.droppedItems.map((function(e){return Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(vt,{name:e,style:(t=e,i?c.indexOf(t)>=0?{fontSize:"".concat(r,"px"),backgroundColor:"#4caf50"}:{fontSize:"".concat(r,"px"),backgroundColor:"#f44336"}:{fontSize:"".concat(r,"px")})},e)},"gridItem_".concat(e));var t}))})})},"dropItem")]})})]})})},St=Object(l.a)((function(e){return{root:{height:"100%",backgroundColor:"#f0f0f0"},fullHeight:{height:"100%"},titleContainer:{height:"20%"},classifyContainer:{height:"80%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"},optionsContainer:{height:"20%",border:"solid 1px gray",backgroundColor:"#ffffff"},groupsContainer:{height:"80%"}}})),wt=function(e,t){var n=e.reduce((function(e,t){return[].concat(Object(T.a)(e),Object(T.a)(t.items))}),[]);return t===Pe.Play&&(n=n.sort((function(){return Math.random()-.5}))),n},Nt=function(e){var t=e.mode,n=e.challenge,c=e.options,i=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(a.useState)(function(e){return e.groups.map((function(e){return{groupName:e.name,items:[]}}))}(n)),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useState)(!1),f=Object(j.a)(h,2),O=f[0],m=f[1],x=Object(a.useState)(!1),p=Object(j.a)(x,2),g=p[0],v=p[1],C=Object(a.useState)(wt(n.groups,t)),y=Object(j.a)(C,2),S=y[0],w=y[1],N=Object(Ue.a)(it),k=Object(j.a)(N,1)[0],R=Object(Ue.a)(at),E=Object(j.a)(R,1)[0],F=St();Object(a.useEffect)((function(){w(wt(n.groups,t))}),[n.groups]);var z=function(e){m(!0),v(!0),e?k():E(),setTimeout((function(){e?r&&r():o&&o()}),2e3)},A=function(e){return u.reduce((function(t,n){return t||n.items.indexOf(e)>=0}),!1)};return Object(d.jsxs)(Se.a,{variant:"outlined",className:F.root,children:[Object(d.jsx)("div",{className:F.titleContainer,children:Object(d.jsx)(Ve,{mode:t,question:n.question,fontSize:n.config.questionFontSize,onChange:function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{question:e}))}})}),Object(d.jsx)("div",{className:F.classifyContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"center",className:F.fullHeight,children:[Object(d.jsx)(I.a,{item:!0,xs:2,className:F.fullHeight,children:null!=c&&!c.ignoreTimeLimit&&Object(d.jsx)(ct,{mode:t,time:n.config.timeLimit,stopTimer:O,onTimeUp:function(){z(!1)}})}),Object(d.jsx)(I.a,{item:!0,xs:8,className:F.fullHeight,children:Object(d.jsx)(xt.a,{backend:pt.a,children:Object(d.jsxs)(I.a,{container:!0,spacing:2,className:F.fullHeight,children:[Object(d.jsx)(I.a,{item:!0,xs:12,className:F.optionsContainer,children:Object(d.jsx)(I.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center",children:S.map((function(e,t){return!A(e)&&!A(e)&&Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(vt,{name:e,style:{fontSize:n.config.itemsFontSize}},"dragable_".concat(t))},"gridItem_".concat(t))}))})}),Object(d.jsx)(I.a,{item:!0,xs:12,className:F.groupsContainer,children:Object(d.jsx)(I.a,{container:!0,justify:"space-evenly",spacing:2,style:{height:"100%"},children:n.groups.map((function(e,c){var a;return Object(d.jsx)(I.a,{item:!0,xs:4,children:Object(d.jsx)(yt,{mode:t,title:e.name,validItems:e.items,showResults:g,fontSize:n.config.itemsFontSize,onTitleChange:function(e){return function(e,t){var c=n.groups.map((function(n,c){return Object(P.a)(Object(P.a)({},n),{},{name:c!==e?n.name:t})}));i&&i(Object(P.a)(Object(P.a)({},n),{},{groups:c}))}(c,e)},onItemsChange:function(e){return function(e,t){var c=n.groups.map((function(n,c){return c!==e?Object(P.a)({},n):Object(P.a)(Object(P.a)({},n),{},{items:Object(T.a)(t)})}));i&&i(Object(P.a)(Object(P.a)({},n),{},{groups:c}))}(c,e)},droppedItems:null===(a=u.find((function(t){return t.groupName===e.name})))||void 0===a?void 0:a.items,onDrop:function(t){return function(e,t){var n=u.map((function(n){return n.groupName!==e?Object(P.a)(Object(P.a)({},n),{},{items:n.items.filter((function(e){return e!==t.name}))}):n.items.findIndex((function(e){return e===t.name}))>=0?Object(P.a)({},n):Object(P.a)(Object(P.a)({},n),{},{items:[].concat(Object(T.a)(n.items),[t.name])})}));b(n)}(e.name,t)}})},"group_".concat(c))}))})})]})})}),Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},className:F.centerAll,children:Object(d.jsxs)(Me.a,{variant:"extended",size:"large",color:"primary",disabled:t===Pe.Design||!(n.groups.reduce((function(e,t){return e+t.items.length}),0)===u.reduce((function(e,t){return e+t.items.length}),0)),onClick:function(){!function(){var e=n.groups.reduce((function(e,t){var n=t.items.reduce((function(e,n){var c=u.find((function(e){return e.groupName===t.name}));return null!=c&&e&&c.items.indexOf(n)>=0}),!0);return e&&n}),!0);z(e)}()},children:[Object(d.jsx)(W.a,{children:"check"}),"\xa0",(null===c||void 0===c?void 0:c.language)===X.En?"Check":"Corregir"]})})]})})]})},kt=Object(l.a)({fullWidth:{width:"100%"}}),It=function(e){var t=e.config,n=e.onConfigChange,c=Object(a.useState)(t),i=Object(j.a)(c,2),r=i[0],o=i[1],s=Object(a.useRef)({}),l=Object(a.useRef)({}),u=Object(a.useRef)({}),b=Object(a.useRef)({}),h=kt();Object(a.useEffect)((function(){o(t)}),[t]);var f=function(e,t){var c=Object(P.a)(Object(P.a)({},r),{},Object(ue.a)({},e,t));o(c),n&&n(c)};return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:s,type:"number",label:"L\xedmite de tiempo (segundos)",inputProps:{min:10},value:r.timeLimit,color:"secondary",className:h.fullWidth,onInput:function(){f("timeLimit",parseInt(s.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:l,type:"number",label:"Tama\xf1o de letra del t\xedtulo",inputProps:{min:1},value:r.questionFontSize,color:"secondary",className:h.fullWidth,onInput:function(){f("questionFontSize",parseInt(l.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:u,type:"number",label:"Tama\xf1o de letra de los elementos",inputProps:{min:1},value:r.itemsFontSize,color:"secondary",className:h.fullWidth,onInput:function(){f("itemsFontSize",parseInt(u.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:b,type:"number",label:"N\xfamero de grupos",inputProps:{min:1},value:r.groupCount,color:"secondary",className:h.fullWidth,onInput:function(){f("groupCount",parseInt(b.current.value))}})})]})},Rt=Object(l.a)({fullHeight:{height:"100%"}}),Et=function(e){var t=e.challenge,n=e.onChallengeChange,c=Rt();return Object(d.jsxs)(I.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:10,className:c.fullHeight,children:Object(d.jsx)(Nt,{mode:Pe.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(d.jsx)(I.a,{item:!0,xs:2,className:c.fullHeight,children:Object(d.jsx)(It,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(T.a)(t.groups);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return{name:"",items:[]}}));n=[].concat(Object(T.a)(n),Object(T.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.groupCount),i=Object(P.a)(Object(P.a)({},t),{},{groups:c,config:e});n(i)}})})]})},Pt=Object(l.a)((function(e){return{root:{height:"100%",backgroundColor:"#f0f0f0"},fullHeight:{height:"100%"},titleContainer:{height:"20%"},pictureContainer:{height:"80%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"},optionsContainer:{height:"20%",border:"solid 1px"},item:{padding:"5px 10px",backgroundColor:e.palette.secondary.main,color:e.palette.primary.contrastText,borderRadius:"20px"},groupsContainer:{height:"80%"}}})),Tt=function(e){var t=e.mode,n=e.challenge,c=e.onChallengeChange,i=e.onSuccess,r=e.onError,o=Object(a.useState)(!1),s=Object(j.a)(o,2),l=s[0],u=s[1],b=Object(a.useState)([]),h=Object(j.a)(b,1)[0],f=Object(a.useState)(!1),O=Object(j.a)(f,2),m=(O[0],O[1]),x=Object(Ue.a)(it),p=Object(j.a)(x,1)[0],g=Object(Ue.a)(at),v=Object(j.a)(g,1)[0],C=Pt(),y=function(e){u(!0),m(!0),e?p():v(),setTimeout((function(){e?i&&i():r&&r()}),2e3)};return Object(d.jsxs)(Se.a,{variant:"outlined",className:C.root,children:[Object(d.jsx)("div",{className:C.titleContainer,children:Object(d.jsx)(Ve,{mode:t,question:n.question,fontSize:n.config.questionFontSize,onChange:function(e){c&&c(Object(P.a)(Object(P.a)({},n),{},{question:e}))}})}),Object(d.jsx)("div",{className:C.pictureContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"center",className:C.fullHeight,children:[Object(d.jsx)(I.a,{item:!0,xs:2,className:C.fullHeight,children:Object(d.jsx)(ct,{mode:t,time:n.config.timeLimit,stopTimer:l,onTimeUp:function(){y(!1)}})}),Object(d.jsx)(I.a,{item:!0,xs:8,className:C.fullHeight}),Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},className:C.centerAll,children:Object(d.jsxs)(Me.a,{variant:"extended",size:"large",color:"primary",disabled:t===Pe.Design||0===h.length,onClick:function(){},children:[Object(d.jsx)(W.a,{children:"check"}),"\xa0Corregir"]})})]})})]})},Ft=Object(l.a)({fullWidth:{width:"100%"}}),zt=function(e){var t=e.config,n=e.onConfigChange,c=Object(a.useState)(t),i=Object(j.a)(c,2),r=i[0],o=i[1],s=Object(a.useRef)({}),l=Object(a.useRef)({}),u=Object(a.useRef)({}),b=Object(a.useRef)({}),h=Ft();Object(a.useEffect)((function(){o(t)}),[t]);var f=function(e,t){var c=Object(P.a)(Object(P.a)({},r),{},Object(ue.a)({},e,t));o(c),n&&n(c)};return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:s,type:"number",label:"L\xedmite de tiempo (segundos)",inputProps:{min:10},value:r.timeLimit,color:"secondary",className:h.fullWidth,onInput:function(){f("timeLimit",parseInt(s.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:l,type:"number",label:"Tama\xf1o de letra del t\xedtulo",inputProps:{min:1},value:r.questionFontSize,color:"secondary",className:h.fullWidth,onInput:function(){f("questionFontSize",parseInt(l.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:u,type:"number",label:"Tama\xf1o de letra de los elementos",inputProps:{min:1},value:r.itemsFontSize,color:"secondary",className:h.fullWidth,onInput:function(){f("itemsFontSize",parseInt(u.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:b,type:"number",label:"N\xfamero de elementos",inputProps:{min:1},value:r.itemCount,color:"secondary",className:h.fullWidth,onInput:function(){f("groupCount",parseInt(b.current.value))}})})]})},At=Object(l.a)({fullHeight:{height:"100%"}}),Dt=function(e){var t=e.challenge,n=e.onChallengeChange,c=At();return Object(d.jsxs)(I.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:10,className:c.fullHeight,children:Object(d.jsx)(Tt,{mode:Pe.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(d.jsx)(I.a,{item:!0,xs:2,className:c.fullHeight,children:Object(d.jsx)(zt,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(T.a)(t.items);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return""}));n=[].concat(Object(T.a)(n),Object(T.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.itemCount),i=Object(P.a)(Object(P.a)({},t),{},{items:c,config:e});n(i)}})})]})},Ht=Object(l.a)((function(e){return{root:{width:"100%",height:"100%",border:"solid 1px gray"},fixed:{backgroundColor:e.palette.primary.main,color:"#ffffff"},valid:{backgroundColor:"#4caf50"},invalid:{backgroundColor:"#f44336"}}})),Wt=function(e){var t=e.mode,n=e.cell,c=e.fixed,i=e.fontSize,r=e.showResults,o=e.success,s=e.onCellChange,l=Object(a.useState)(n),u=Object(j.a)(l,2),b=u[0],h=u[1],f=Object(a.useRef)({}),O=Ht();return Object(d.jsxs)(I.a,{container:!0,alignItems:"center",className:"".concat(O.root," ").concat(c?O.fixed:r?o?O.valid:O.invalid:""),children:[t===Pe.Design&&!c&&Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{value:"hidden",onClick:function(){var e=Object(P.a)(Object(P.a)({},b),{},{hidden:!b.hidden});h(e),s(e)},children:Object(d.jsx)(W.a,{color:b.hidden?"secondary":"primary",children:b.hidden?"visibility_off":"visibility"})})}),Object(d.jsx)(I.a,{item:!0,xs:!0,children:t===Pe.Design||b.hidden?Object(d.jsx)(te.a,{inputRef:f,value:b.text,color:"secondary",style:{marginLeft:"10px",width:"calc(100% - 20px)"},inputProps:{style:{textAlign:"center",fontSize:"".concat(null!=i?i:28,"px"),color:c||r?"#ffffff":"#000000",width:"100%"}},onInput:function(){var e=Object(P.a)(Object(P.a)({},b),{},{text:f.current.value});h(e),s(e)}}):Object(d.jsx)("div",{style:{textAlign:"center",fontSize:"".concat(null!=i?i:28,"px"),color:c||r?"#ffffff":"#000000"},children:b.text})})]})},Lt=Object(l.a)((function(e){return{root:{height:"100%",backgroundColor:"#f0f0f0"},titleContainer:{height:"20%"},answerContainer:{height:"80%"},optionContainer:{height:"100%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"},cell:{height:"60px"}}})),_t=function(e){var t=e.mode,n=e.challenge,c=e.options,i=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(a.useState)(function(e){return e.items.map((function(e){return e.map((function(e){return e.hidden?Object(P.a)(Object(P.a)({},e),{},{text:""}):Object(P.a)({},e)}))}))}(n)),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useState)(!1),f=Object(j.a)(h,2),O=f[0],m=f[1],x=Object(a.useState)(!1),p=Object(j.a)(x,2),g=p[0],v=p[1],C=Object(Ue.a)(it),y=Object(j.a)(C,1)[0],S=Object(Ue.a)(at),w=Object(j.a)(S,1)[0],N=Lt(),k=function(e){m(!0),v(!0),e?y():w(),setTimeout((function(){e?r&&r():o&&o()}),2e3)};return Object(d.jsxs)(Se.a,{variant:"outlined",className:N.root,children:[Object(d.jsx)("div",{className:N.titleContainer,children:Object(d.jsx)(Ve,{mode:t,question:n.question,fontSize:n.config.questionFontSize,onChange:function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{question:e}))}})}),Object(d.jsx)("div",{className:N.answerContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"center",style:{height:"100%"},children:[Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},children:null!=c&&!c.ignoreTimeLimit&&Object(d.jsx)(ct,{mode:t,time:n.config.timeLimit,stopTimer:O,onTimeUp:function(){k(!1)}})}),Object(d.jsx)(I.a,{item:!0,xs:8,style:{height:"100%"},children:Object(d.jsx)(I.a,{container:!0,alignItems:"center",style:{height:"100%"},children:Object(d.jsx)(I.a,{item:!0,xs:!0,children:Object(d.jsx)(I.a,{container:!0,direction:"column",children:(t===Pe.Design?n.items:u).map((function(e,c){return Object(d.jsx)(I.a,{item:!0,xs:!0,children:Object(d.jsx)(I.a,{container:!0,children:e.map((function(e,a){return Object(d.jsx)(I.a,{item:!0,xs:!0,className:N.cell,children:!(n.config.firstRowFixed&&n.config.firstColumnFixed&&0===c&&0===a)&&Object(d.jsx)(Wt,{mode:t,cell:e,fixed:n.config.firstRowFixed&&0===c||n.config.firstColumnFixed&&0===a,fontSize:n.config.itemsFontSize,showResults:g,success:(!n.config.firstRowFixed||0!==c)&&(!n.config.firstColumnFixed||0!==a)&&n.items[c][a].text===u[c][a].text,onCellChange:function(e){!function(e,c,a){var r=(t===Pe.Design?n.items:u).map((function(t,n){return n!==c?Object(T.a)(t):t.map((function(t,n){return n===a?Object(P.a)({},e):Object(P.a)({},t)}))}));t===Pe.Play?b(r):i&&i(Object(P.a)(Object(P.a)({},n),{},{items:r}))}(e,c,a)}})},"column_".concat(a))}))})},"row_".concat(c))}))})})})}),Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},className:N.centerAll,children:Object(d.jsxs)(Me.a,{variant:"extended",size:"large",color:"primary",disabled:t===Pe.Design||!u.reduce((function(e,t,c){return e&&t.reduce((function(e,t,i){return e&&(n.config.firstRowFixed&&0===c&&n.config.firstColumnFixed&&0===i||""!==t.text)}),!0)}),!0),onClick:function(){!function(){var e=u.reduce((function(e,t,c){return e&&t.reduce((function(e,t,i){return e&&(n.config.firstRowFixed&&0===c&&n.config.firstColumnFixed&&0===i||t.text===n.items[c][i].text)}),!0)}),!0);k(e)}()},children:[Object(d.jsx)(W.a,{children:"check"}),"\xa0",(null===c||void 0===c?void 0:c.language)===X.En?"Check":"Corregir"]})})]})})]})},qt=Object(l.a)({fullWidth:{width:"100%"}}),Mt=function(e){var t=e.config,n=e.onConfigChange,c=Object(a.useState)(t),i=Object(j.a)(c,2),r=i[0],o=i[1],s=Object(a.useRef)({}),l=Object(a.useRef)({}),u=Object(a.useRef)({}),b=Object(a.useRef)({}),h=Object(a.useRef)({}),f=Object(a.useRef)({}),O=Object(a.useRef)({}),m=qt();Object(a.useEffect)((function(){o(t)}),[t]);var x=function(e,t){var c=Object(P.a)(Object(P.a)({},r),{},Object(ue.a)({},e,t));o(c),n&&n(c)};return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:s,type:"number",label:"L\xedmite de tiempo (segundos)",inputProps:{min:10},value:r.timeLimit,color:"secondary",className:m.fullWidth,onInput:function(){x("timeLimit",parseInt(s.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:l,type:"number",label:"Tama\xf1o de letra del t\xedtulo",inputProps:{min:1},value:r.questionFontSize,color:"secondary",className:m.fullWidth,onInput:function(){x("questionFontSize",parseInt(l.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:u,type:"number",label:"Tama\xf1o de letra de los elementos",inputProps:{min:1},value:r.itemsFontSize,color:"secondary",className:m.fullWidth,onInput:function(){x("itemsFontSize",parseInt(u.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:b,type:"number",label:"N\xfamero de filas",inputProps:{min:1},value:r.rowCount,color:"secondary",className:m.fullWidth,onInput:function(){x("rowCount",parseInt(b.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:h,name:"checkMultiselect",checked:r.firstRowFixed,color:"secondary",onChange:function(){x("firstRowFixed",h.current.checked)}}),label:"Primera fila fija"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:f,type:"number",label:"N\xfamero de columnas",inputProps:{min:1},value:r.columnCount,color:"secondary",className:m.fullWidth,onInput:function(){x("columnCount",parseInt(f.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:O,name:"checkFirstColumnFixed",checked:r.firstColumnFixed,color:"secondary",onChange:function(){x("firstColumnFixed",O.current.checked)}}),label:"Primera columna fija"})})]})},Ut=Object(l.a)({fullHeight:{height:"100%"}}),Bt=function(e){var t=e.challenge,n=e.onChallengeChange,c=Ut();return Object(d.jsxs)(I.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:10,className:c.fullHeight,children:Object(d.jsx)(_t,{mode:Pe.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(d.jsx)(I.a,{item:!0,xs:2,className:c.fullHeight,children:Object(d.jsx)(Mt,{config:t.config,onConfigChange:function(e){var c=function(e,n){var c=Object(T.a)(t.items);if(e>c.length){var i=Array.from(Array(c[0].length)).map((function(){return{text:"",hidden:!1}})),a=Array.from(Array(e-c.length)).map((function(){return Object(T.a)(i)}));c=[].concat(Object(T.a)(c),Object(T.a)(a))}else e<c.length&&(c=c.slice(0,e));if(n>c[0].length){var r=Array.from(Array(n-c[0].length)).map((function(){return{text:"",hidden:!1}}));c=c.map((function(e){return[].concat(Object(T.a)(e),Object(T.a)(r))}))}else n<c[0].length&&(c=c.map((function(e){return e.slice(0,n)})));return c}(e.rowCount,e.columnCount),i=Object(P.a)(Object(P.a)({},t),{},{items:c,config:e});n(i)}})})]})},Gt=function(e){return e.replace(/\./g," .").replace(/,/g," ,").replace(/;/g," ;").replace(/:/g," :").split(" ")},Vt=function(e){return e.join(" ").replace(/ \./g,".").replace(/ ,/g,",").replace(/ ;/g,";").replace(/ :/g,":")},Jt=function(e,t,n,c){var i=e,a=t;return n||(i=i.toLowerCase(),a=a.toLowerCase()),c||(i=i.replace(/\xc1/g,"A").replace(/\xc9/g,"E").replace(/\xcd/g,"I").replace(/\xd3/g,"O").replace(/\xda/g,"U").replace(/\xe1/g,"a").replace(/\xe9/g,"e").replace(/\xed/g,"i").replace(/\xf3/g,"o").replace(/\xfa/g,"u"),a=a.replace(/\xc1/g,"A").replace(/\xc9/g,"E").replace(/\xcd/g,"I").replace(/\xd3/g,"O").replace(/\xda/g,"U").replace(/\xe1/g,"a").replace(/\xe9/g,"e").replace(/\xed/g,"i").replace(/\xf3/g,"o").replace(/\xfa/g,"u")),i===a},Kt=function(e){var t=e.value,n=e.style,c=e.fontSize,i=e.onDrop,a=Object(Ae.a)({accept:"dnd",drop:function(e){i(e.name)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),r=Object(j.a)(a,2),o=r[0],s=(o.isOver,o.canDrop,r[1]);return Object(d.jsx)("div",{ref:s,style:Object(P.a)({width:"150px",height:"50px",lineHeight:"50px",textAlign:"center",borderBottom:"solid 1px ".concat(x.main),color:x.main,fontSize:"".concat(c||50,"px")},n),children:t})},Yt=Object(l.a)((function(e){return{word:{padding:"2px","& :hover":{backgroundColor:e.palette.primary.light,color:"#ffffff",cursor:"pointer",borderRadius:"10px"}},selected:{backgroundColor:e.palette.primary.main,borderRadius:"10px",color:"#ffffff"}}})),$t=function(e){var t=e.mode,n=e.sentence,c=e.fillMethod,i=e.checkCapitalLetters,r=e.checkAccentMarks,o=e.showResults,s=e.fontSize,l=e.onSentenceChange,u=e.onSentenceRemove,b=e.onAnswersChange,h=Object(a.useState)(function(e){var t=[],n=0,c=Gt(e.text);return e.hiddenExpressions.forEach((function(e,i){e.initPosition>n&&t.push({type:"text",hiddenIdx:-1,value:Vt(c.slice(n,e.initPosition)),answer:""}),t.push({type:"hidden",hiddenIdx:i,value:Vt(c.slice(e.initPosition,e.initPosition+e.wordCount)),answer:""}),n=e.initPosition+e.wordCount})),n<c.length-1&&t.push({type:"text",hiddenIdx:-1,value:Vt(c.slice(n)),answer:""}),t}(n)),f=Object(j.a)(h,2),O=f[0],m=f[1],p=Yt(),g=function(e,t){var n=O.map((function(n,c){return Object(P.a)(Object(P.a)({},n),{},{answer:c===e?t:n.answer})}));m(n),b(n.filter((function(e){return"hidden"===e.type})).map((function(e){return{hiddenIdx:e.hiddenIdx,value:e.answer}})))},v=function(e,t){return o?e.some((function(e){return Jt(e,t,i,r)}))?{color:"#4caf50"}:{color:"#f44336"}:{}};return Object(d.jsxs)(I.a,{container:!0,alignItems:"center",spacing:1,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(W.a,{fontSize:"small",color:"secondary",children:"navigate_next"})}),t===Pe.Design&&Gt(n.text).map((function(e,t){return Object(d.jsx)(I.a,{item:!0,className:"".concat(p.word," ").concat((c=t,n.hiddenExpressions.some((function(e){return c>=e.initPosition&&c<=e.initPosition+e.wordCount-1}))?p.selected:"")),onClick:function(){!function(e){var t=[];0===n.hiddenExpressions.length&&(console.log(""),t.push({initPosition:e,wordCount:1,alternatives:[]})),n.hiddenExpressions.some((function(c,i){var a=-1;if(0===i&&e<c.initPosition-1)return t=[{initPosition:e,wordCount:1,alternatives:[]}].concat(Object(T.a)(n.hiddenExpressions)),!0;if(e===c.initPosition-1)t.push({initPosition:e,wordCount:c.wordCount+1,alternatives:Object(T.a)(c.alternatives)}),a=i;else if(e===c.initPosition)1===c.wordCount||t.push({initPosition:e+1,wordCount:c.wordCount-1,alternatives:Object(T.a)(c.alternatives)}),a=i;else if(e>c.initPosition&&e<c.initPosition+c.wordCount-1)t=[].concat(Object(T.a)(t),[{initPosition:c.initPosition,wordCount:e-c.initPosition,alternatives:[]},{initPosition:e+1,wordCount:c.initPosition+c.wordCount-e-1,alternatives:[]}]),a=i;else if(e===c.initPosition+c.wordCount-1)1===c.wordCount||t.push({initPosition:c.initPosition,wordCount:c.wordCount-1,alternatives:Object(T.a)(c.alternatives)}),a=i;else if(i<n.hiddenExpressions.length-1&&e>c.initPosition+c.wordCount&&e<n.hiddenExpressions[i+1].initPosition-1)t=[].concat(Object(T.a)(t),[Object(P.a)({},c),{initPosition:e,wordCount:1,alternatives:[]}]),a=i;else if(i<n.hiddenExpressions.length-1&&e===c.initPosition+c.wordCount&&e===n.hiddenExpressions[i+1].initPosition-1)t.push({initPosition:c.initPosition,wordCount:c.wordCount+n.hiddenExpressions[i+1].wordCount+1,alternatives:[]}),a=i+1;else if(e===c.initPosition+c.wordCount)t.push({initPosition:c.initPosition,wordCount:c.wordCount+1,alternatives:Object(T.a)(c.alternatives)}),a=i;else if(i===n.hiddenExpressions.length-1)return t=[].concat(Object(T.a)(t),[Object(P.a)({},c),{initPosition:e,wordCount:1,alternatives:[]}]),!0;return-1!==a?(i<n.hiddenExpressions.length-1&&(t=[].concat(Object(T.a)(t),Object(T.a)(n.hiddenExpressions.slice(a+1)))),!0):(t.push(Object(P.a)({},c)),!1)})),l(Object(P.a)(Object(P.a)({},n),{},{hiddenExpressions:t}))}(t)},children:Object(d.jsx)(L.a,{style:{fontSize:"".concat(s||50,"px")},children:e})},"word_".concat(t));var c})),t===Pe.Design&&Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(B.a,{size:"small",onClick:function(){u&&u()},children:Object(d.jsx)(W.a,{children:"delete"})})}),t===Pe.Play&&O.map((function(e,t){return"text"===e.type?Object(d.jsx)(I.a,{item:!0,className:p.word,children:Object(d.jsx)(L.a,{style:{fontSize:"".concat(s||50,"px")},children:e.value})},"part_".concat(t)):Object(d.jsx)(I.a,{item:!0,children:c===ae.Writing?Object(d.jsx)(te.a,{value:e.answer,color:"primary",inputProps:{style:Object(P.a)({fontSize:"".concat(s||50,"px"),textAlign:"center",color:x.main},v([e.value].concat(Object(T.a)(n.hiddenExpressions[e.hiddenIdx].alternatives)),e.answer))},onInput:function(e){g(t,e.target.value)}},"input_".concat(t)):Object(d.jsx)(Kt,{value:e.answer,style:v([e.value].concat(Object(T.a)(n.hiddenExpressions[e.hiddenIdx].alternatives)),e.answer),fontSize:s,onDrop:function(e){g(t,e)}},"input_".concat(t))},"part_".concat(t))}))]})},Qt=Object(l.a)((function(){return{dialogContainer:{padding:"20px"}}})),Xt=function(e){var t=e.open,n=e.text,c=e.candidates,i=e.onAccept,r=e.onCancel,o=Object(a.useState)(c),s=Object(j.a)(o,2),l=s[0],u=s[1],b=Object(a.useRef)({}),h=Qt();Object(a.useEffect)((function(){null!=c&&u(c)}),[c]);return Object(d.jsx)(F.a,{open:t,fullWidth:!0,maxWidth:"sm",children:Object(d.jsx)(A.a,{className:h.dialogContainer,children:Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(L.a,{variant:"h6",children:'Otros textos validos para "'.concat(n,'"')})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(K.a,{children:l.map((function(e,t){return Object(d.jsxs)(Y.a,{children:[Object(d.jsx)($.a,{primary:e}),Object(d.jsx)(Q.a,{children:Object(d.jsx)(B.a,{edge:"end",onClick:function(){!function(e){u(l.filter((function(t,n){return n!==e})))}(t)},children:Object(d.jsx)(W.a,{children:"delete"})})})]})}))})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsx)(te.a,{inputRef:b,variant:"outlined",style:{width:"100%"},label:"Nuevo candidato",onKeyPress:function(e){"Enter"===e.code&&""!==b.current.value&&(u([].concat(Object(T.a)(l),[b.current.value])),b.current.value="")}})}),Object(d.jsx)(I.a,{item:!0,xs:12,children:Object(d.jsxs)(I.a,{container:!0,justify:"flex-end",spacing:1,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){i(l)},children:"Aceptar"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(_.a,{color:"primary",onClick:function(){r()},children:"Cancelar"})})]})})]})})})},Zt=Object(l.a)((function(e){return{root:{height:"100%",backgroundColor:"#f0f0f0"},fullHeight:{height:"100%"},fullWidth:{width:"100%"},titleContainer:{height:"20%"},answerContainer:{height:"80%",width:"100%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"},optionsContainer:{border:"solid 1px gray",backgroundColor:"#ffffff",minHeight:"60px"},sentencesContainer:{paddingLeft:"10px"}}})),en=function(e,t){var n=[];return e.forEach((function(e,t){e.hiddenExpressions.forEach((function(c,i){n.push({sentenceText:e.text,sentenceIdx:t,hiddenExpression:c,hiddenExpressionIdx:i})}))})),t===Pe.Play&&(n=n.sort((function(){return Math.random()-.5}))),n},tn=function(e){var t=e.mode,n=e.challenge,c=e.options,i=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(a.useState)(!1),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useState)(!1),f=Object(j.a)(h,2),O=f[0],m=f[1],x=Object(a.useRef)({}),p=Object(a.useState)(function(e){return e.sentences.map((function(e){return[]}))}(n)),g=Object(j.a)(p,2),v=g[0],C=g[1],y=Object(a.useState)(!1),S=Object(j.a)(y,2),w=S[0],N=S[1],k=Object(a.useState)(),R=Object(j.a)(k,2),E=R[0],F=R[1],z=Object(a.useState)(en(n.sentences,t)),A=Object(j.a)(z,2),D=A[0],H=A[1],L=Object(Ue.a)(it),_=Object(j.a)(L,1)[0],q=Object(Ue.a)(at),M=Object(j.a)(q,1)[0],U=Zt();Object(a.useEffect)((function(){H(en(n.sentences,t))}),[n.sentences]);var G=function(e){b(!0),m(!0),e?_():M(),setTimeout((function(){e?r&&r():o&&o()}),2e3)},V=function(e,t){return Vt(Gt(e).slice(t.initPosition,t.initPosition+t.wordCount))};return Object(d.jsxs)(Se.a,{variant:"outlined",className:U.root,children:[Object(d.jsx)("div",{className:U.titleContainer,children:Object(d.jsx)(Ve,{mode:t,question:n.question,fontSize:n.config.questionFontSize,onChange:function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{question:e}))}})}),Object(d.jsx)("div",{className:U.answerContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"center",className:U.fullHeight,children:[Object(d.jsx)(I.a,{item:!0,xs:2,className:U.fullHeight,children:null!=c&&!c.ignoreTimeLimit&&Object(d.jsx)(ct,{mode:t,time:n.config.timeLimit,stopTimer:u,onTimeUp:function(){G(!1)}})}),Object(d.jsxs)(I.a,{item:!0,xs:8,className:U.fullHeight,children:[E&&Object(d.jsx)(Xt,{open:w,text:V(n.sentences[E[0]].text,n.sentences[E[0]].hiddenExpressions[E[1]]),candidates:n.sentences[E[0]].hiddenExpressions[E[1]].alternatives,onAccept:function(e){if(i&&E){var t=n.sentences.map((function(t,n){return n!==E[0]?t:Object(P.a)(Object(P.a)({},t),{},{hiddenExpressions:t.hiddenExpressions.map((function(t,n){return n!==E[1]?t:Object(P.a)(Object(P.a)({},t),{},{alternatives:Object(T.a)(e)})}))})}));i(Object(P.a)(Object(P.a)({},n),{},{sentences:t}))}N(!1)},onCancel:function(){N(!1)}}),Object(d.jsx)(xt.a,{backend:pt.a,children:Object(d.jsxs)(I.a,{container:!0,spacing:2,direction:"column",className:U.fullHeight,children:[(t===Pe.Design||n.config.fillMethod===ae.Dragging)&&Object(d.jsx)(I.a,{item:!0,className:U.optionsContainer,children:Object(d.jsx)(I.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center",children:D.map((function(e){return!function(e){var t=V(e.sentenceText,e.hiddenExpression);return v.some((function(e){return e.some((function(e){return e.value===t}))}))}(e)&&Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(vt,{name:V(e.sentenceText,e.hiddenExpression),style:{fontSize:n.config.textFontSize},iconButton:t===Pe.Design?Object(d.jsx)(B.a,{size:"small",onClick:function(){var t,n;t=e.sentenceIdx,n=e.hiddenExpressionIdx,F([t,n]),N(!0)},children:Object(d.jsx)(W.a,{children:"add_circle"})}):void 0},"dragable_".concat(e.sentenceIdx,"_").concat(e.hiddenExpression.initPosition))},"gridItem_".concat(e.sentenceIdx,"_").concat(e.hiddenExpression.initPosition))}))})}),Object(d.jsx)(I.a,{item:!0,xs:!0,children:Object(d.jsx)(I.a,{container:!0,direction:"column",justify:"space-around",className:"".concat(U.fullWidth," ").concat(U.fullHeight),children:n.sentences.map((function(e,c){return Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)($t,{mode:t,sentence:e,fillMethod:n.config.fillMethod,checkCapitalLetters:n.config.checkCapitalLetters,checkAccentMarks:n.config.checkAccentMarks,showResults:O,fontSize:n.config.textFontSize,onSentenceChange:function(e){return function(e,t){if(i){var c=n.sentences.map((function(n,c){return c===t?e:n}));i(Object(P.a)(Object(P.a)({},n),{},{sentences:c}))}}(e,c)},onSentenceRemove:function(){!function(e){if(i){var t=n.sentences.filter((function(t,n){return n!==e}));i(Object(P.a)(Object(P.a)({},n),{},{sentences:t})),C(v.filter((function(t,n){return n!==e})))}}(c)},onAnswersChange:function(e){!function(e,t){console.log(t);var n=v.map((function(n,c){return c===e?Object(T.a)(t):Object(T.a)(n)}));C(n)}(c,e)}})},"sentence_".concat(c))}))})}),t===Pe.Design&&Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:x,variant:"outlined",style:{width:"100%"},InputProps:{style:{fontSize:n.config.textFontSize,color:"#000000"}},label:"Nueva frase",onKeyPress:function(e){"Enter"===e.code&&""!==x.current.value&&function(){if(i){var e={text:x.current.value,hiddenExpressions:[]};i(Object(P.a)(Object(P.a)({},n),{},{sentences:[].concat(Object(T.a)(n.sentences),[e])})),C([].concat(Object(T.a)(v),[[]]))}x.current.value=""}()}})})]})})]}),Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},className:U.centerAll,children:Object(d.jsxs)(Me.a,{variant:"extended",size:"large",color:"primary",disabled:t===Pe.Design||!n.sentences.reduce((function(e,t,n){return e&&t.hiddenExpressions.length===v[n].length&&v[n].every((function(e){return null!=e.value&&""!==e.value}))}),!0),onClick:function(){!function(){var e=n.sentences.reduce((function(e,t,c){var i=Gt(t.text),a=t.hiddenExpressions.reduce((function(e,t,a){var r=v[c].find((function(e){return e.hiddenIdx===a}));return null!=r&&e&&(Jt(Vt(i.slice(t.initPosition,t.initPosition+t.wordCount)),r.value,n.config.checkCapitalLetters,n.config.checkAccentMarks)||t.alternatives.some((function(e){return Jt(e,r.value,n.config.checkCapitalLetters,n.config.checkAccentMarks)})))}),!0);return e&&a}),!0);G(e)}()},children:[Object(d.jsx)(W.a,{children:"check"}),"\xa0",(null===c||void 0===c?void 0:c.language)===X.En?"Check":"Corregir"]})})]})})]})},nn=n(180),cn=Object(l.a)({fullWidth:{width:"100%"}}),an=function(e){var t=e.config,n=e.onConfigChange,c=Object(a.useState)(t),i=Object(j.a)(c,2),r=i[0],o=i[1],s=Object(a.useRef)({}),l=Object(a.useRef)({}),u=Object(a.useRef)({}),b=Object(a.useRef)({}),h=Object(a.useRef)({}),f=Object(a.useRef)({}),O=cn();Object(a.useEffect)((function(){o(t)}),[t]);var m=function(e,t){var c=Object(P.a)(Object(P.a)({},r),{},Object(ue.a)({},e,t));o(c),n&&n(c)};return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:s,type:"number",label:"L\xedmite de tiempo (segundos)",inputProps:{min:10},value:r.timeLimit,color:"secondary",className:O.fullWidth,onInput:function(){m("timeLimit",parseInt(s.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:l,type:"number",label:"Tama\xf1o de letra del t\xedtulo",inputProps:{min:1},value:r.questionFontSize,color:"secondary",className:O.fullWidth,onInput:function(){m("questionFontSize",parseInt(l.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:u,type:"number",label:"Tama\xf1o de letra de los elementos",inputProps:{min:1},value:r.textFontSize,color:"secondary",className:O.fullWidth,onInput:function(){m("textFontSize",parseInt(u.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsxs)(nn.a,{className:O.fullWidth,children:[Object(d.jsx)(ne.a,{children:"Modo de rellenado"}),Object(d.jsxs)(ce.a,{inputRef:b,label:"Modo de rellenado",value:r.fillMethod,color:"secondary",className:O.fullWidth,onChange:function(e){m("fillMethod",e.target.value)},children:[Object(d.jsx)(J.a,{value:ae.Writing,children:"Escribiendo"}),Object(d.jsx)(J.a,{value:ae.Dragging,children:"Arrastrando"})]})]})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:h,name:"checkMultiselect",checked:r.checkCapitalLetters,color:"secondary",onChange:function(){m("checkCapitalLetters",h.current.checked)}}),label:"Comprobar may\xfasculas/min\xfasculas"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(je.a,{control:Object(d.jsx)(de.a,{inputRef:f,name:"checkAccentMarks",checked:r.checkAccentMarks,color:"secondary",onChange:function(){m("checkAccentMarks",f.current.checked)}}),label:"Comprobar tildes"})})]})},rn=Object(l.a)({fullHeight:{height:"100%"}}),on=function(e){var t=e.challenge,n=e.onChallengeChange,c=rn();return Object(d.jsxs)(I.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:10,className:c.fullHeight,children:Object(d.jsx)(tn,{mode:Pe.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(d.jsx)(I.a,{item:!0,xs:2,className:c.fullHeight,children:Object(d.jsx)(an,{config:t.config,onConfigChange:function(e){var c=Object(P.a)(Object(P.a)({},t),{},{config:e});n(c)}})})]})},sn=function(e){var t=e.mode,n=e.item,c=e.fontSize,i=e.arrowNode,r=e.onTextChange,o=Object(a.useState)(n.text),s=Object(j.a)(o,2),l=s[0],u=s[1],b=Object(a.useRef)({});Object(a.useEffect)((function(){u(n.text)}),[n]);var h=Object(De.a)((function(){return{type:"dnd",item:Object(P.a)({},n),collect:function(e){return{opacity:e.isDragging()?.4:1}}}}),[n]),f=Object(j.a)(h,2),O=(f[0].opacity,f[1]);return Object(d.jsx)(Se.a,{style:{width:"100%"},children:Object(d.jsx)(Ie.a,{children:Object(d.jsxs)(I.a,{container:!0,alignItems:"center",children:[Object(d.jsx)(I.a,{item:!0,xs:!0,container:!0,justify:"center",children:t===Pe.Design?Object(d.jsx)(te.a,{inputRef:b,value:l,onInput:function(){u(b.current.value),r&&r(b.current.value)},style:{width:"95%"},inputProps:{style:{fontSize:"".concat(c||22,"px")}}}):Object(d.jsx)(L.a,{children:l})}),Object(d.jsx)(I.a,{item:!0,xs:1,container:!0,justify:"center",children:Object(d.jsx)("div",{ref:O,children:i})})]})})})};!function(e){e[e.Source=0]="Source",e[e.Destination=1]="Destination"}(Be||(Be={}));var ln=function(e){var t=e.mode,n=e.item,c=e.fontSize,i=e.arrowNode,r=e.onTextChange,o=e.onDrop,s=Object(a.useState)(n.text),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useRef)({});Object(a.useEffect)((function(){b(n.text)}),[n.text]);var f=Object(Ae.a)({accept:"dnd",drop:function(e){o&&o(e)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),O=Object(j.a)(f,2),m=O[0],x=(m.isOver,m.canDrop,O[1]);return Object(d.jsx)(Se.a,{style:{width:"100%"},children:Object(d.jsx)(Ie.a,{children:Object(d.jsxs)(I.a,{container:!0,alignItems:"center",children:[Object(d.jsx)(I.a,{item:!0,xs:1,container:!0,justify:"center",children:Object(d.jsx)("div",{ref:x,children:i})}),Object(d.jsx)(I.a,{item:!0,xs:!0,container:!0,justify:"center",children:t===Pe.Design?Object(d.jsx)(te.a,{inputRef:h,value:u,onInput:function(){b(h.current.value),r&&r(h.current.value)},style:{width:"95%"},inputProps:{style:{fontSize:"".concat(c||22,"px")}}}):Object(d.jsx)(L.a,{children:u})})]})})})},un=n(86),jn=n.n(un),dn=Object(l.a)((function(e){return{root:{height:"100%",backgroundColor:"#f0f0f0"},fullHeight:{height:"100%"},fullWidth:{width:"100%"},titleContainer:{height:"20%"},answerContainer:{height:"80%",width:"100%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"},optionsContainer:{border:"solid 1px gray",backgroundColor:"#ffffff",minHeight:"60px"},sentencesContainer:{paddingLeft:"10px"}}})),bn=function(e,t){var n=Object(T.a)(e);return t===Pe.Play&&(n=n.sort((function(){return Math.random()-.5}))),n},hn=function(e){var t=e.mode,n=e.challenge,c=e.options,i=e.onChallengeChange,r=e.onSuccess,o=e.onError,s=Object(a.useState)(!1),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useState)(!1),f=Object(j.a)(h,2),O=f[0],m=f[1],p=Object(a.useState)(bn(n.pairs.map((function(e){return e.source})),t)),g=Object(j.a)(p,2),v=g[0],C=g[1],y=Object(a.useState)(bn(n.pairs.map((function(e){return e.destination})),t)),S=Object(j.a)(y,2),w=S[0],N=S[1],k=Object(a.useState)([]),R=Object(j.a)(k,2),E=R[0],T=R[1],F=Object(Ue.a)(it),z=Object(j.a)(F,1)[0],A=Object(Ue.a)(at),D=Object(j.a)(A,1)[0],H=dn();Object(a.useEffect)((function(){C(bn(n.pairs.map((function(e){return e.source})),t)),N(bn(n.pairs.map((function(e){return e.destination})),t))}),[n.pairs]);var L=function(e){b(!0),m(!0),e?z():D(),setTimeout((function(){e?r&&r():o&&o()}),2e3)},_=function(e,t,c){if(i){var a=t===Be.Source?"source":"destination",r=Object(P.a)(Object(P.a)({},n),{},{pairs:n.pairs.map((function(t,n){return n===c?Object(P.a)(Object(P.a)({},t),{},Object(ue.a)({},a,e)):Object(P.a)({},t)}))});i(r)}};return Object(d.jsxs)(Se.a,{variant:"outlined",className:H.root,children:[Object(d.jsx)("div",{className:H.titleContainer,children:Object(d.jsx)(Ve,{mode:t,question:n.question,fontSize:n.config.questionFontSize,onChange:function(e){i&&i(Object(P.a)(Object(P.a)({},n),{},{question:e}))}})}),Object(d.jsx)("div",{className:H.answerContainer,children:Object(d.jsxs)(I.a,{container:!0,justify:"center",className:H.fullHeight,children:[Object(d.jsx)(I.a,{item:!0,xs:2,className:H.fullHeight,children:null!=c&&!c.ignoreTimeLimit&&Object(d.jsx)(ct,{mode:t,time:n.config.timeLimit,stopTimer:u,onTimeUp:function(){L(!1)}})}),Object(d.jsx)(I.a,{item:!0,xs:8,className:H.fullHeight,container:!0,children:Object(d.jsxs)(xt.a,{backend:pt.a,children:[Object(d.jsx)(I.a,{item:!0,xs:5,container:!0,direction:"column",justify:"space-around",alignItems:"center",children:v.map((function(e,c){return Object(d.jsx)(sn,{mode:t,item:{text:e,index:c},fontSize:n.config.answerFontSize,arrowNode:Object(d.jsx)("div",{id:"an_s_".concat(c),style:{width:"20px",height:"20px",border:"solid 1px ".concat(x.main),borderRadius:"20px"}}),onTextChange:function(e){return _(e,Be.Source,c)}},"source_".concat(c))}))}),Object(d.jsx)(I.a,{item:!0,xs:2}),Object(d.jsxs)(I.a,{item:!0,xs:5,container:!0,direction:"column",justify:"space-around",alignItems:"center",children:[w.map((function(e,c){return Object(d.jsx)(ln,{mode:t,item:{text:e,index:c},fontSize:n.config.answerFontSize,arrowNode:Object(d.jsx)("div",{id:"an_d_".concat(c),style:{width:"20px",height:"20px",border:"solid 1px ".concat(x.main),borderRadius:"20px"}}),onTextChange:function(e){return _(e,Be.Destination,c)},onDrop:function(t){!function(e,t){var n=E.filter((function(n){return n.source.index!==e.index&&n.destination.index!==t.index}));n.push({source:e,destination:t}),T(n)}(t,{text:e,index:c})}},"destination_".concat(c))})),t===Pe.Design?v.map((function(e,t){return Object(d.jsx)(jn.a,{start:"an_s_".concat(t),end:"an_d_".concat(t),curveness:0},"designArrow_".concat(t))})):E.map((function(e,t){return Object(d.jsx)(jn.a,{start:"an_s_".concat(e.source.index),end:"an_d_".concat(e.destination.index),curveness:0,color:O?n.pairs.findIndex((function(t){return t.source===e.source.text&&t.destination===e.destination.text}))>=0?"#4caf50":"#f44336":void 0},"playArrow_".concat(t))}))]})]})}),Object(d.jsx)(I.a,{item:!0,xs:2,style:{height:"100%"},className:H.centerAll,children:Object(d.jsxs)(Me.a,{variant:"extended",size:"large",color:"primary",disabled:t===Pe.Design||!(E.length===n.pairs.length),onClick:function(){!function(){var e=n.pairs.reduce((function(e,t){var n=E.findIndex((function(e){return e.source.text===t.source&&e.destination.text===t.destination}));return e&&n>=0}),!0);L(e)}()},children:[Object(d.jsx)(W.a,{children:"check"}),"\xa0",(null===c||void 0===c?void 0:c.language)===X.En?"Check":"Corregir"]})})]})})]})},fn=Object(l.a)({fullWidth:{width:"100%"}}),On=function(e){var t=e.config,n=e.onConfigChange,c=Object(a.useState)(t),i=Object(j.a)(c,2),r=i[0],o=i[1],s=Object(a.useRef)({}),l=Object(a.useRef)({}),u=Object(a.useRef)({}),b=Object(a.useRef)({}),h=fn();Object(a.useEffect)((function(){o(t)}),[t]);var f=function(e,t){var c=Object(P.a)(Object(P.a)({},r),{},Object(ue.a)({},e,t));o(c),n&&n(c)};return Object(d.jsxs)(I.a,{container:!0,direction:"column",spacing:2,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h5",children:"Configuraci\xf3n"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:s,type:"number",label:"L\xedmite de tiempo (segundos)",inputProps:{min:10},value:r.timeLimit,color:"secondary",className:h.fullWidth,onInput:function(){f("timeLimit",parseInt(s.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:l,type:"number",label:"Tama\xf1o de letra del t\xedtulo",inputProps:{min:1},value:r.questionFontSize,color:"secondary",className:h.fullWidth,onInput:function(){f("questionFontSize",parseInt(l.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:u,type:"number",label:"Tama\xf1o de letra de las respuestas",inputProps:{min:1},value:r.answerFontSize,color:"secondary",className:h.fullWidth,onInput:function(){f("answerFontSize",parseInt(u.current.value))}})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(te.a,{inputRef:b,type:"number",label:"N\xfamero de parejas",inputProps:{min:1},value:r.pairsCount,color:"secondary",className:h.fullWidth,onInput:function(){f("pairsCount",parseInt(b.current.value))}})})]})},mn=Object(l.a)({fullHeight:{height:"100%"}}),xn=function(e){var t=e.challenge,n=e.onChallengeChange,c=mn();return Object(d.jsxs)(I.a,{container:!0,className:c.fullHeight,spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:10,className:c.fullHeight,children:Object(d.jsx)(hn,{mode:Pe.Design,challenge:t,onChallengeChange:function(e){n(e)}})}),Object(d.jsx)(I.a,{item:!0,xs:2,className:c.fullHeight,children:Object(d.jsx)(On,{config:t.config,onConfigChange:function(e){var c=function(e){var n=Object(T.a)(t.pairs);if(e>n.length){var c=Array.from(Array(e-n.length)).map((function(){return{source:"",destination:""}}));n=[].concat(Object(T.a)(n),Object(T.a)(c))}else e<n.length&&(n=n.slice(0,e));return n}(e.pairsCount),i=Object(P.a)(Object(P.a)({},t),{},{pairs:c,config:e});n(i)}})})]})},pn=Object(l.a)((function(){return{fullHeight:{height:"100%"}}})),gn=function(e){var t=e.challenge,n=e.onChallengeChange,i=pn(),a=function(e){n(e)};return Object(d.jsx)(I.a,{container:!0,className:i.fullHeight,children:Object(d.jsxs)(I.a,{item:!0,xs:12,children:[(null===t||void 0===t?void 0:t.type)===c.SelectAnswer&&Object(d.jsx)(jt,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.TrueOrFalse&&Object(d.jsx)(mt,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.FillGaps&&Object(d.jsx)(on,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.Match&&Object(d.jsx)(xn,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.Sort&&Object(d.jsx)(Dt,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.Classify&&Object(d.jsx)(Et,{challenge:t,onChallengeChange:a}),(null===t||void 0===t?void 0:t.type)===c.FillTable&&Object(d.jsx)(Bt,{challenge:t,onChallengeChange:a})]})})},vn=n(230),Cn=n(209),yn=Object(l.a)((function(e){return{fullHeight:{height:"100%"},fullWidth:{width:"100%"},listContainer:{paddingRight:"10px",height:"100%",width:"100%",overflow:"hidden"},challengesContainer:{height:"calc(100% - 50px)",width:"100%",overflowY:"auto",overflowX:"hidden",listStyle:"none","&::-webkit-scrollbar":{width:"0.2em"},"&::-webkit-scrollbar-track":{boxShadow:"inset 0 0 6px rgba(255,0,0,0.00)",webkitBoxShadow:"inset 0 0 6px rgba(255,0,0,0.00)"},"&::-webkit-scrollbar-thumb":{backgroundColor:x.light,outline:"1px solid slategrey"}},challengeSelector:{flexGrow:1}}})),Sn=function(e){var t=e.projectId,n=e.testId,r=E(),o=r.projects,s=r.setProjects,l=Object(a.useState)({id:Object(ie.a)(),name:"Nuevo cuestionario",description:"",language:X.Es,challenges:[]}),u=Object(j.a)(l,2),b=u[0],h=u[1],f=Object(a.useState)(!1),O=Object(j.a)(f,2),m=O[0],x=O[1],p=Object(a.useState)(),g=Object(j.a)(p,2),v=g[0],C=g[1],y=Object(a.useState)(null),S=Object(j.a)(y,2),w=S[0],N=S[1],k=Object(a.useState)(),R=Object(j.a)(k,2),F=R[0],z=R[1],A=Object(a.useState)(!1),D=Object(j.a)(A,2),H=D[0],_=D[1],q=yn();Object(a.useEffect)((function(){var e=o.find((function(e){return e.id===t}));if(null!=e){var c=e.tests.find((function(e){return e.id===n}));null!=c&&(h(c),c.challenges.length>0&&C(null==v?c.challenges[0]:Object(P.a)({},v)))}}),[o,t,n]);var M=Object(a.useCallback)((function(e){var c=o.map((function(c){if(c.id!==t)return Object(P.a)({},c);var i=c.tests.map((function(t){return t.id!==n?Object(P.a)({},t):Object(P.a)(Object(P.a)({},t),{},{challenges:e})}));return Object(P.a)(Object(P.a)({},c),{},{tests:Object(T.a)(i)})}));s(c)}),[o]),U=function(e){var a=function(e){var t={id:Object(ie.a)(),type:e,question:"",config:ze(e)};switch(e){case c.SelectAnswer:return Object(P.a)(Object(P.a)({},t),{},{pictures:[{type:i.None,data:""}],answers:[{text:"",valid:!1},{text:"",valid:!1},{text:"",valid:!1},{text:"",valid:!1}]});case c.TrueOrFalse:return Object(P.a)(Object(P.a)({},t),{},{pictures:[{type:i.None,data:""}],answer:!0});case c.Match:return Object(P.a)(Object(P.a)({},t),{},{pairs:[{source:"",destination:""},{source:"",destination:""},{source:"",destination:""},{source:"",destination:""}]});case c.FillGaps:return Object(P.a)(Object(P.a)({},t),{},{sentences:[]});case c.Sort:return Object(P.a)(Object(P.a)({},t),{},{items:["","","","",""]});case c.Classify:return Object(P.a)(Object(P.a)({},t),{},{groups:[{name:"",items:[]},{name:"",items:[]},{name:"",items:[]}]});case c.FillTable:return Object(P.a)(Object(P.a)({},t),{},{items:[[{text:"",hidden:!1},{text:"",hidden:!1},{text:"",hidden:!1}],[{text:"",hidden:!1},{text:"",hidden:!1},{text:"",hidden:!1}],[{text:"",hidden:!1},{text:"",hidden:!1},{text:"",hidden:!1}]]});default:return t}}(e),r=o.map((function(e){if(e.id!==t)return Object(P.a)({},e);var c=e.tests.map((function(e){if(e.id!==n)return Object(P.a)({},e);var t=null!=v?b.challenges.findIndex((function(e){return e.id===(null===v||void 0===v?void 0:v.id)})):0;return Object(P.a)(Object(P.a)({},e),{},{challenges:[].concat(Object(T.a)(e.challenges.slice(0,t+1)),[a],Object(T.a)(e.challenges.slice(t+1)))})}));return Object(P.a)(Object(P.a)({},e),{},{tests:Object(T.a)(c)})}));s(r),C(a),N(null)},G=function(){N(null)};return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)(le,{open:H,text:"\xbfSeguro que deseas eliminar la pregunta?",width:"xs",onConfirm:function(){var e=o.map((function(e){if(e.id!==t)return e;var c=e.tests.map((function(e){if(e.id!==n)return e;(null===F||void 0===F?void 0:F.id)===(null===v||void 0===v?void 0:v.id)&&C(e.challenges.find((function(e){return e.id!==(null===F||void 0===F?void 0:F.id)})));var t=e.challenges.filter((function(e){return e.id!==(null===F||void 0===F?void 0:F.id)}));return Object(P.a)(Object(P.a)({},e),{},{challenges:Object(T.a)(t)})}));return Object(P.a)(Object(P.a)({},e),{},{tests:Object(T.a)(c)})}));s(e),_(!1)},onRefuse:function(){_(!1)}}),Object(d.jsxs)(I.a,{container:!0,className:q.fullHeight,spacing:2,children:[Object(d.jsx)(I.a,{item:!0,xs:2,className:q.listContainer,children:Object(d.jsxs)(I.a,{container:!0,direction:"column",className:q.fullHeight,children:[Object(d.jsx)(I.a,{item:!0,className:q.fullWidth,children:Object(d.jsxs)(I.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h5",children:"Preguntas"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsxs)(I.a,{container:!0,justify:"flex-end",alignItems:"center",children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsxs)(vn.a,{size:"small",value:m,exclusive:!0,onChange:function(e,t){x(t)},children:[Object(d.jsx)(Cn.a,{value:!1,children:Object(d.jsx)(W.a,{children:"crop_din"})}),Object(d.jsx)(Cn.a,{value:!0,children:Object(d.jsx)(W.a,{children:"reorder"})})]})}),Object(d.jsxs)(I.a,{item:!0,children:[Object(d.jsx)(B.a,{onClick:function(e){N(e.currentTarget)},children:Object(d.jsx)(W.a,{color:"primary",children:"add_circle"})}),Object(d.jsxs)(V.a,{id:"new-challenge-menu",anchorEl:w,keepMounted:!0,open:Boolean(w),onClose:G,children:[Object(d.jsxs)(J.a,{onClick:function(){U(c.SelectAnswer)},children:[Object(d.jsx)(ye.a,{children:Fe(c.SelectAnswer,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.SelectAnswer)})]}),Object(d.jsxs)(J.a,{onClick:function(){U(c.TrueOrFalse)},children:[Object(d.jsx)(ye.a,{children:Fe(c.TrueOrFalse,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.TrueOrFalse)})]}),Object(d.jsxs)(J.a,{onClick:function(){U(c.FillGaps)},children:[Object(d.jsx)(ye.a,{children:Fe(c.FillGaps,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.FillGaps)})]}),Object(d.jsxs)(J.a,{onClick:function(){U(c.Match)},children:[Object(d.jsx)(ye.a,{children:Fe(c.Match,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.Match)})]}),Object(d.jsxs)(J.a,{disabled:!0,onClick:G,children:[Object(d.jsx)(ye.a,{children:Fe(c.Sort,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.Sort)})]}),Object(d.jsxs)(J.a,{onClick:function(){U(c.Classify)},children:[Object(d.jsx)(ye.a,{children:Fe(c.Classify,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.Classify)})]}),Object(d.jsxs)(J.a,{onClick:function(){U(c.FillTable)},children:[Object(d.jsx)(ye.a,{children:Fe(c.FillTable,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.FillTable)})]}),Object(d.jsxs)(J.a,{disabled:!0,onClick:G,children:[Object(d.jsx)(ye.a,{children:Fe(c.TheOddOne,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.TheOddOne)})]}),Object(d.jsxs)(J.a,{disabled:!0,onClick:G,children:[Object(d.jsx)(ye.a,{children:Fe(c.Crossword,"large")}),Object(d.jsx)(L.a,{variant:"button",children:Te(c.Crossword)})]})]})]})]})})]})}),Object(d.jsx)(I.a,{item:!0,className:q.challengesContainer,children:Object(d.jsx)(xt.a,{backend:pt.a,children:Object(d.jsx)(qe,{challenges:b.challenges,compactList:m,selected:v,onChallengeReorder:M,onSelect:function(e){C(e)},onDelete:function(e){z(e),_(!0)}})})})]})}),Object(d.jsx)(I.a,{item:!0,xs:10,children:v&&Object(d.jsx)(gn,{challenge:v,onChallengeChange:function(e){var c=o.map((function(c){if(c.id!==t)return c;var i=c.tests.map((function(t){if(t.id!==n)return Object(P.a)({},t);var c=t.challenges.map((function(t){return t.id!==e.id?Object(P.a)({},t):Object(P.a)({},e)}));return Object(P.a)(Object(P.a)({},t),{},{challenges:Object(T.a)(c)})}));return Object(P.a)(Object(P.a)({},c),{},{tests:Object(T.a)(i)})}));s(c),C(Object(P.a)({},e))}})})]})]})},wn=Object(l.a)((function(e){return{fullHeight:{height:"100%"}}})),Nn=function(){var e=Object(O.g)(),t=e.projectId,n=e.testId,c=wn();return Object(d.jsx)(I.a,{container:!0,justify:"center",className:c.fullHeight,children:Object(d.jsx)(I.a,{item:!0,xs:12,className:c.fullHeight,children:Object(d.jsx)(Sn,{projectId:t,testId:n})})})},kn=Object(l.a)((function(e){return{fullHeight:{height:"100%"}}})),In=function(e){var t=e.challenge,n=e.options,i=e.onSuccess,a=e.onError,r=kn(),o=function(){i&&i()},s=function(){a&&a()};return Object(d.jsx)(I.a,{container:!0,className:r.fullHeight,children:Object(d.jsxs)(I.a,{item:!0,xs:12,children:[(null===t||void 0===t?void 0:t.type)===c.SelectAnswer&&Object(d.jsx)(ot,{mode:Pe.Play,challenge:t,options:n,onSuccess:o,onError:s}),(null===t||void 0===t?void 0:t.type)===c.TrueOrFalse&&Object(d.jsx)(bt,{mode:Pe.Play,challenge:t,options:n,onSuccess:o,onError:s}),(null===t||void 0===t?void 0:t.type)===c.FillGaps&&Object(d.jsx)(tn,{mode:Pe.Play,challenge:t,options:n,onSuccess:o,onError:s}),(null===t||void 0===t?void 0:t.type)===c.Match&&Object(d.jsx)(hn,{mode:Pe.Play,challenge:t,options:n,onSuccess:o,onError:s}),(null===t||void 0===t?void 0:t.type)===c.Classify&&Object(d.jsx)(Nt,{mode:Pe.Play,challenge:t,options:n,onSuccess:o,onError:s}),(null===t||void 0===t?void 0:t.type)===c.FillTable&&Object(d.jsx)(_t,{mode:Pe.Play,challenge:t,options:n,onSuccess:o,onError:s})]})})},Rn=n(211),En=Object(l.a)((function(e){return{root:{width:"100%",height:"100%",border:"solid 1px",backgroundColor:e.palette.primary.light}}})),Pn=function(e){var t=e.challengeType,n=e.challengeNumber,c=e.challengeTotalCount,i=e.language,r=e.delay,o=e.onEnd,s=En();return Object(a.useEffect)((function(){setTimeout((function(){o()}),1e3*r)}),[]),Object(d.jsxs)(I.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,className:s.root,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h2",children:Te(t,i)})}),Object(d.jsx)(I.a,{item:!0,style:{width:"100%"},children:Object(d.jsx)(Rn.a,{color:"secondary"})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h4",children:i===X.En?"Question ".concat(n.toString()," of ").concat(c.toString()):"Pregunta ".concat(n.toString()," de ").concat(c.toString())})})]})},Tn=Object(l.a)((function(e){return{root:{height:"100%",border:"solid 1px"},timeline:{transform:"rotate(-90deg)"},timelineContentContainer:{textAlign:"left",padding:"0px"},timelineContent:{transform:"rotate(90deg)",padding:"0px 5px"},timelineIcon:{transform:"rotate(90deg)"}}})),Fn=function(e){var t=e.test,n=e.results,c=e.onBackHome,i=e.onRepeatTest,a=Tn();return Object(d.jsxs)(I.a,{container:!0,direction:"column",className:a.root,justify:"center",alignItems:"center",spacing:4,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h2",children:t.name})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h3",children:t.description})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsx)(L.a,{variant:"h4",children:"".concat(t.language===X.En?"Correct answers":"Respuestas correctas",": ").concat(n.filter((function(e){return e})).length,"/").concat(n.length)})}),Object(d.jsxs)(I.a,{item:!0,container:!0,justify:"center",alignItems:"center",spacing:4,children:[Object(d.jsx)(I.a,{item:!0,children:Object(d.jsxs)(_.a,{variant:"contained",color:"primary",onClick:c,children:[Object(d.jsx)(W.a,{children:"navigate_before"}),"\xa0",t.language===X.En?"Go back to home":"Volver a la pantalla principal"]})}),Object(d.jsx)(I.a,{item:!0,children:Object(d.jsxs)(_.a,{variant:"contained",color:"primary",onClick:i,children:[Object(d.jsx)(W.a,{children:"replay"}),"\xa0",t.language===X.En?"repeat test":"Repetir cuestionario"]})})]})]})},zn=Object(l.a)((function(e){return{fullHeight:{height:"100%"},centerAll:{display:"flex",justifyContent:"center",alignItems:"center"}}})),An=function(){var e=Object(O.g)(),t=e.projectId,n=e.testId,c=Object(O.f)(),i=E().projects,r=Object(a.useState)(function(e){var t="?"===e[0]?e.slice(1):e,n={};return t.split(/&/g).forEach((function(e){var t=e.split("=");n[t[0]]="true"===t[1]||"false"===t[1]?"true"===t[1]:t[1]})),n}(c.location.search)),o=Object(j.a)(r,1)[0],s=Object(a.useState)(),l=Object(j.a)(s,2),u=l[0],b=l[1],h=Object(a.useState)({idx:-1,launching:!1}),f=Object(j.a)(h,2),m=f[0],x=f[1],p=Object(a.useState)([]),g=Object(j.a)(p,2),v=g[0],C=g[1],y=Object(a.useState)(!1),S=Object(j.a)(y,2),w=S[0],N=S[1],k=zn();Object(a.useEffect)((function(){if(null!=t&&null!=n){var e=i.find((function(e){return e.id===t}));if(null!=e){var c=e.tests.find((function(e){return e.id===n}));null!=c&&(b(c),x({idx:0,launching:!0}))}}}),[t,n]);var R=function(){null!=u&&(m.launching?x(Object(P.a)(Object(P.a)({},m),{},{launching:!1})):m.idx<u.challenges.length-1?x({idx:m.idx+1,launching:!0}):(x({idx:-1,launching:!1}),N(!0)))},F=function(e){C([].concat(Object(T.a)(v),[e])),o.autoNext&&R()};return Object(d.jsxs)(I.a,{container:!0,justify:"center",className:k.fullHeight,children:[Object(d.jsx)(I.a,{item:!0,xs:2}),Object(d.jsxs)(I.a,{item:!0,xs:8,className:k.fullHeight,children:[null!=u&&m.launching&&m.idx>=0&&Object(d.jsx)(Pn,{challengeType:u.challenges[m.idx].type,challengeNumber:m.idx+1,challengeTotalCount:u.challenges.length,language:u.language,delay:3,onEnd:R}),null!=u&&!m.launching&&m.idx>=0&&Object(d.jsx)(In,{challenge:u.challenges[m.idx],options:{language:u.language,ignoreTimeLimit:o.ignoreTimeLimit},onSuccess:function(){F(!0)},onError:function(){F(!1)}}),null!=u&&w&&Object(d.jsx)(Fn,{test:u,results:v,onBackHome:function(){c.push("/")},onRepeatTest:function(){x({idx:0,launching:!0}),C([]),N(!1)}})]}),Object(d.jsx)(I.a,{item:!0,xs:2,className:"".concat(k.fullHeight," ").concat(k.centerAll),children:!o.autoNext&&m.idx===v.length-1&&Object(d.jsxs)(Me.a,{variant:"extended",size:"large",color:"primary",onClick:R,children:[(null===u||void 0===u?void 0:u.language)===X.En?"Next":"Siguiente","\xa0",Object(d.jsx)(W.a,{children:"navigate_next"})]})})]})},Dn=Object(l.a)((function(e){return{mainContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},headerContainer:{width:"100%",height:"75px"},content:{margin:"30px",height:"calc(100% - 135px)"}}}));function Hn(){var e=Dn();return Object(d.jsx)(f.a,{children:Object(d.jsx)(u.a,{theme:S,children:Object(d.jsx)(h,{children:Object(d.jsxs)("div",{className:e.mainContainer,children:[Object(d.jsx)("div",{className:e.headerContainer,children:Object(d.jsx)(k,{})}),Object(d.jsx)("div",{className:e.content,children:Object(d.jsxs)(O.c,{children:[Object(d.jsx)(O.a,{exact:!0,path:"/",children:Object(d.jsx)(Ce,{})}),Object(d.jsx)(O.a,{path:"/designer/:projectId/:testId",children:Object(d.jsx)(Nn,{})}),Object(d.jsx)(O.a,{path:"/play/:projectId/:testId",children:Object(d.jsx)(An,{})})]})})]})})})})}var Wn=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,231)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(Hn,{})}),document.getElementById("root")),Wn()}},[[137,1,2]]]);
//# sourceMappingURL=main.b8e3749e.chunk.js.map